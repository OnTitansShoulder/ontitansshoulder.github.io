<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="We are all standing on the shoulders of the giants..."><meta name=author content="Zhongkai Liu"><link rel="shortcut icon" href=../../assets/favicon.ico><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.2.6"><title>Google SRE Book - Ontitansshoulder</title><link rel=stylesheet href=../../assets/stylesheets/main.cb6bc1d0.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.39b8e14a.min.css><meta name=theme-color content=#4051b5><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../css/extra.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#concept-of-dev-ops-and-devops class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../.. title=Ontitansshoulder class="md-header-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <div class=md-header-nav__topic> <span class=md-ellipsis> Ontitansshoulder </span> </div> <div class=md-header-nav__topic> <span class=md-ellipsis> Google SRE Book </span> </div> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class="md-tabs__link md-tabs__link--active"> Notes </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=Ontitansshoulder class="md-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Ontitansshoulder </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1 checked> <label class=md-nav__link for=nav-1> Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Notes data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"></span> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Welcome </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-2 type=checkbox id=nav-1-2> <label class=md-nav__link for=nav-1-2> Foundamentals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Foundamentals data-md-level=2> <label class=md-nav__title for=nav-1-2> <span class="md-nav__icon md-icon"></span> Foundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Foundamental/Data_Structures_and_Algos/ class=md-nav__link> Data Structures and Algos </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3 type=checkbox id=nav-1-3> <label class=md-nav__link for=nav-1-3> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=2> <label class=md-nav__title for=nav-1-3> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-1 type=checkbox id=nav-1-3-1> <label class=md-nav__link for=nav-1-3-1> Concepts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Concepts data-md-level=3> <label class=md-nav__title for=nav-1-3-1> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Linux/Concepts/Linux_Foundation/ class=md-nav__link> Linux Foundation </a> </li> <li class=md-nav__item> <a href=../../Linux/Concepts/Linux_Foundation_System_Admin/ class=md-nav__link> Linux System Administration </a> </li> <li class=md-nav__item> <a href=../../Linux/Concepts/Linux_Foundation_Network_Admin/ class=md-nav__link> Linux Network Administration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-2 type=checkbox id=nav-1-3-2> <label class=md-nav__link for=nav-1-3-2> Practical References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Practical References" data-md-level=3> <label class=md-nav__title for=nav-1-3-2> <span class="md-nav__icon md-icon"></span> Practical References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Linux/Commands/Freq-Used-Shell-Cmds/ class=md-nav__link> Freq Used Shell Cmds </a> </li> <li class=md-nav__item> <a href=../../Linux/Commands/Networking-Shell-Cmds/ class=md-nav__link> Freq Used Network Cmds </a> </li> <li class=md-nav__item> <a href=../../Linux/Commands/Text-Manipulating-Cmds/ class=md-nav__link> Text Manipulating Cmds </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-3 type=checkbox id=nav-1-3-3> <label class=md-nav__link for=nav-1-3-3> Tricks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tricks data-md-level=3> <label class=md-nav__title for=nav-1-3-3> <span class="md-nav__icon md-icon"></span> Tricks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Linux/References/Freq-Tasks/ class=md-nav__link> Freq Linux Tasks </a> </li> <li class=md-nav__item> <a href=../../Linux/References/Terminal-Tricks/ class=md-nav__link> Linux Terminal Tricks </a> </li> <li class=md-nav__item> <a href=../../Linux/References/Vim-Tricks/ class=md-nav__link> Vim Tricks </a> </li> <li class=md-nav__item> <a href=../../Linux/References/Account-Administration/ class=md-nav__link> Manage Accounts & Groups </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-4 type=checkbox id=nav-1-4> <label class=md-nav__link for=nav-1-4> Cloud <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Cloud data-md-level=2> <label class=md-nav__title for=nav-1-4> <span class="md-nav__icon md-icon"></span> Cloud </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Cloud-and-Containers/Architecture/Cloud-App-Architecture/ class=md-nav__link> Cloud App Architecture </a> </li> <li class=md-nav__item> <a href=../../Cloud-and-Containers/Docker/Docker/ class=md-nav__link> Docker and Containers </a> </li> <li class=md-nav__item> <a href=../../Cloud-and-Containers/Docker/Docker-Practical/ class=md-nav__link> Docker Practical </a> </li> <li class=md-nav__item> <a href=../../Cloud-and-Containers/k8s/K8s-Knowledge/ class=md-nav__link> K8s Knowledge </a> </li> <li class=md-nav__item> <a href=../../Cloud-and-Containers/k8s/service_mesh/ class=md-nav__link> Service Mesh </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5 type=checkbox id=nav-1-5> <label class=md-nav__link for=nav-1-5> Monitoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Monitoring data-md-level=2> <label class=md-nav__title for=nav-1-5> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5-1 type=checkbox id=nav-1-5-1> <label class=md-nav__link for=nav-1-5-1> Splunk <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Splunk data-md-level=3> <label class=md-nav__title for=nav-1-5-1> <span class="md-nav__icon md-icon"></span> Splunk </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Dev-Tools-Reference/Splunk/Splunk-References/ class=md-nav__link> Splunk Knowledge </a> </li> <li class=md-nav__item> <a href=../../Dev-Tools-Reference/Splunk/Splunk-Dashboarding/ class=md-nav__link> Splunk Dashboarding </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6 type=checkbox id=nav-1-6> <label class=md-nav__link for=nav-1-6> Programming Langs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Programming Langs" data-md-level=2> <label class=md-nav__title for=nav-1-6> <span class="md-nav__icon md-icon"></span> Programming Langs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-1 type=checkbox id=nav-1-6-1> <label class=md-nav__link for=nav-1-6-1> Golang <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Golang data-md-level=3> <label class=md-nav__title for=nav-1-6-1> <span class="md-nav__icon md-icon"></span> Golang </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Golang/Golang-Specs/ class=md-nav__link> Golang Language Reference </a> </li> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Golang/Best-Practices/ class=md-nav__link> Effective Go </a> </li> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Golang/Freq-Used-Libs/ class=md-nav__link> Go libraries and examples </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-2 type=checkbox id=nav-1-6-2> <label class=md-nav__link for=nav-1-6-2> Java <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Java data-md-level=3> <label class=md-nav__title for=nav-1-6-2> <span class="md-nav__icon md-icon"></span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Java/Style-Guide/ class=md-nav__link> Style Guide </a> </li> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Java/Best-Practices/ class=md-nav__link> Effective Java </a> </li> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Java/Design-Patterns/ class=md-nav__link> Java Design Patterns </a> </li> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Java/Testing-Design-Patterns/ class=md-nav__link> Testing Design Patterns </a> </li> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Java/Java_Std_Lib_Cheatsheet/ class=md-nav__link> Java Std Lib Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-3 type=checkbox id=nav-1-6-3> <label class=md-nav__link for=nav-1-6-3> C++ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=C++ data-md-level=3> <label class=md-nav__title for=nav-1-6-3> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/CPP/CPlusPlus_Lang_Specs/ class=md-nav__link> C++ Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-4 type=checkbox id=nav-1-6-4> <label class=md-nav__link for=nav-1-6-4> Perl <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Perl data-md-level=3> <label class=md-nav__title for=nav-1-6-4> <span class="md-nav__icon md-icon"></span> Perl </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Perl/Perl-Lang-Specs/ class=md-nav__link> Perl Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-5 type=checkbox id=nav-1-6-5> <label class=md-nav__link for=nav-1-6-5> Shell <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Shell data-md-level=3> <label class=md-nav__title for=nav-1-6-5> <span class="md-nav__icon md-icon"></span> Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Shell/Shell-Scripting/ class=md-nav__link> Shell Scripting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Github-Markdown/ class=md-nav__link> Github Markdown Guide </a> </li> <li class=md-nav__item> <a href=../../Programming-Lang-Reference/Regex-Specs/ class=md-nav__link> Regex Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-7 type=checkbox id=nav-1-7 checked> <label class=md-nav__link for=nav-1-7> Reading Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reading Notes" data-md-level=2> <label class=md-nav__title for=nav-1-7> <span class="md-nav__icon md-icon"></span> Reading Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../How-Netflix-Works/ class=md-nav__link> How Netflix Works </a> </li> <li class=md-nav__item> <a href=../System-Design-Concepts/ class=md-nav__link> System Design Guide </a> </li> <li class=md-nav__item> <a href=../Why-Latency-Matters/ class=md-nav__link> Why Latency Matters </a> </li> <li class=md-nav__item> <a href=../DevOps_SRE/ class=md-nav__link> Intro to DevOps and SRE </a> </li> <li class=md-nav__item> <a href=../Leading-without-formal-authority/ class=md-nav__link> Leading Without Formal Authority </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Google SRE Book <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Google SRE Book </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#concept-of-dev-ops-and-devops class=md-nav__link> Concept of Dev, Ops, and DevOps </a> </li> <li class=md-nav__item> <a href=#sre class=md-nav__link> SRE </a> </li> <li class=md-nav__item> <a href=#how-sre-differs-from-devops class=md-nav__link> How SRE Differs from DevOps </a> <nav class=md-nav aria-label="How SRE Differs from DevOps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#error-budget class=md-nav__link> Error budget </a> </li> <li class=md-nav__item> <a href=#monitoring class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=#oncall-emergency-response class=md-nav__link> Oncall, Emergency Response </a> </li> <li class=md-nav__item> <a href=#change-management class=md-nav__link> Change Management </a> </li> <li class=md-nav__item> <a href=#capacity-planning class=md-nav__link> Capacity Planning </a> </li> <li class=md-nav__item> <a href=#provisioning class=md-nav__link> Provisioning </a> </li> <li class=md-nav__item> <a href=#efficiency-and-performance class=md-nav__link> Efficiency and Performance </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#production-environment class=md-nav__link> Production Environment </a> <nav class=md-nav aria-label="Production Environment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#managing-machines class=md-nav__link> Managing Machines </a> </li> <li class=md-nav__item> <a href=#storage class=md-nav__link> Storage </a> </li> <li class=md-nav__item> <a href=#networking class=md-nav__link> Networking </a> </li> <li class=md-nav__item> <a href=#locking class=md-nav__link> Locking </a> </li> <li class=md-nav__item> <a href=#monitoring_1 class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=#software-infrastructure class=md-nav__link> Software infrastructure </a> </li> <li class=md-nav__item> <a href=#development-environment class=md-nav__link> Development Environment </a> </li> <li class=md-nav__item> <a href=#shakespeare class=md-nav__link> Shakespeare </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#principles class=md-nav__link> Principles </a> <nav class=md-nav aria-label=Principles> <ul class=md-nav__list> <li class=md-nav__item> <a href=#embracing-risk class=md-nav__link> Embracing Risk </a> <nav class=md-nav aria-label="Embracing Risk"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#measuring-risks class=md-nav__link> Measuring risks </a> </li> <li class=md-nav__item> <a href=#risk-tolerance class=md-nav__link> Risk tolerance </a> </li> <li class=md-nav__item> <a href=#error-budgets class=md-nav__link> Error Budgets </a> </li> <li class=md-nav__item> <a href=#service-level-terminology class=md-nav__link> Service Level Terminology </a> </li> <li class=md-nav__item> <a href=#indicators-processing class=md-nav__link> Indicators processing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#eliminate-toil class=md-nav__link> Eliminate Toil </a> <nav class=md-nav aria-label="Eliminate Toil"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#typical-sre-duties class=md-nav__link> Typical SRE duties </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring_2 class=md-nav__link> Monitoring </a> <nav class=md-nav aria-label=Monitoring> <ul class=md-nav__list> <li class=md-nav__item> <a href=#symptoms-vs-causes class=md-nav__link> Symptoms vs. Causes </a> </li> <li class=md-nav__item> <a href=#monitoring-resolutions class=md-nav__link> Monitoring Resolutions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#automation class=md-nav__link> Automation </a> <nav class=md-nav aria-label=Automation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#value-of-automation class=md-nav__link> Value of automation </a> </li> <li class=md-nav__item> <a href=#use-cases class=md-nav__link> Use cases </a> </li> <li class=md-nav__item> <a href=#case-studies class=md-nav__link> Case studies </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#release-engineering class=md-nav__link> Release Engineering </a> <nav class=md-nav aria-label="Release Engineering"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#philosophy class=md-nav__link> Philosophy </a> </li> <li class=md-nav__item> <a href=#ci-cd class=md-nav__link> CI, CD </a> </li> <li class=md-nav__item> <a href=#configuration-management class=md-nav__link> Configuration Management </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#simplicity class=md-nav__link> Simplicity </a> <nav class=md-nav aria-label=Simplicity> <ul class=md-nav__list> <li class=md-nav__item> <a href=#boring-virtue class=md-nav__link> "Boring" virtue </a> </li> <li class=md-nav__item> <a href=#remove-bloat class=md-nav__link> Remove bloat </a> </li> <li class=md-nav__item> <a href=#minimal-modularity-simple-release class=md-nav__link> Minimal, Modularity, Simple Release </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> Best Practices </a> <nav class=md-nav aria-label="Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#practical-alerting class=md-nav__link> Practical Alerting </a> <nav class=md-nav aria-label="Practical Alerting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-borgmon-story class=md-nav__link> The Borgmon story </a> <nav class=md-nav aria-label="The Borgmon story"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#app-instrumentation class=md-nav__link> App instrumentation </a> </li> <li class=md-nav__item> <a href=#time-series-data-storage class=md-nav__link> Time-series data storage </a> </li> <li class=md-nav__item> <a href=#rules class=md-nav__link> Rules </a> </li> <li class=md-nav__item> <a href=#alerting class=md-nav__link> Alerting </a> </li> <li class=md-nav__item> <a href=#sharding-monitoring class=md-nav__link> Sharding Monitoring </a> </li> <li class=md-nav__item> <a href=#black-box-monitoring class=md-nav__link> Black-box monitoring </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#borgmon-of-ten-years class=md-nav__link> Borgmon of Ten Years </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#on-calls class=md-nav__link> On-Calls </a> <nav class=md-nav aria-label=On-Calls> <ul class=md-nav__list> <li class=md-nav__item> <a href=#duty class=md-nav__link> Duty </a> </li> <li class=md-nav__item> <a href=#balance class=md-nav__link> Balance </a> </li> <li class=md-nav__item> <a href=#feeling-safe class=md-nav__link> Feeling Safe </a> </li> <li class=md-nav__item> <a href=#avoid-overload class=md-nav__link> Avoid Overload </a> </li> <li class=md-nav__item> <a href=#avoid-underload class=md-nav__link> Avoid Underload </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#effective-troubleshooting class=md-nav__link> Effective Troubleshooting </a> <nav class=md-nav aria-label="Effective Troubleshooting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#theory class=md-nav__link> Theory </a> </li> <li class=md-nav__item> <a href=#avoid-pitfalls class=md-nav__link> Avoid Pitfalls </a> </li> <li class=md-nav__item> <a href=#in-practice class=md-nav__link> In Practice </a> <nav class=md-nav aria-label="In Practice"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#problem-report class=md-nav__link> Problem Report </a> </li> <li class=md-nav__item> <a href=#triage class=md-nav__link> Triage </a> </li> <li class=md-nav__item> <a href=#examine class=md-nav__link> Examine </a> </li> <li class=md-nav__item> <a href=#diagnose class=md-nav__link> Diagnose </a> </li> <li class=md-nav__item> <a href=#test-and-treat class=md-nav__link> Test and Treat </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#negative-results class=md-nav__link> Negative Results </a> </li> <li class=md-nav__item> <a href=#cure class=md-nav__link> Cure </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#emergency-response class=md-nav__link> Emergency Response </a> </li> <li class=md-nav__item> <a href=#managing-incidents class=md-nav__link> Managing Incidents </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../Good-Reads/ class=md-nav__link> Good Reads </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#concept-of-dev-ops-and-devops class=md-nav__link> Concept of Dev, Ops, and DevOps </a> </li> <li class=md-nav__item> <a href=#sre class=md-nav__link> SRE </a> </li> <li class=md-nav__item> <a href=#how-sre-differs-from-devops class=md-nav__link> How SRE Differs from DevOps </a> <nav class=md-nav aria-label="How SRE Differs from DevOps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#error-budget class=md-nav__link> Error budget </a> </li> <li class=md-nav__item> <a href=#monitoring class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=#oncall-emergency-response class=md-nav__link> Oncall, Emergency Response </a> </li> <li class=md-nav__item> <a href=#change-management class=md-nav__link> Change Management </a> </li> <li class=md-nav__item> <a href=#capacity-planning class=md-nav__link> Capacity Planning </a> </li> <li class=md-nav__item> <a href=#provisioning class=md-nav__link> Provisioning </a> </li> <li class=md-nav__item> <a href=#efficiency-and-performance class=md-nav__link> Efficiency and Performance </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#production-environment class=md-nav__link> Production Environment </a> <nav class=md-nav aria-label="Production Environment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#managing-machines class=md-nav__link> Managing Machines </a> </li> <li class=md-nav__item> <a href=#storage class=md-nav__link> Storage </a> </li> <li class=md-nav__item> <a href=#networking class=md-nav__link> Networking </a> </li> <li class=md-nav__item> <a href=#locking class=md-nav__link> Locking </a> </li> <li class=md-nav__item> <a href=#monitoring_1 class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=#software-infrastructure class=md-nav__link> Software infrastructure </a> </li> <li class=md-nav__item> <a href=#development-environment class=md-nav__link> Development Environment </a> </li> <li class=md-nav__item> <a href=#shakespeare class=md-nav__link> Shakespeare </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#principles class=md-nav__link> Principles </a> <nav class=md-nav aria-label=Principles> <ul class=md-nav__list> <li class=md-nav__item> <a href=#embracing-risk class=md-nav__link> Embracing Risk </a> <nav class=md-nav aria-label="Embracing Risk"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#measuring-risks class=md-nav__link> Measuring risks </a> </li> <li class=md-nav__item> <a href=#risk-tolerance class=md-nav__link> Risk tolerance </a> </li> <li class=md-nav__item> <a href=#error-budgets class=md-nav__link> Error Budgets </a> </li> <li class=md-nav__item> <a href=#service-level-terminology class=md-nav__link> Service Level Terminology </a> </li> <li class=md-nav__item> <a href=#indicators-processing class=md-nav__link> Indicators processing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#eliminate-toil class=md-nav__link> Eliminate Toil </a> <nav class=md-nav aria-label="Eliminate Toil"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#typical-sre-duties class=md-nav__link> Typical SRE duties </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring_2 class=md-nav__link> Monitoring </a> <nav class=md-nav aria-label=Monitoring> <ul class=md-nav__list> <li class=md-nav__item> <a href=#symptoms-vs-causes class=md-nav__link> Symptoms vs. Causes </a> </li> <li class=md-nav__item> <a href=#monitoring-resolutions class=md-nav__link> Monitoring Resolutions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#automation class=md-nav__link> Automation </a> <nav class=md-nav aria-label=Automation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#value-of-automation class=md-nav__link> Value of automation </a> </li> <li class=md-nav__item> <a href=#use-cases class=md-nav__link> Use cases </a> </li> <li class=md-nav__item> <a href=#case-studies class=md-nav__link> Case studies </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#release-engineering class=md-nav__link> Release Engineering </a> <nav class=md-nav aria-label="Release Engineering"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#philosophy class=md-nav__link> Philosophy </a> </li> <li class=md-nav__item> <a href=#ci-cd class=md-nav__link> CI, CD </a> </li> <li class=md-nav__item> <a href=#configuration-management class=md-nav__link> Configuration Management </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#simplicity class=md-nav__link> Simplicity </a> <nav class=md-nav aria-label=Simplicity> <ul class=md-nav__list> <li class=md-nav__item> <a href=#boring-virtue class=md-nav__link> "Boring" virtue </a> </li> <li class=md-nav__item> <a href=#remove-bloat class=md-nav__link> Remove bloat </a> </li> <li class=md-nav__item> <a href=#minimal-modularity-simple-release class=md-nav__link> Minimal, Modularity, Simple Release </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> Best Practices </a> <nav class=md-nav aria-label="Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#practical-alerting class=md-nav__link> Practical Alerting </a> <nav class=md-nav aria-label="Practical Alerting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-borgmon-story class=md-nav__link> The Borgmon story </a> <nav class=md-nav aria-label="The Borgmon story"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#app-instrumentation class=md-nav__link> App instrumentation </a> </li> <li class=md-nav__item> <a href=#time-series-data-storage class=md-nav__link> Time-series data storage </a> </li> <li class=md-nav__item> <a href=#rules class=md-nav__link> Rules </a> </li> <li class=md-nav__item> <a href=#alerting class=md-nav__link> Alerting </a> </li> <li class=md-nav__item> <a href=#sharding-monitoring class=md-nav__link> Sharding Monitoring </a> </li> <li class=md-nav__item> <a href=#black-box-monitoring class=md-nav__link> Black-box monitoring </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#borgmon-of-ten-years class=md-nav__link> Borgmon of Ten Years </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#on-calls class=md-nav__link> On-Calls </a> <nav class=md-nav aria-label=On-Calls> <ul class=md-nav__list> <li class=md-nav__item> <a href=#duty class=md-nav__link> Duty </a> </li> <li class=md-nav__item> <a href=#balance class=md-nav__link> Balance </a> </li> <li class=md-nav__item> <a href=#feeling-safe class=md-nav__link> Feeling Safe </a> </li> <li class=md-nav__item> <a href=#avoid-overload class=md-nav__link> Avoid Overload </a> </li> <li class=md-nav__item> <a href=#avoid-underload class=md-nav__link> Avoid Underload </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#effective-troubleshooting class=md-nav__link> Effective Troubleshooting </a> <nav class=md-nav aria-label="Effective Troubleshooting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#theory class=md-nav__link> Theory </a> </li> <li class=md-nav__item> <a href=#avoid-pitfalls class=md-nav__link> Avoid Pitfalls </a> </li> <li class=md-nav__item> <a href=#in-practice class=md-nav__link> In Practice </a> <nav class=md-nav aria-label="In Practice"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#problem-report class=md-nav__link> Problem Report </a> </li> <li class=md-nav__item> <a href=#triage class=md-nav__link> Triage </a> </li> <li class=md-nav__item> <a href=#examine class=md-nav__link> Examine </a> </li> <li class=md-nav__item> <a href=#diagnose class=md-nav__link> Diagnose </a> </li> <li class=md-nav__item> <a href=#test-and-treat class=md-nav__link> Test and Treat </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#negative-results class=md-nav__link> Negative Results </a> </li> <li class=md-nav__item> <a href=#cure class=md-nav__link> Cure </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#emergency-response class=md-nav__link> Emergency Response </a> </li> <li class=md-nav__item> <a href=#managing-incidents class=md-nav__link> Managing Incidents </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>Google SRE Book</h1> <p>Notes taken from <a href=https://sre.google/sre-book/table-of-contents/ target=_blank>Google SRE Book</a>.</p> <blockquote> <p>Software engineering has this in common with having children: the labor before the birth is painful and difficult, but the labor after the birth is where you actually spend most of your effort.</p> </blockquote> <p>SREs are focused on operating services built atop the distributed computing systems that span globally across multiple regions and serve millions to billions of users.</p> <p>Much like security, the earlier you care about reliability, the better.</p> <h2 id=concept-of-dev-ops-and-devops>Concept of Dev, Ops, and DevOps<a class=headerlink href=#concept-of-dev-ops-and-devops title="Permanent link">&para;</a></h2> <p>This systems administrator, or sysadmin, assembles existing software components (developed by the developers) and deploying them to produce a service, runs the service, and responds to events and updates as they occur. These tasks generally fall into the category of operations. Developers and sysadmins are therefore divided into discrete teams: "development/dev" and "operations/ops".</p> <p>As the system grows in complexity and traffic volume, generating a corresponding increase in events and updates, the sysadmin team grows to absorb the additional work and increases operational cost, which is a direct cost.</p> <p>The indirect costs arise from the fact that the two teams are quite different in background, skill set, and incentives. They use different vocabulary to describe situations; they carry different assumptions about both risk and possibilities for technical solutions; they have different assumptions about the target level of product stability.</p> <p>At their core, the development teams want to launch new features and see them adopted by users; the ops teams want to make sure the service doesn’t break while they are holding the pager.</p> <p>DevOps is a set of principles guiding software development: involvement of the IT function in each phase of a system’s design and development, heavy reliance on automation versus human effort, the application of engineering practices and tools to operations tasks.</p> <h2 id=sre>SRE<a class=headerlink href=#sre title="Permanent link">&para;</a></h2> <h2 id=how-sre-differs-from-devops>How SRE Differs from DevOps<a class=headerlink href=#how-sre-differs-from-devops title="Permanent link">&para;</a></h2> <p>DevOps's principles and practices are consistent with Site Reliability Engineering. DevOps is a generalization of several core SRE principles to a wider range of organizations, management structures, and personnel.</p> <p>In general, an SRE team is responsible for the <code>availability, latency, performance, efficiency, change management, monitoring, emergency response,</code> and <code>capacity planning</code> of their service(s).</p> <p>Site Reliability Engineering teams focus on hiring software engineers to deploy and run products and to create systems to automate work that otherwise would be performed manually.</p> <p>This structure also improves the product development teams: easy transfers between product development and SRE teams cross-train the entire group.</p> <p>UNIX system internals and networking (Layer 1 to Layer 3) expertise are the two most common types of alternate technical skills for software engineers hired into SRE roles. A diverse background of the SRE team frequently results in clever, high-quality systems.</p> <p>Google places a 50% cap on the aggregate "ops" work for all SREs—tickets, on-call, manual tasks to ensure SRE team can focus on engineering work in building or improving existing systems.</p> <p>Eliminating toil is one of SRE’s most important tasks. Systems should be automatic, not just automated. They should run and repair themselves.</p> <p>Postmortems should be written for all significant incidents, regardless of whether or not they paged; postmortems that did not trigger a page are even more valuable, as they likely point to clear monitoring gaps. Google operates under a <strong>blame-free</strong> postmortem culture, with the goal of exposing faults and applying engineering to fix these faults, rather than avoiding or minimizing exposing them.</p> <h3 id=error-budget>Error budget<a class=headerlink href=#error-budget title="Permanent link">&para;</a></h3> <p>Product development and SRE teams can enjoy a productive working relationship by eliminating the structural conflict in their respective goals between pace of innovation and product stability, with an agreed error budget.</p> <p>A service that’s 99.99% available is 0.01% unavailable. That permitted 0.01% unavailability is the service’s error budget. 100% error budget is the wrong reliability target for basically everything. Setting the correct error budget is a product question and should consider:</p> <ul> <li>level of availability to keep user satisfied</li> <li>alternatives for unhappy users with given availability</li> <li>user's accessible features of product at different availability levels</li> </ul> <p>Spend error budget taking risks with things to launch. As soon as SRE activities are conceptualized in this framework, freeing up the error budget through tactics such as phased rollouts and 1% experiments can optimize for quicker launches.</p> <p>An outage is no longer a "bad" thing—it is an expected part of the process of innovation, and an occurrence that both development and SRE teams manage rather than fear.</p> <h3 id=monitoring>Monitoring<a class=headerlink href=#monitoring title="Permanent link">&para;</a></h3> <p>Monitoring allows service owners keep track of a system’s health and availability. Traditionally, monitoring watches for a specific value or condition, and then triggers an alert to engineers when that value is exceeded or that condition occurs.</p> <p>Monitoring should never require a human to interpret any part of the alerting domain. Instead, software should do the interpreting, and humans should be notified only when they need to take action.</p> <p>Alerts should be sent when immediate actions need to be taken by an engineer. Tickets should be issued when engineers action is required but not immediately. Logging should be recorded for diagnostic or root-cause-analysis purposes.</p> <h3 id=oncall-emergency-response>Oncall, Emergency Response<a class=headerlink href=#oncall-emergency-response title="Permanent link">&para;</a></h3> <p>Reliability is a function of mean time to failure (MTTF) and mean time to repair (MTTR). Humans add latency. A system that can avoid emergencies that require human intervention will have higher availability than a system that requires hands-on intervention.</p> <p>Thinking through and recording the best practices ahead of time in a <strong>"Runbook"</strong> that gives each possible fail case and steps for remediation, drastically improves the MTTR for incidents that involves human.</p> <h3 id=change-management>Change Management<a class=headerlink href=#change-management title="Permanent link">&para;</a></h3> <p>Best practices implementing automation around changes:</p> <ul> <li>apply progressive rollouts</li> <li>detect problems quickly and accurately</li> <li>roll back changes safely and quickly upon detecting problems</li> </ul> <h3 id=capacity-planning>Capacity Planning<a class=headerlink href=#capacity-planning title="Permanent link">&para;</a></h3> <p>Demand forecasting and capacity planning can be viewed as ensuring that there is sufficient capacity and redundancy to serve projected future demand with the required availability.</p> <p>Capacity planning should take both organic growth (natural product adoption from users) and inorganic growth (feature launches, marketing campaigns) into account.</p> <p>Regular load testing of the system should be performed to correlate raw resource capacity to service capacity.</p> <h3 id=provisioning>Provisioning<a class=headerlink href=#provisioning title="Permanent link">&para;</a></h3> <p>Provisioning combines both change management and capacity planning. Provisioning must be conducted quickly and only when necessary, as capacity is expensive.</p> <p>Adding new capacity often involves spinning up a new instance or location, making significant modification to existing systems (load balancers, networking, configurations changes), and validating that the new capacity performs and delivers correct results.</p> <h3 id=efficiency-and-performance>Efficiency and Performance<a class=headerlink href=#efficiency-and-performance title="Permanent link">&para;</a></h3> <p>Resource utilization provides insights of a service's efficiency, and is a function of demand (load), capacity, and software efficiency. SREs predict demand, provision capacity, and can modify the software.</p> <p>Software systems become slower as load is added to them. A slowdown in a service equates to a loss of capacity. At some point, a slowing system stops serving, which corresponds to infinite slowness.</p> <p>SREs provision to meet a capacity target at a specific response speed (responses per second), and thus are keenly interested in a service’s performance.</p> <p>SREs and product developers will (and should) monitor and modify a service to improve its performance, thus adding capacity and improving efficiency.</p> <h2 id=production-environment>Production Environment<a class=headerlink href=#production-environment title="Permanent link">&para;</a></h2> <p>In a production environment, a machine refers to a piece of hardware or VM and a server refers to a piece of software that implements a service. Machines can run any server.</p> <p>Topology of a Google datacenter:</p> <ul> <li>Tens of machines are placed in a rack.</li> <li>Racks stand in a row.</li> <li>One or more rows form a cluster.</li> <li>Usually a datacenter building houses multiple clusters.</li> <li>Multiple datacenter buildings that are located close together form a campus.</li> </ul> <h3 id=managing-machines>Managing Machines<a class=headerlink href=#managing-machines title="Permanent link">&para;</a></h3> <p>Borg is a distributed cluster operating system managing user jobs at the cluster level and allocate resources to jobs.</p> <p>Jobs can either be indefinitely running servers or batch processes like a MapReduce. Borg then continually monitors these tasks. If a task malfunctions, it is killed and restarted, possibly on a different machine.</p> <p>Borg allocates a name and index number to each task using the Borg Naming Service (BNS). Rather than using the IP address and port number, other processes connect to Borg tasks via the BNS name, which is translated to an IP address and port number by BNS.</p> <h3 id=storage>Storage<a class=headerlink href=#storage title="Permanent link">&para;</a></h3> <p>The storage layer is responsible for offering users easy and reliable access to the storage available for a cluster:</p> <ul> <li>the lowest layer is called D (disk), a fileserver running on almost all machines in a cluster</li> <li>Colossus layer is on top of D and creates a cluster-wide filesystem that offers usual filesystem semantics, as well as replication and encryption</li> <li>next layer are several database-like services<ul> <li>Bigtable, NoSQL database handles petabyte-grade data. It is a sparse, distributed, persistent multidimensional sorted map that is indexed by row key, column key, and timestamp; each value in the map is an uninterpreted array of bytes. Bigtable supports eventually consistent, cross-datacenter replication.</li> <li>Spanner, SQL-like distributed database for real consistency across the world</li> <li>Blobstore</li> </ul> </li> </ul> <h3 id=networking>Networking<a class=headerlink href=#networking title="Permanent link">&para;</a></h3> <p>Instead of using "smart" routing hardware, Google rely on less expensive "dumb" switching components in combination with a central (duplicated) controller that precomputes best paths across the network.</p> <p>Google directs users to the closest datacenter with available capacity. Our Global Software Load Balancer (GSLB) performs load balancing on three levels:</p> <ul> <li>geographic DNS requests</li> <li>user service (i.e. YouTube, Google Maps)</li> <li>RPC level</li> </ul> <h3 id=locking>Locking<a class=headerlink href=#locking title="Permanent link">&para;</a></h3> <p>The Chubby lock service provides a filesystem-like API for maintaining locks. It uses the Paxos protocol for asynchronous Consensus.</p> <p>Chubby helps master election and provides a consistent storage.</p> <h3 id=monitoring_1>Monitoring<a class=headerlink href=#monitoring_1 title="Permanent link">&para;</a></h3> <p>Borgmon monitoring proram regularly scrapes metrics from monitored servers. These metrics can be used instantaneously for alerting and also stored for use in historic overviews.</p> <h3 id=software-infrastructure>Software infrastructure<a class=headerlink href=#software-infrastructure title="Permanent link">&para;</a></h3> <p>Google software architecture is designed to make the most efficient use of the hardware infrastructure. Code is heavily multithreaded. Every server has an HTTP server that provides diagnostics and statistics for a given task.</p> <p>All of Google’s services communicate using a Remote Procedure Call (RPC) infrastructure named Stubby (opensourced as gRPC).</p> <p>Often, an RPC call is made even when a call to a subroutine in the local program needs to be performed. This makes it easier to refactor the call into a different server if more modularity is needed, or when a server’s codebase grows.</p> <p>A server receives RPC requests from its frontend and sends RPCs to its backend. Data is transferred to and from an RPC using protocol buffers (protobufs). </p> <p>Protocol buffers have many advantages over XML for serializing structured data: they are simpler to use, 3 to 10 times smaller, 20 to 100 times faster, and less ambiguous.</p> <h3 id=development-environment>Development Environment<a class=headerlink href=#development-environment title="Permanent link">&para;</a></h3> <p>Development velocity is very important to Google. Google Software Engineers work from a single shared repository.</p> <p>If engineers encounter a problem in a component outside of their project, they can fix the problem, send the proposed changes ("changelist/CL", like a PR) to the owner for review, and submit (merge) the CL to the mainline.</p> <p>Changes to source code in an engineer’s own project require a review. All software is reviewed before being submitted.</p> <p>When software is built, the build request is sent to build servers in a datacenter and executed in parallel. Each CL submition causes tests to run on all software that may depend on that CL. Some projects use a push-on-green system, where a new version is automatically pushed to production after passing tests.</p> <h3 id=shakespeare>Shakespeare<a class=headerlink href=#shakespeare title="Permanent link">&para;</a></h3> <p><a href=https://sre.google/sre-book/production-environment/#xref_production-environment_shakespeare target=_blank>Shakespeare: a sample service at google</a></p> <h2 id=principles>Principles<a class=headerlink href=#principles title="Permanent link">&para;</a></h2> <p>A key principle of any effective software engineering, not only reliability-oriented engineering, simplicity is a quality that, once lost, can be extraordinarily difficult to recapture.</p> <h3 id=embracing-risk>Embracing Risk<a class=headerlink href=#embracing-risk title="Permanent link">&para;</a></h3> <p>Cost does not increase linearly as reliability increments: an incremental improvement in reliability may cost 100x more than the previous increment. The cost comes from:</p> <ul> <li>redundant machine and computing resources</li> <li>opportunity cost for building systems or features usable by end users</li> </ul> <h4 id=measuring-risks>Measuring risks<a class=headerlink href=#measuring-risks title="Permanent link">&para;</a></h4> <p>SRE manages service reliability largely by managing risk, conceptualizes risk as a continuum, and identifies the appropriate level of risk tolerance for the services to run.</p> <p>Service failures can have many potential effects, including user dissatisfaction, harm, or loss of trust; direct or indirect revenue loss; brand or reputational impact; and undesirable press coverage.</p> <p>For most services, the most straightforward way of representing risk tolerance is in terms of the acceptable level of <strong>unplanned downtime</strong> and is expressed by service availability in terms of number of "nines": 99.9%, 99.99%, etc. The availability can be calculated as (uptime / uptime + downtime) or (successful requests / total requests). The same principles also apply to nonserving systems with minimal modification.</p> <h4 id=risk-tolerance>Risk tolerance<a class=headerlink href=#risk-tolerance title="Permanent link">&para;</a></h4> <p>Product managers are charged with understanding the users and the business, and for shaping the product for success in the marketplace. To identify the risk tolerance of a service, SREs must work with the product owners to turn a set of business goals into explicit objectives that can be engineered.</p> <p>Factors to consider on consumer services:</p> <ul> <li>required level of avalilability<ul> <li>users' expectation</li> <li>impact on our revenue, or our users' revenue</li> <li>paid or free service</li> <li>how much does our competitors set</li> <li>is the service target consumers or enterprises</li> </ul> </li> <li>does different types of failures have different effects on the service<ul> <li>business resilience on service downtime</li> <li>impact from low rate of failures, or occasional full-site outage</li> <li>planned downtime</li> </ul> </li> <li>locate a service cost on the risk continuum<ul> <li>what would be the increase in revenue and the cost to increase the availability</li> <li>move forward when the revenue increase offsets the implementation cost</li> </ul> </li> <li>service metrics to account for<ul> <li>understand the importance of metrics under different use cases and focus on those important ones</li> </ul> </li> </ul> <h4 id=error-budgets>Error Budgets<a class=headerlink href=#error-budgets title="Permanent link">&para;</a></h4> <p>Error budget provides a common incentive that allows both product development and SRE to focus on finding the right balance between innovation and reliability.</p> <p>The tensions between feature delivery and site reliability reflect themselves in different opinions about the level of effort that should be put into engineering practices:</p> <ul> <li>software fault tolerance</li> <li>testing</li> <li>release frequency</li> <li>canary duration and size</li> </ul> <p>The <strong>Service Level Objectives</strong> express error budget in a clear, objective metric that determines how unreliable the service is allowed to be within a single quarter.</p> <ul> <li>Product Management defines an SLO of expected uptime for the quarter</li> <li>Monitoring system measure the actual uptime</li> <li>The difference between the budget and the unreliability happened tells the remaining budget for the quarter</li> <li>As long as there are budget remaining, new releases can be pushed</li> </ul> <p>For example, imagine that a service’s SLO is to successfully serve 99.999% of all queries per quarter. This means that the service’s error budget is a failure rate of 0.001% for a given quarter. If a problem causes us to fail 0.0002% of the expected queries for the quarter, the problem spends 20% of the service’s quarterly error budget.</p> <p>If product development wants to skimp on testing or increase push velocity and SRE is resistant, the error budget guides the decision. When the budget is large, the product developers can take more risks. When the budget is nearly drained, the product developers themselves will push for more testing or slower push velocity, as they don’t want to risk using up the budget and stall their launch.</p> <h4 id=service-level-terminology>Service Level Terminology<a class=headerlink href=#service-level-terminology title="Permanent link">&para;</a></h4> <p><strong>Indicators (SLI)</strong> - a carefully defined quantitative measure of some aspect of the level of service that is provided. i.e. request latency, error rate, system throughput or rps. These metrics are often aggregated into a rate, average, or percentile.</p> <p>Understanding of what your users want from the system will inform the judicious selection of a few indicators:</p> <ul> <li>user-facing: availability, latency, throughput</li> <li>storage systems: latency, availability, durability</li> <li>big data systems, data pipelines: throughput, end-to-end latency</li> <li>generally for all systems: correctness</li> </ul> <p><strong>Objectives (SLO)</strong> - a target value or range of values for a service level that is measured by an SLI.</p> <p>For maximum clarity, SLOs should specify how they’re measured and the conditions under which they’re valid. i.e. 99% (averaged over 1 minute) of Get RPC calls will complete in less than 100 ms (measured across all the backend servers).</p> <p>Choose just enough SLOs to provide good coverage of your system’s attributes. Get rid of unnecessary SLOs that cannot indicate priorities.</p> <p>Keep a <strong>safety margin</strong>, use a tighter internal SLO than the SLO advertised to users gives you room to respond to chronic problems before they become visible externally. You can always refine SLO definitions and targets over time as you learn about a system’s behavior. Start loose and tighten it later.</p> <p><strong>Don't overachieve</strong>. If your service’s actual performance is much better than its stated SLO, users will come to rely on its current performance.</p> <p>Understanding how well a system is meeting its expectations helps decide whether to invest in making the system faster, more available, and more resilient, on tasks such as paying off tech debts, adding new features, introducing other tools, workflows, or products.</p> <p><strong>Agreements (SLA)</strong> - an explicit or implicit contract with your users that includes consequences of meeting (or missing) the SLOs they contain.</p> <p>The consequences are most easily recognized when they are financial: a rebate or a penalty—but they can take other forms. SLAs are closely tied to business and product decisions.</p> <p>It is wise to be conservative in what you advertise to users, as the broader the constituency, the harder it is to change or delete SLAs that prove to be unwise or difficult to work with.</p> <h4 id=indicators-processing>Indicators processing<a class=headerlink href=#indicators-processing title="Permanent link">&para;</a></h4> <p>Indicator metrics are most naturally gathered on the server side using a monitoring system or with periodic log analysis. Some should be instrumented with client-side collection, because not measuring behavior at the client can miss a range of problems that affect users but don’t affect server-side metrics.</p> <p>Most metrics are better thought of as <strong>distributions</strong> or <strong>percentiles</strong> rather than averages. For example, a simple average latency metric aggregated over a fixed window can obscure these tail latencies, as well as changes in them. Alerting based only on the average latency would show no change in behavior over the course of the day, when there are in fact significant changes in the tail latency.</p> <p>User studies have shown that people typically prefer a slightly slower system to one with high variance in response time.</p> <p>Indicators should be standardized to avoid repeated reasoning each time they are needed. i.e. make it a template:</p> <ul> <li>aggregation window/interval size: 1 minute</li> <li>aggregation region: all within a cluster</li> <li>measurement frequency: every 10 seconds</li> <li>requests measured: HTTP GETs on xxx API</li> <li>data collection: monitoring framework measured at the server</li> <li>data access latency: time to last byte received since request sent</li> </ul> <h3 id=eliminate-toil>Eliminate Toil<a class=headerlink href=#eliminate-toil title="Permanent link">&para;</a></h3> <p><strong>Overhead</strong> is often work not directly tied to running a production service, and includes tasks like team meetings, setting and grading goals, snippets, and HR paperwork.</p> <p><strong>Toil</strong> is the kind of work tied to running a production service that tends to be:</p> <ul> <li>manual, such as manually running some commands or a script that completes some task</li> <li>repetitive, the work you do over and over manually</li> <li>automatable, when machines can do the task as well as human without relying on a human's judgement for choices</li> <li>tactical, interrupt-driven and reactive, rather than strategy-driven and proactive. i.e. pager duty is inevitable but with opportunity to minimize</li> <li>no enduring value, so the service remains in the same performance state after you have finished a task</li> <li><strong>scales linearly</strong> as a service grows. Ideally the service should be able to grow by one order of magnitude with zero manual work to add resource</li> </ul> <p>Toil tends to expand if left unchecked and can quickly fill 100% of everyone’s time. SRE's engineering work either reduce future toil or add service features. Feature development typically focuses on improving reliability, performance, or utilization, which often reduces toil as a second-order effect.</p> <p>SREs report that their top source of toil is interrupts (that is, non-urgent service-related messages and emails). The next leading source is on-call (urgent) response, followed by releases and pushes.</p> <h4 id=typical-sre-duties>Typical SRE duties<a class=headerlink href=#typical-sre-duties title="Permanent link">&para;</a></h4> <ul> <li>Software engineering - writing or extending code, design document, or software documentation.<ul> <li>i.e. automation scripts, developing tools or frameworks, adding service features for scalability and reliability, hardening service with infrastructure code</li> </ul> </li> <li>System engineering - configuring production systems, modifying configurations, or documenting systems runbooks<ul> <li>i.e. setting up monitoring, load balancer configuration, server configuration, tuning OS parameters, productionization for dev teams</li> </ul> </li> <li>Toil - repetitive work in running a service<ul> <li>i.e. mentioned in above section</li> </ul> </li> <li>Overhead - administrative work not tied directly to running a service<ul> <li>i.e. hiring, HR paperwork, trainings, meetings, peer reviews and self-assess</li> </ul> </li> </ul> <p>Toil isn’t always and invariably bad, and some amount of toil is unavoidable in any engineering role. Small amount of toil can be calming and rewards with a sense of quick wins. Toil becomes toxic when experienced in large quantities. </p> <p>If we all commit to eliminate a bit of toil each week with some good engineering, we’ll steadily clean up our services, and we can shift our collective efforts to engineering for scale, architecting the next generation of services, and building cross-SRE toolchains.</p> <h3 id=monitoring_2>Monitoring<a class=headerlink href=#monitoring_2 title="Permanent link">&para;</a></h3> <p>Monitoring terminologies:</p> <ul> <li>monitoring - collecting, processing, aggregating, and displaying real-time quantitative data about a system</li> <li>white-box monitoring - base on metrics exposed by the internals of the system, such as logs</li> <li>black-box monitoring - testing externally visible behavior as a user would see it, such as end-to-end testing</li> <li>dashboard - an application provides a summary view of a service's core metrics</li> <li>alert - a notification intended to be read by a human and that is pushed to a system such as a bug or ticket queue, an email alias, or a pager</li> <li>root cause - a defect in a software or human system that, if repaired, instills confidence that this event won’t happen again in the same way</li> <li>node, machine - used interchangeably to indicate a single instance of a running kernel in either a physical server, virtual machine, or container</li> <li>push - any change to a service’s running software or its configuration.</li> </ul> <p>Monitoring helps:</p> <ul> <li>analyzing long-term trends</li> <li>comparing over time or experiment groups</li> <li>alerting</li> <li>building dashboards</li> <li>ad hoc retrospective analysis</li> <li>business analytics</li> <li>security analysis</li> </ul> <p>Effective alerting systems have good signal and very low noise (unnecessary pages). Rules that generate alerts for humans should be simple to understand and represent a clear failure.</p> <p>Paging a human is a quite expensive use of an employee's time. When meaningless pages occur too frequently, employees second-guess, skim, or even ignore incoming alerts. Outages can be prolonged because other noise interferes with a rapid diagnosis and fix.</p> <p>Every page should be about a novel problem and actionable and require intelligence. Someone should find and eliminate the root causes of the problem.</p> <p>Pages with rote, algorithmic responses should be a red flag. Unwillingness on the part of your team to automate such pages implies that the team lacks confidence that they can clean up their technical debt (i.e. put in quick short term fixes to automate the page response, but plan for a long term fix). This is a major problem worth escalating.</p> <h4 id=symptoms-vs-causes>Symptoms vs. Causes<a class=headerlink href=#symptoms-vs-causes title="Permanent link">&para;</a></h4> <p>Your monitoring system should address two questions: what’s broken, and why?</p> <p>For example, high 5xxs maps to a part of service is down or behaving unexpectedly; high latency maps to one of overloaded server, low network bandwidth, or packet loss; users in a region seeing service interruptions maps to blocked traffic or a network partition; private content made public maps to missing ACLs in configurations.</p> <p>Black-box monitoring is symptom-oriented and represents active problems. White-box monitoring depends on the ability to inspect the innards of the system with instrumentation and allows detection of imminent problems such as failures masked by retries.</p> <p>If web servers seem slow on database-heavy requests, you need to know both how fast the web server perceives the database to be, and how fast the database believes itself to be. Otherwise, you can’t distinguish an actually slow database server from a network problem between your web server and your database.</p> <p>The four golden signals of monitoring:</p> <ul> <li>Latency - time it takes to service a request, and distinguish between successful and failed requests</li> <li>Traffic - service demand on the system, such as high level requests per second broken down by nature of request</li> <li>Errors - rate of requests that fail explicitly, implicitly (succeed but delivers wrong content), or by policy (rate limit policy)</li> <li>Saturation - how "full" the service is serving from its capacity.<ul> <li>many systems degrade in performance before they achieve 100% utilization, utilization target should be set appropriately below 100%</li> <li>saturation is also concerned with predictions of impending saturation, i.e. at current rate, the disk will fill in about 4 hours.</li> </ul> </li> </ul> <p>The simplest way to differentiate between a slow average and a very slow "tail" of requests is to collect request counts bucketed by latencies (rendering a histogram). Distributing the histogram boundaries approximately exponentially.</p> <h4 id=monitoring-resolutions>Monitoring Resolutions<a class=headerlink href=#monitoring-resolutions title="Permanent link">&para;</a></h4> <p>Different aspects of a system should be measured with different levels of granularity. Very frequent measurements may be very expensive to collect, store, and analyze. As an example for an alternative way for high-granularity metric data:</p> <ul> <li>record the metric value each second</li> <li>use buckets of 5% granularity, increment the appropriate metric bucket each second</li> <li>aggregate those values every minute</li> </ul> <p>This strategy allows observing brief CPU hotspots without incurring very high cost due to collection and retention.</p> <p>Design your monitoring system with an eye toward simplicity:</p> <ul> <li>rules for alerting for incidents should be as simple, predictable, and reliable as possible</li> <li>data collection, aggregation, and alerting configuration that is rarely exercised should be up for removal</li> <li>signals that are collected, but not exposed in any prebaked dashboard nor used by any alert, are candidates for removal</li> <li>alerts should be actionable. If some condition is not actionable then they should not be alerts. Add filters to apply non-actionable conditions</li> <li>alerts should reflect its urgenciness and it should be easy to tell if it can wait until working hours for remediation</li> <li>make sure the same cause does not page multiple teams, causing duplicate work. Others can be informed but not paged. Alerts should page the most relevant teams.</li> </ul> <p>In Google’s experience, basic collection and aggregation of metrics, paired with alerting and dashboards, has worked well as a relatively standalone system.</p> <p>It’s better to spend much more effort on catching <strong>symptoms</strong> than <strong>causes</strong>; when it comes to causes, only worry about very definite, very imminent causes.</p> <p>Actionable alerts should result in work to automate the actions or fix real issues. While short-term fix can be acceptable, long-term fix should also be tracked instead of getting forgotten and regression happens. Pages with rote, algorithmic responses should be a red flag.</p> <p>Achieving a successful on-call rotation and product includes choosing to alert on symptoms or imminent real problems, adapting your targets to goals that are actually achievable, and making sure that your monitoring supports rapid diagnosis.</p> <h3 id=automation>Automation<a class=headerlink href=#automation title="Permanent link">&para;</a></h3> <p>Software-based automation is superior to manual operation in most circumstances, although doing automation thoughtlessly can create as many problems as it solves.</p> <h4 id=value-of-automation>Value of automation<a class=headerlink href=#value-of-automation title="Permanent link">&para;</a></h4> <ul> <li>scales with the system</li> <li>consistency in executing procedures and results</li> <li>can evolve into a platform, extensible for more use cases and for profit, and adding monitoring and extract metrics</li> <li>faster than manual work, reduce mean time to repair (MTTR) and time to action</li> <li>massive amount of human time savings</li> </ul> <p>For truly large services, the factors of consistency, quickness, and reliability dominate most conversations about the trade-offs of performing automation.</p> <p>Reliability is the fundamental feature, and autonomous, resilient behavior is one useful way to get that.</p> <h4 id=use-cases>Use cases<a class=headerlink href=#use-cases title="Permanent link">&para;</a></h4> <ul> <li>manage machines user accounts</li> <li>cluster scaling up and down</li> <li>software/hardware installation, provision, or decommission</li> <li>new software version rollout</li> <li>runtime configuration updates</li> <li>runtime dependency updates</li> <li>etc.</li> </ul> <p>A hierarchy of automation classes, taking service failover as an example:</p> <ol> <li>no automation, manual failover that touches multiple places</li> <li>externally maintained specific automation, i.e. a script owned by some SRE engineer to do failover one specific system</li> <li>externally maintained generic automation, a generic tool that can be used to failover any system that is properly onboarded</li> <li>internally maintained specific automation, i.e. a database's own failover mechanism that can be used for failover, but managed by the database owner</li> <li>system that needs no automation, or automatically detects faults and carries out the failover</li> </ol> <p>Automation needs to be careful about relying on implicit "safety" signals or it can make unwanted changes that may potentially harm your system.</p> <h4 id=case-studies>Case studies<a class=headerlink href=#case-studies title="Permanent link">&para;</a></h4> <p><strong>Google Ads SRE - MySQL on Borg</strong>: Borg's infrastructure does frequent restarts and shifting jobs around to optimize resource utilization. MySQL instances gets interrupted a lot on Borg. Quick failover becomes a requirement. The SRE team developed a daemon to automate the failover process and made the system highly available on Borg. It did come with a cost that all MySQL dependencies must implement more failure-handling logic in their code. The win is still obvious in hardware savings (60%), and hands-free maintenance.</p> <p><strong>Cluster Infra SRE - Cluster Turnups</strong>: Setting up new clusters for large services such as BigTable is a long and complex process. Early automation focused on accelerating cluster delivery through scripted SSH steps to distribute packages and initialize services. Flags for fine-tuning configurations get added later on which caused wasted time in spotting misconfigurations causing out-of-memory fails. Prodtests gets introduced to allow unit testing of real-world services to verify the cluster configurations. New bugs found extends the prodtests set. With this it is possible to predict the time for a cluster to go from "network-ready" to "live-traffic-ready".</p> <p>With thousands of shell scripts owned by dozens of teams, reducing the turnup time to one week becomes hard to do, as bugs found by the unit tests takes time to be fixed. Then the idea of "code fixing misconfigurations" arose. So each test is paired with a fix, and each fix is idempotent and safe to resolve; which means teams must be comfortable to run the fix-scans every 15 minute without fearing anything.</p> <p>The flaws in this process are that: 1) the latency between a test -&gt; fix -&gt; another test sometimes introduced flaky tests; 2) not all tests are idempotent and a flaky test with fix may render the system in an inconsistent state; 3) test code dies when they are not in sync with the codebase that it covers</p> <p>Due to some security requirement, the Admin Server becomes a mandate of service teams' workflows. SREs moved from writing shell scripts in their home directories to building peer-reviewed RPC servers with fine-grained ACLs.</p> <p>It becomes clear that the turnup processes had to be owned by the teams that owned the services. A Service-Oriented Architecture is built around the Admin Server: Admin Server to handle cluster turnup/turndown RPCs, while each team would provide the contract (API) that the turnup automation needed, while still being free to change the underlying implementation.</p> <h3 id=release-engineering>Release Engineering<a class=headerlink href=#release-engineering title="Permanent link">&para;</a></h3> <p>Release engineering can be concisely described as building and delivering software. It touches on source code management, compilers, build configuration languages, automated build tools, package managers, and installers. It requires skills from domains: development, configuration management, test integration, system administration, and customer support.</p> <p>At Google. Release engineers work with software engineers (SWEs) in product development and SREs to define all the steps required to release software—from how the software is stored in the source code repository, to build rules for compilation, to how testing, packaging, and deployment are conducted.</p> <p>Release engineers define best practices for using internal tools in order to make sure projects are released using consistent and repeatable methodologies.</p> <p>Teams should budget for release engineering resources at the beginning of the product development cycle. It’s cheaper to put good practices and process in place early, rather than have to retrofit your system later. It is essential that the developers, SREs, and release engineers work together.</p> <h4 id=philosophy>Philosophy<a class=headerlink href=#philosophy title="Permanent link">&para;</a></h4> <p>Release engineering is guided by four major principles:</p> <ul> <li>Self-Service Model<ul> <li>teams must be self-sufficient to achieve high release velocity</li> <li>release processes can be automated</li> <li>invole engineer only when problems arise</li> </ul> </li> <li>High Velocity<ul> <li>frequent releases with fewer changes between versions</li> <li>better testing and troubleshooting, less changes to look through between releases</li> <li>can accumulate builds then pick a version to deploy, or simply "push on green"</li> </ul> </li> <li>Hermetic Builds<ul> <li>build tools must ensure consistency and repeatability</li> <li>build process is self-contained and does not rely on external services outside the build environment</li> </ul> </li> <li>Enforcement of Policies and Procedures<ul> <li>gate operations ensure security and access control<ul> <li>approve merging code changes</li> <li>release process actions selection</li> <li>creating a new release</li> <li>reploying a new release</li> <li>updates build configuration</li> </ul> </li> <li>report what has changed in a release<ul> <li>speeds up troubleshooting</li> </ul> </li> </ul> </li> </ul> <h4 id=ci-cd>CI, CD<a class=headerlink href=#ci-cd title="Permanent link">&para;</a></h4> <p>Goolge's software lifecycle:</p> <ul> <li>Building binaries, define build targets<ul> <li>also saves build date, revision number, and build id for record-keeping</li> </ul> </li> <li>Branching<ul> <li>all code branches off from the main source code tree</li> <li>major projects branch from mainline at a specific revision and never merge from mainline again</li> <li>bug fixes in mainline are cherry-picked into the project branch for inclusion in releases</li> </ul> </li> <li>Testing<ul> <li>mainline runs unit tests at each submitted change</li> <li>create releases at the revision number of last continuous test build that completed all tests</li> <li>release re-run the unit tests and create an audit trail for all tests passed</li> </ul> </li> <li>Packaging<ul> <li>software is distributed via Midas Package Manager (MPM)</li> <li>packaged files along with owners and permissions, named, versioned with unique hash, labeled, and signed for authenticity</li> <li>labels are used to indicate the environment intended for that package, i.e. dev, canary, or production</li> </ul> </li> <li>Rapid<ul> <li>the CI/CD platform. Blueprints configures and defines the build and test targets, rule for deployment, and admin information</li> <li>role-based access control determine who can perform actions on a project</li> <li>compilation and testing occur in parallel and each in their dedicated environments</li> <li>artifacts then gets through system testing and canary deployments</li> <li>each step results are logged, a report is created for what changed since last release</li> </ul> </li> <li>Deployment<ul> <li>for more compicated deployments, Sisyphus kicks in as a general-purpose rollout automation framework</li> <li>Rapid creates a rollout in a long-running Sisyphus job, and pass on the MPM package with the versioned build label</li> <li>rollout can be simple fan out or progressive depending on the service's risk profile</li> </ul> </li> </ul> <h4 id=configuration-management>Configuration Management<a class=headerlink href=#configuration-management title="Permanent link">&para;</a></h4> <p>Although sounds simple, configuration changes are a potential source of instability.</p> <p>Configuration management at Google requires storing configuration in the source code repository and enforcing a strict code review. Here are some strategies:</p> <ul> <li>update configuration at the mainline<ul> <li>decouples binary releases from configuration changes</li> <li>may lead to skew between checked-in version and running version of configuration files</li> </ul> </li> <li>pack configuration files with binary files<ul> <li>built into MPM package</li> <li>simplifies deployment, limits flexibility</li> </ul> </li> <li>pack configuration files as configuration MPMs<ul> <li>dedicated MPM package for configuration files</li> <li>can pair with a binary MPM, both package can be built independently then deployed together within the same release</li> </ul> </li> <li>read configuration from an external store<ul> <li>good for projects that need frequent or dynamically updated configurations</li> </ul> </li> </ul> <h3 id=simplicity>Simplicity<a class=headerlink href=#simplicity title="Permanent link">&para;</a></h3> <p>Changes have a side effect of introducing bugs and instability to the system.</p> <p>A good summary of the SRE approach to managing systems is: "At the end of the day, our job is to keep agility and stability in balance in the system." SREs work to create procedures, practices, and tools that render software more reliable. At the same time, SREs ensure that this work has as little impact on developer agility as possible.</p> <p>Reliable processes tend to actually increase developer agility: rapid, reliable production rollouts make changes in production easier to see. Once a bug surfaces, it takes less time to find and fix that bug.</p> <h4 id=boring-virtue>"Boring" virtue<a class=headerlink href=#boring-virtue title="Permanent link">&para;</a></h4> <p>"Borning" is a desireable property when it comes to software source code. The lack of excitement, suspense, and puzzles, and minimizing accidental complexity helps predictably accomplish the software's business goals.</p> <h4 id=remove-bloat>Remove bloat<a class=headerlink href=#remove-bloat title="Permanent link">&para;</a></h4> <p>When code are bound to delete, delete them, never do commenting them out, or put a flag and hope they can be used at some point later. SRE should promote practices that ensure existing code all serve the essential purpose, routinely removing dead code, and building bloat detection into all levels of testing.</p> <p>Software bloat are the tendency of software to become slower and bigger over time as a result of constant additional features. A smaller project is easier to understand, easier to test, and frequently has fewer defects.</p> <h4 id=minimal-modularity-simple-release>Minimal, Modularity, Simple Release<a class=headerlink href=#minimal-modularity-simple-release title="Permanent link">&para;</a></h4> <p>The ability to make changes to parts of the system in isolation is essential to creating a supportable system. Loose coupling between binaries, or between binaries and configuration, is a simplicity pattern that simultaneously promotes developer agility and system stability.</p> <p>Versioning APIs allows developers to continue to use the version that their system depends upon while they upgrade to a newer version in a safe and considered way. One of the central strengths and design goals of Google’s protocol buffers was to create a wire format that was backward and forward compatible.</p> <p>Writing clear, minimal APIs is an essential aspect of managing simplicity in a software system.</p> <p>Prefer simple releases. It is much easier to measure and understand the impact of a single change rather than a batch of changes released simultaneously.</p> <h2 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Permanent link">&para;</a></h2> <p>Successfully operating a service entails a wide range of activities: developing monitoring systems, planning capacity, responding to incidents, ensuring the root causes of outages are addressed, and so on.</p> <p>A healthy way to operate a service permits self-actualization and takes active control of the direction of the service rather than reactively fights fires.</p> <p>Service Reliability Hierarchy: the elements that go into making a service reliable:</p> <p><img src="https://lh3.googleusercontent.com/3gX2qgys2I-9HnEIvXUA10ed3AILvg5MclnKWBquEkJKP3g5_kD6WR7Ptwp3TwAGla1DuSmHv64MdTtACNLlArFVq7BwbTrTVhigsA=s900"></p> <ul> <li>Monitoring - you want to be aware of problems before your users notice them</li> <li>Incident Response - it is a tool we use to achieve our larger mission and remain in touch with how distributed computing systems actually work and fail</li> <li>Postmortem and RCA - building a blameless postmortem culture is the first step in understanding what went wrong and prevent same issue gets popped up</li> <li>Testing - offer some assurance that our software isn’t making certain classes of errors before it’s released</li> <li>Capacity Planning - how requests are load-balanced and potential overload handled, prevent cascading failures</li> <li>Development - large-scale system design and implementation</li> <li>Product - reliable product launched at scale</li> </ul> <h3 id=practical-alerting>Practical Alerting<a class=headerlink href=#practical-alerting title="Permanent link">&para;</a></h3> <p>Monitoring is the fundamental element to running a stable service. Monitoring a large system is challenging:</p> <ul> <li>the sheer number of components to analyze</li> <li>maintain low maintenance burden on engineers responsible for the system</li> </ul> <h4 id=the-borgmon-story>The Borgmon story<a class=headerlink href=#the-borgmon-story title="Permanent link">&para;</a></h4> <p>Borgmon is the monitoring system for the job scheduling infrasture.</p> <p>It relies on a common data exposition format which allowed mass data collection with low overheads and avoids the costs of subprocess execution and network connection setup. The data is used both for rendering charts and creating alerts. The history of the collected data can be used for alert computation as well.</p> <p>A Borgmon can collect from other Borgmon, so it can build hierarchies that follow the topology of the service, aggregating and summarizing information and discarding some strategically at each level. Some very large services shard below the cluster level into many scraper Borgmon, which in turn feed to the cluster-level Borgmon.</p> <h5 id=app-instrumentation>App instrumentation<a class=headerlink href=#app-instrumentation title="Permanent link">&para;</a></h5> <p>Borgmon used a format to export metrics in plain text as space-separated keys and values, one metric per line.</p> <p>Adding a metric to a program only requires a single declaration in the code where the metric is needed.</p> <p>The decoupling of the variable definition from its use in Borgmon rules requires careful change management, and this trade-off has been offset with proper tools to validate and generate monitoring rules.</p> <p>Borgmon uses service discover to figure out the targets to scrape metric data from. The target list is dynamic whic hallows the monitoring to scale automatically.</p> <p>Additional "synthetic" metrics variables for each target helps detect if the monitored tasks are unavailable.</p> <h5 id=time-series-data-storage>Time-series data storage<a class=headerlink href=#time-series-data-storage title="Permanent link">&para;</a></h5> <p>Borgmon stores all the data in an in-memory database, regularly checkpointed to disk. Data points are of form <code>(timestamp, value)</code>, and stored in chronological lists aka time-series. Each time-series is named by a unique set of labels of form <code>name=value</code>.</p> <p>A time-series is conceptually a one-dimensional matrix of numbers, progressing through time. As you add permutations of labels to this time-series, the matrix becomes multidimensional.</p> <p>In practice, the structure is a fixed-sized block of memory, known as the time-series arena, with a garbage collector that expires the oldest entries once the arena is full. The time interval between the most recent and oldest entries in the arena is the horizon, which indicates how much queryable data is kept in RAM.</p> <p>Periodically, the in-memory state is archived to an external system known as the Time-Series Database (TSDB). Borgmon can query TSDB for older data and, while slower, TSDB is cheaper and larger than a Borgmon’s RAM.</p> <p>Time-series are stored as sequences of numbers and timestamps, which are referred to as vectors. The name of a time-series is a labelset.</p> <p>To make a time-series identifiable, it must have labels:</p> <ul> <li>var - name of the variable/metric</li> <li>job - type of server being monitored</li> <li>service - collection of jobs that provide a service to users</li> <li>zone - datacenter location/region</li> </ul> <p>Together these label variables appear like this <code>{var=http_requests,job=webserver,instance=host0:80,service=web,zone=us-west}[10m]</code> called variable expression. A search for a labelset returns all matching time-series in a vector and does not require all labels to be specified. A duration can be specified to limit the range of data to query from.</p> <h5 id=rules>Rules<a class=headerlink href=#rules title="Permanent link">&para;</a></h5> <p>Borgmon rules consists of simple algebraic expressions that compute time-series from other time-series. Rules run in a parallel threadpool where possible.</p> <p>Borgmon rules create new time-series, so the results of the computations are kept in the time-series arena and can be inspected just as the source time-series are. The ability to do so allows for ad hoc querying, evaluation, and exploration as tables or charts.</p> <p>Aggregation is the cornerstone of rule evaluation in a distributed environment. A counter is any monotonically non-decreasing variable. Gauges may take any value they like.</p> <h5 id=alerting>Alerting<a class=headerlink href=#alerting title="Permanent link">&para;</a></h5> <p>When an alerting rule is evaluated by a Borgmon, the result is either true, in which case the alert is triggered, or false. Alerts sometimes toggle their state quickly, thus the rules allow a minimum duration (at least two rule evalutation cycles) for which the alerting rule must be true before the alert is sent.</p> <p>The alert rule allows templating for filling out a message template with contextual information when the alert fires and sent to alerting RPC.</p> <p>Alerts get first sent as "triggering" and then as "firing". The Alertmanager is responsible for routing the alert notification to the correct destination, and alerts will be dedupted, snoozed, or fan out/in base on the labelsets.</p> <h5 id=sharding-monitoring>Sharding Monitoring<a class=headerlink href=#sharding-monitoring title="Permanent link">&para;</a></h5> <p>A Borgmon can import time-series data from other Borgmon. To avoid scaling bottlenecks, a streaming protocol is used to transmit time-series data between Borgmon. Such deployment uses two or more global Borgmon for top-level aggregation and one Borgmon in each datacenter to monitor all the jobs running at that location.</p> <p>Upper-tier Borgmon can filter the data they want to stream from the lower-tier Borgmon, so that the global Borgmon does not fill its arena with all the per-task time-series from the lower tiers. Thus, the aggregation hierarchy builds local caches of relevant time-series that can be drilled down into when required.</p> <p><img src="https://lh3.googleusercontent.com/tfvoHGTMSiwTrPQTYsnvWP-8mpGaAh6P1A20TXwol1lmaXOFvj3-Ne0J86jnuqfQlrIC-U9N2u5qrcp6rr4LeZk1LkQkK9MwYJPVqWs=s900"></p> <h5 id=black-box-monitoring>Black-box monitoring<a class=headerlink href=#black-box-monitoring title="Permanent link">&para;</a></h5> <p>Borgmon is a white-box monitoring system—it inspects the internal state of the target service, and the rules are written with knowledge of the internals in mind.</p> <p>Prober is used to run a protocol check against a target and reports success or failure. Prober can also validate the response payload of the protocol to verify that the contents are expected, and even extract and export values as time-series. The prober can send alerts directly to Alertmanager, or its own varz can be collected by a Borgmon.</p> <p>Teams often use Prober to export histograms of response times by operation type and payload size so that they can slice and dice the user-visible performance. Prober is a hybrid of the check-and-test model with some richer variable extraction to create time-series.</p> <p>Prober can be pointed at either the frontend domain or behind the load balancer to know that traffic is still served when a datacenter fails, or to quickly isolate an edge in the traffic flow graph where a failure has occurred.</p> <h5 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">&para;</a></h5> <p>Borgmon configuration separates the definition of the rules from the targets being monitored. The same sets of rules can be applied to many targets at once, instead of writing nearly identical configuration over and over.</p> <p>Borgmon also supports language templates to reduce repetition and promote rules reuse.</p> <p>Borgmon adds labels indicating the target’s breakdown (data type), instance name (source of data), and the shard and datacenter (locality or aggregation) it occupies, which can be used to group and aggregate those time-series together.</p> <p>The templated nature of these libraries allows flexibility in their use. The same template can be used to aggregate from each tier.</p> <h4 id=borgmon-of-ten-years>Borgmon of Ten Years<a class=headerlink href=#borgmon-of-ten-years title="Permanent link">&para;</a></h4> <p>Borgmon transposed the model of check-and-alert per target into mass variable collection and a centralized rule evaluation across the time-series for alerting and diagnostics. This decoupling allows the size of the system being monitored to scale independently of the size of alerting rules.</p> <p>New applications come ready with metric exports in all components and libraries to which they link, and well-traveled aggregation and console templates, which further reduces the burden of implementation.</p> <p>Ensuring that the cost of maintenance scales sublinearly with the size of the service is key to making monitoring (and all sustaining operations work) maintainable. This theme recurs in all SRE work, as SREs work to scale all aspects of their work to the global scale.</p> <p>The idea of treating time-series data as a data source for generating alerts is now accessible to everyone through those open source tools like Prometheus, Riemann, Heka, and Bosun.</p> <h3 id=on-calls>On-Calls<a class=headerlink href=#on-calls title="Permanent link">&para;</a></h3> <p>Historically, On-calls in IT context are performed by dedicated Ops teams tasked with the primary responsibility of keeping the service(s) for which they are responsible in good health.</p> <p>The SRE teams are quite different from purely operational teams in that they place heavy emphasis on the use of engineering to approach problems that exist at a scale and would be intractable without software engineering solutions.</p> <h4 id=duty>Duty<a class=headerlink href=#duty title="Permanent link">&para;</a></h4> <p>When on-call, an engineer is available to triage the problem and perform operations on production systems possibly involving other team members and escalating as needed, within minutes. Typical values are 5 minutes for user-facing or otherwise highly time-critical services, and 30 minutes for less time-sensitive systems, depending on a service's SLO.</p> <p>Nonpaging production events, such as lower priority alerts or software releases, can also be handled and/or vetted by the on-call engineer during business hours.</p> <p>Many teams have both a primary and a secondary on-call rotation to serve as a fall-through for the pages. It is also common for two related teams to serve as secondary on-call for each other, with fall-through handling duties, rather than keeping a dedicated secondary rotation.</p> <h4 id=balance>Balance<a class=headerlink href=#balance title="Permanent link">&para;</a></h4> <p>The quantity of on-call can be calculated by the percent of time spent by engineers on on-call duties. The quality of on-call can be calculated by the number of incidents that occur during an on-call shift.</p> <p>Google strive to invest at least 50% of SRE time into engineering: of the remainder, no more than 25% can be spent on-call, leaving up to another 25% on other types of operational, nonproject work.</p> <p>Using the 25% rule to derive the minimum number of SREs requried to sustain a 24/7 on-call rotation. Prefer a multi-site team of on-call shifts for these reasons:</p> <ul> <li>a multi-site "follow the sun" rotation allows teams to avoid night shifts altogether</li> <li>limiting the number of engineers in the on-call rotation ensures that engineers do not lose touch with the production systems</li> </ul> <p>For each on-call shift, an engineer should have sufficient time to deal with any incidents and follow-up activities such as writing postmortems.</p> <h4 id=feeling-safe>Feeling Safe<a class=headerlink href=#feeling-safe title="Permanent link">&para;</a></h4> <p>It’s important that on-call SREs understand that they can rely on several resources that make the experience of being on-call less daunting than it may seem. The most important on-call resources are:</p> <ul> <li>Clear escalation paths</li> <li>Well-defined incident-management procedures</li> <li>A blameless postmortem culture</li> </ul> <p>Look into adopting a formal incident-management protocol that offers an easy-to-follow and well-defined set of steps that aid an on-call engineer to rationally pursue a satisfactory incident resolution with all the required help.</p> <p>Build or adopt tools that automates most of the incident management actions, so the on-call engineer can focus on dealing with the incident, rather than spending time and cognitive effort on mundane actions such as formatting emails or updating several communication channels at once.</p> <p>When an incident occurs, it’s important to evaluate what went wrong, recognize what went well, and take action to prevent the same errors from recurring in the future. SRE teams must write postmortems after significant incidents and detail a full timeline of the events that occurred.</p> <p>Mistakes happen, and software should make sure that we make as few mistakes as possible. Recognizing automation opportunities is one of the best ways to prevent human errors.</p> <h4 id=avoid-overload>Avoid Overload<a class=headerlink href=#avoid-overload title="Permanent link">&para;</a></h4> <p>The SRE team and leadership are responsible for including concrete objectives in quarterly work planning in order to make sure that the workload returns to sustainable levels.</p> <p>Misconfigured monitoring is a common cause of operational overload. Paging alerts should be aligned with the symptoms that threaten a service’s SLOs. All paging alerts should also be actionable. Low-priority alerts that bother the on-call engineer every hour (or more frequently) disrupt productivity, and the fatigue such alerts induce can also cause serious alerts to be treated with less attention than necessary.</p> <p>It is also important to control the number of alerts that the on-call engineers receive for a single incident, regulate the alert fan-out by ensuring that related alerts are grouped together by the monitoring or alerting system. Noisy alerts that systematically generate more than one alert per incident should be tweaked to approach a 1:1 alert/incident ratio.</p> <p>In extreme cases, SRE teams may have the option to "give back the pager"—SRE can ask the developer team to be exclusively on-call for the system until it meets the standards of the SRE team in question. It is appropriate to negotiate the reorganization of on-call responsibilities with the development team, possibly routing some or all paging alerts to the developer on-call.</p> <h4 id=avoid-underload>Avoid Underload<a class=headerlink href=#avoid-underload title="Permanent link">&para;</a></h4> <p>When SREs are not on-call often enough, they start losing confidence in operations touching the production, and creating knowledge gaps.</p> <p>SRE teams should be sized to allow every engineer to be on-call at least once or twice a quarter, thus ensuring that each team member is sufficiently exposed to production.</p> <p>Regular trainings and exercises should also be conducted to help improve troubleshooting skills and knowledge of the services.</p> <h3 id=effective-troubleshooting>Effective Troubleshooting<a class=headerlink href=#effective-troubleshooting title="Permanent link">&para;</a></h3> <blockquote> <p>Be warned that being an expert is more than understanding how a system is supposed to work. Expertise is gained by investigating why a system doesn't work.</p> </blockquote> <p>While you can investigate a problem using only the generic process and derivation from first principles, it is less efficient and less effective than understanding how things are supposed to work.</p> <h4 id=theory>Theory<a class=headerlink href=#theory title="Permanent link">&para;</a></h4> <p>Think of the troubleshooting process as an application of the hypothetico-deductive method: given a set of observations about a system and a theoretical basis for understanding system behavior, we iteratively hypothesize potential causes for the failure and try to test those hypotheses.</p> <p>We’d start with a problem report telling us that something is wrong with the system. Then we can look at the system’s telemetry and logs to understand its current state. This information, combined with our knowledge of how the system is built, how it should operate, and its failure modes, enables us to identify some possible causes.</p> <p><img src="https://lh3.googleusercontent.com/c7gwlSuqwgJcWvlzTAK9z4sN5Qm7OWmyXv1_ImvJSURPsljkIjCflKkb2ZRF_8GFONLpTv8R2DWGELQYJBKxL7DywP8iE59Mk6GR=s893"></p> <h4 id=avoid-pitfalls>Avoid Pitfalls<a class=headerlink href=#avoid-pitfalls title="Permanent link">&para;</a></h4> <p>The following are common pitfalls to avoid:</p> <ul> <li>Looking at symptoms that aren’t relevant or misunderstanding the meaning of system metrics</li> <li>Misunderstanding how to change the system, its inputs, or its environment, so as to safely and effectively test hypotheses</li> <li>Coming up with wildly improbable theories about what’s wrong, or latching on to causes of past problems, reasoning that since it happened once, it must be happening again</li> <li>Hunting down spurious correlations that are actually coincidences or are correlated with shared causes</li> </ul> <p>Understanding failures in our reasoning process is the first step to avoiding them and becoming more effective in solving problems. A methodical approach to knowing what we do know, what we don’t know, and what we need to know, makes it simpler and more straightforward to figure out what’s gone wrong and how to fix it.</p> <h4 id=in-practice>In Practice<a class=headerlink href=#in-practice title="Permanent link">&para;</a></h4> <h5 id=problem-report>Problem Report<a class=headerlink href=#problem-report title="Permanent link">&para;</a></h5> <p>An effective problem report should tell you the expected behavior, the actual behavior, and, if possible, how to reproduce the behavior. Ideally, the reports should have a consistent form and be stored in a searchable location.</p> <p>It’s common practice at Google to open a bug for every issue, even those received via email or instant messaging. Doing so creates a log of investigation and remediation activities that can be referenced in the future.</p> <p>Discourage reporting problems directly to a person, which introduces an additional step of transcribing the report into a bug, produces lower-quality reports that aren’t visible to other members of the team, and tends to concentrate the problem-solving load on a handful of team members that the reporters happen to know, rather than the person currently on duty.</p> <h5 id=triage>Triage<a class=headerlink href=#triage title="Permanent link">&para;</a></h5> <p>Problems can vary in severity: an issue might affect only one user under very specific circumstances, or it might entail a complete global outage for a service. Your response should be appropriate for the problem’s impact and your course of action should be to make the system work as well as it can under the circumstances.</p> <p>For example, if a bug is leading to possibly unrecoverable data corruption, freezing the system to prevent further failure may be better than letting this behavior continue.</p> <h5 id=examine>Examine<a class=headerlink href=#examine title="Permanent link">&para;</a></h5> <p>Graphing time-series and operations on time-series can be an effective way to understand the behavior of specific pieces of a system and find correlations that might suggest where problems began.</p> <p>Logging and exporting information about each operation and about system state makes it possible to understand exactly what a process was doing at a given point in time.</p> <p>Text logs are very helpful for reactive debugging in real time, while storing logs in a structured binary format can make it possible to build tools to conduct retrospective analysis with much more information.</p> <p>It’s really useful to have multiple verbosity levels available, along with a way to increase these levels on the fly. This functionality enables you to examine any or all operations in incredible detail without having to restart your process, while still allowing you to dial back the verbosity levels when your service is operating normally.</p> <p>Exposing current state is the third trick. Google servers have endpoints that show a sample of RPCs recently sent or received, to help understand how any one server is communicating with others without referencing an architecture diagram. These endpoints also show histograms of error rates and latency for each type of RPC, their current configuration or allow examination of their data.</p> <p>Lastly, you may even need to instrument a client to experiment with, in order to discover what a component is returning in response to requests.</p> <h5 id=diagnose>Diagnose<a class=headerlink href=#diagnose title="Permanent link">&para;</a></h5> <p>Ideally, components in a system have well-defined interfaces and perform known transformations from their input to their output. It's then possible to look at the data flows between components to determine whether a given component is working properly.</p> <p>Injecting known test data in order to check that the resulting output is expected at each step can be especially effective (a form of black-box testing).</p> <p>Dividing and conquering is a very useful general-purpose solution technique. An alternative, bisection, splits the system in half and examines the communication paths between components on one side and the other.</p> <p>Finding out what a malfunctioning system is doing (symptom), then asking why (cause of symptom) it’s doing that and where (locate the code) its resources are being used or where its output is going can help you understand how things have gone wrong and forge a solution.</p> <p>A working computer system tends to remain in motion until acted upon by an external force, such as a configuration change or a shift in the type of load served. Recent changes to a system can be a productive place to start identifying what’s going wrong.</p> <p>Correlating changes in a system’s performance and behavior with other events in the system and environment can also be helpful in constructing monitoring dashboards, i.e. annotate a graph showing the system’s error rates with the start and end times of a deployment of a new version.</p> <h5 id=test-and-treat>Test and Treat<a class=headerlink href=#test-and-treat title="Permanent link">&para;</a></h5> <p>Using the experimental method, we can try to rule in or rule out our hypothetic list of possible causes. Following the code and trying to imitate the code flow, step-by-step, may point to exactly what’s going wrong.</p> <p>Consider these when designing tests:</p> <ul> <li>a test should have mutually exclusive alternatives, so that it can rule one group of hypotheses in and rule another set out</li> <li>obvious first: perform the tests in decreasing order of likelihood</li> <li>an experiment may provide misleading results due to confounding factors<ul> <li>i.e. firewall rules against your workstation but not for the application server</li> </ul> </li> <li>side effects that change future test results<ul> <li>if you performed active testing by changing a system—for instance by giving more resources to a process—making changes in a systematic and documented fashion will help you return the system to its pre-test setup</li> </ul> </li> <li>tests can be suggestive rather than definitive<ul> <li>i.e. it can be very difficult to make race conditions or deadlocks happen in a timely and reproducible manner</li> </ul> </li> </ul> <h4 id=negative-results>Negative Results<a class=headerlink href=#negative-results title="Permanent link">&para;</a></h4> <p>Negative results should not be ignored or discounted. Realizing you’re wrong has much value: a clear negative result can resolve some of the hardest design questions. Often a team has two seemingly reasonable designs but progress in one direction has to address vague and speculative questions about whether the other direction might be better.</p> <p>Experiments with negative results are conclusive. They tell us something certain about production, or the design space, or the performance limits of an existing system. They can help others determine whether their own experiments or designs are worthwhile. Microbenchmarks, documented antipatterns, and project postmortems all fit this category.</p> <p>Tools and methods can outlive the experiment and inform future work. As an example, benchmarking tools and load generators can result just as easily from a disconfirming experiment as a supporting one.</p> <p>Publishing negative results improves our industry’s data-driven culture. Accounting for negative results and statistical insignificance reduces the bias in our metrics and provides an example to others of how to maturely accept uncertainty.</p> <h4 id=cure>Cure<a class=headerlink href=#cure title="Permanent link">&para;</a></h4> <p>Often, we can only find probable root cause factors than definitive factor, given that a production system can be complex and reproducing the problem in a live production system may not be an option.</p> <p>Once you’ve found the factors that caused the problem, it’s time to write up notes on what went wrong with the system, how you tracked down the problem, how you fixed the problem, and how to prevent it from happening again (a postmortem).</p> <h3 id=emergency-response>Emergency Response<a class=headerlink href=#emergency-response title="Permanent link">&para;</a></h3> <p>What to Do When Systems Break? Don't panic. If you can’t think of a solution, cast your net farther. Involve more of your teammates, seek help, do whatever you have to do, but do it quickly. The highest priority is to resolve the issue at hand quickly. Oftentimes, the person with the most state is the one whose actions somehow triggered the event. Utilize that person.</p> <p>Keep a History of Outages. History is about learning from everyone’s mistakes. Be thorough, be honest, but most of all, ask hard questions. Look for specific actions that might prevent such an outage from recurring, not just tactically, but also strategically.</p> <p>Hold yourself and others accountable to following up on the specific actions detailed in these postmortems. Doing so will prevent a future outage that’s nearly identical to, and caused by nearly the same triggers as, an outage that has already been documented.</p> <h3 id=managing-incidents>Managing Incidents<a class=headerlink href=#managing-incidents title="Permanent link">&para;</a></h3> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../Leading-without-formal-authority/ class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Leading Without Formal Authority </div> </div> </a> <a href=../../Good-Reads/ class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Good Reads </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.53cc9318.min.js></script> <script src=../../assets/javascripts/bundle.e9c9f54f.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../..",
          features: ['navigation.tabs', 'navigation.instant'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>