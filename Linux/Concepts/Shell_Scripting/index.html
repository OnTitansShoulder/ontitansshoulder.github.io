<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="We are all standing on the shoulders of the giants..."><meta name=author content="Zhongkai Liu"><link rel="shortcut icon" href=../../../assets/favicon.ico><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.2.6"><title>Shell Scripting - Ontitansshoulder</title><link rel=stylesheet href=../../../assets/stylesheets/main.cb6bc1d0.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.39b8e14a.min.css><meta name=theme-color content=#4051b5><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../../css/extra.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#shell-scripting class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../../.. title=Ontitansshoulder class="md-header-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <div class=md-header-nav__topic> <span class=md-ellipsis> Ontitansshoulder </span> </div> <div class=md-header-nav__topic> <span class=md-ellipsis> Shell Scripting </span> </div> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Notes </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=Ontitansshoulder class="md-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Ontitansshoulder </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Notes data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"></span> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Welcome </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-2 type=checkbox id=nav-1-2> <label class=md-nav__link for=nav-1-2> Foundamentals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Foundamentals data-md-level=2> <label class=md-nav__title for=nav-1-2> <span class="md-nav__icon md-icon"></span> Foundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Foundamental/Data_Structures_and_Algos/ class=md-nav__link> Data Structures and Algos </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3 type=checkbox id=nav-1-3> <label class=md-nav__link for=nav-1-3> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=2> <label class=md-nav__title for=nav-1-3> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-1 type=checkbox id=nav-1-3-1> <label class=md-nav__link for=nav-1-3-1> Concepts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Concepts data-md-level=3> <label class=md-nav__title for=nav-1-3-1> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linux_Foundation/ class=md-nav__link> Linux Foundation </a> </li> <li class=md-nav__item> <a href=../Linux_Foundation_System_Admin/ class=md-nav__link> Linux System Administration </a> </li> <li class=md-nav__item> <a href=../Linux_Foundation_Network_Admin/ class=md-nav__link> Linux Network Administration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-2 type=checkbox id=nav-1-3-2> <label class=md-nav__link for=nav-1-3-2> Practical References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Practical References" data-md-level=3> <label class=md-nav__title for=nav-1-3-2> <span class="md-nav__icon md-icon"></span> Practical References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Commands/Freq-Used-Shell-Cmds/ class=md-nav__link> Freq Used Shell Cmds </a> </li> <li class=md-nav__item> <a href=../../Commands/Networking-Shell-Cmds/ class=md-nav__link> Freq Used Network Cmds </a> </li> <li class=md-nav__item> <a href=../../Commands/Text-Manipulating-Cmds/ class=md-nav__link> Text Manipulating Cmds </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-3 type=checkbox id=nav-1-3-3> <label class=md-nav__link for=nav-1-3-3> Tricks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tricks data-md-level=3> <label class=md-nav__title for=nav-1-3-3> <span class="md-nav__icon md-icon"></span> Tricks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../References/Freq-Tasks/ class=md-nav__link> Freq Linux Tasks </a> </li> <li class=md-nav__item> <a href=../../References/Terminal-Tricks/ class=md-nav__link> Linux Terminal Tricks </a> </li> <li class=md-nav__item> <a href=../../References/Vim-Tricks/ class=md-nav__link> Vim Tricks </a> </li> <li class=md-nav__item> <a href=../../References/Account-Administration/ class=md-nav__link> Manage Accounts & Groups </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-4 type=checkbox id=nav-1-4> <label class=md-nav__link for=nav-1-4> Cloud <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Cloud data-md-level=2> <label class=md-nav__title for=nav-1-4> <span class="md-nav__icon md-icon"></span> Cloud </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Architecture/Cloud-App-Architecture/ class=md-nav__link> Cloud App Architecture </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Docker/Docker/ class=md-nav__link> Docker and Containers </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Docker/Docker-Practical/ class=md-nav__link> Docker Practical </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/k8s/K8s-Knowledge/ class=md-nav__link> K8s Knowledge </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/k8s/service_mesh/ class=md-nav__link> Service Mesh </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5 type=checkbox id=nav-1-5> <label class=md-nav__link for=nav-1-5> Monitoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Monitoring data-md-level=2> <label class=md-nav__title for=nav-1-5> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5-1 type=checkbox id=nav-1-5-1> <label class=md-nav__link for=nav-1-5-1> Splunk <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Splunk data-md-level=3> <label class=md-nav__title for=nav-1-5-1> <span class="md-nav__icon md-icon"></span> Splunk </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Dev-Tools-Reference/Splunk/Splunk-References/ class=md-nav__link> Splunk Knowledge </a> </li> <li class=md-nav__item> <a href=../../../Dev-Tools-Reference/Splunk/Splunk-Dashboarding/ class=md-nav__link> Splunk Dashboarding </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6 type=checkbox id=nav-1-6> <label class=md-nav__link for=nav-1-6> Programming Langs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Programming Langs" data-md-level=2> <label class=md-nav__title for=nav-1-6> <span class="md-nav__icon md-icon"></span> Programming Langs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-1 type=checkbox id=nav-1-6-1> <label class=md-nav__link for=nav-1-6-1> Golang <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Golang data-md-level=3> <label class=md-nav__title for=nav-1-6-1> <span class="md-nav__icon md-icon"></span> Golang </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Golang/Golang-Specs/ class=md-nav__link> Golang Language Reference </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Golang/Best-Practices/ class=md-nav__link> Effective Go </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Golang/Freq-Used-Libs/ class=md-nav__link> Go libraries and examples </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-2 type=checkbox id=nav-1-6-2> <label class=md-nav__link for=nav-1-6-2> Java <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Java data-md-level=3> <label class=md-nav__title for=nav-1-6-2> <span class="md-nav__icon md-icon"></span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Style-Guide/ class=md-nav__link> Style Guide </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Best-Practices/ class=md-nav__link> Effective Java </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Design-Patterns/ class=md-nav__link> Java Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Testing-Design-Patterns/ class=md-nav__link> Testing Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Java_Std_Lib_Cheatsheet/ class=md-nav__link> Java Std Lib Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-3 type=checkbox id=nav-1-6-3> <label class=md-nav__link for=nav-1-6-3> C++ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=C++ data-md-level=3> <label class=md-nav__title for=nav-1-6-3> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/CPP/CPlusPlus_Lang_Specs/ class=md-nav__link> C++ Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-4 type=checkbox id=nav-1-6-4> <label class=md-nav__link for=nav-1-6-4> Perl <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Perl data-md-level=3> <label class=md-nav__title for=nav-1-6-4> <span class="md-nav__icon md-icon"></span> Perl </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Perl/Perl-Lang-Specs/ class=md-nav__link> Perl Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-5 type=checkbox id=nav-1-6-5> <label class=md-nav__link for=nav-1-6-5> Shell <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Shell data-md-level=3> <label class=md-nav__title for=nav-1-6-5> <span class="md-nav__icon md-icon"></span> Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Shell/Shell-Scripting/ class=md-nav__link> Shell Scripting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Github-Markdown/ class=md-nav__link> Github Markdown Guide </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Regex-Specs/ class=md-nav__link> Regex Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-7 type=checkbox id=nav-1-7> <label class=md-nav__link for=nav-1-7> Reading Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reading Notes" data-md-level=2> <label class=md-nav__title for=nav-1-7> <span class="md-nav__icon md-icon"></span> Reading Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Reading-Notes/How-Netflix-Works/ class=md-nav__link> How Netflix Works </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/System-Design-Concepts/ class=md-nav__link> System Design Guide </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Why-Latency-Matters/ class=md-nav__link> Why Latency Matters </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/DevOps_SRE/ class=md-nav__link> Intro to DevOps and SRE </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Leading-without-formal-authority/ class=md-nav__link> Leading Without Formal Authority </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Google-SRE-Book/ class=md-nav__link> Google SRE Book </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Good-Reads/ class=md-nav__link> Good Reads </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#shell-scripting class=md-nav__link> Shell Scripting </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>Shell Scripting</h1> <h2 id=shell-scripting>Shell Scripting<a class=headerlink href=#shell-scripting title="Permanent link">&para;</a></h2> <p><strong>Advantages</strong> of shell scripting:</p> <ul> <li>automate tasks and reduce risk of errors</li> <li>combine long and repetitive sequences of commands into a single command</li> <li>share procedures among several users</li> <li>provide controlled interface to users</li> <li>create new commands using combination of utilities and logic</li> <li>quick prototyping, no compilation</li> </ul> <p>The <strong>first line</strong> of a shell script, which starts with <code>#!</code>, contains the full path of the <strong>command interpreter</strong>. Commonly used script interpreters:</p> <ul> <li>/usr/bin/perl</li> <li>/bin/sh, include its varieties:<ul> <li>/bin/bash</li> <li>/bin/csh</li> <li>/bin/tcsh</li> <li>/bin/ksh</li> <li>/bin/zsh</li> </ul> </li> <li>/usr/bin/python</li> </ul> <p>A shell script can be started with <code>bash</code>, or <code>./script_name</code> or <code>full_path_to_script</code> when the user executing it has the priviledge to execute it.</p> <p>Basic syntax and special characters:</p> <table> <thead> <tr> <th>Character</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>#</code></td> <td>Used to add a comment, except when used as #, or as #! when starting a script</td> </tr> <tr> <td><code>\</code></td> <td>Used at the end of a line to indicate continuation on to the next line</td> </tr> <tr> <td><code>;</code></td> <td>Used to interpret what follows as a new command to be executed next</td> </tr> <tr> <td><code>$</code></td> <td>Indicates what follows is an environment variable</td> </tr> <tr> <td><code>&gt;</code></td> <td>Redirect output</td> </tr> <tr> <td><code>&gt;&gt;</code></td> <td>Append output</td> </tr> <tr> <td><code>&lt;</code></td> <td>Redirect input</td> </tr> <tr> <td><code>|</code></td> <td>Used to pipe the result into the next command</td> </tr> </tbody> </table> <p>All shell scripts generate a <strong>return value</strong> (stored in <code>$?</code> shell variable) upon finishing execution, which can be explicitly set with the <code>exit</code> statement. Return values permit a process to monitor the exit state of another process to take actions for different scenarios.</p> <p>Use the concatenation operator <code>\</code> (the backslash character) to split long commands over <strong>multiple lines</strong>, but still executed as one command.</p> <p>The <code>;</code> (semicolon) character is used to separate commands and execute them <strong>sequentially</strong> regardless the return value of each command. If subsequent commands run only when <strong>previous command succeeds</strong> (return value 0), use the <code>&amp;&amp;</code> (and) operator to chain the commands. The <code>||</code> (or) runs a chain of commands until one succeeds (return value 0).</p> <p><strong>Chaining commands</strong> is noNOTt the same as piping them; with piped commands, succeeding commands begin operating on data streams produced by earlier ones before they complete, while in chaining each step exits before the next one starts.</p> <p>Shell scripts always have access to applications such as <code>rm, ls, df, vi, gzip</code> (aka <strong>shell built-ins</strong> full list can be viewed by <code>help</code> command), which are programs compiled from lower level programming languages such as <code>C</code>. Other compiled applications are binary executable files residing in <code>/usr/bin</code>.</p> <p>Within a script, the parameter or an argument is represented with a <code>$</code> and a <strong>number</strong> or <strong>special character</strong>. <code>$0</code> is the script name; <code>$1 $2 ...</code> is the first, second, ... argument; <code>$*</code> has all arguments; <code>$#</code> has number of arguments.</p> <p>You may need to <strong>substitute the result of a command</strong> as a portion of another command, using <code>$()</code> or within backticks <code>(`)</code> so that the specified command will be executed in a newly launched shell environment, and the <strong>standard output</strong> of the shell will be inserted where the command substitution is done.</p> <p>Get a list of environment variables with the <code>env, set, printenv</code> commands. By default, the variables created within a script are available only to the <strong>subsequent steps</strong> of that script.</p> <p>Any <strong>child processes</strong> (sub-shells) do NOT have automatic access to the values of these variables; to make them available, <code>export</code> the variables. Typing <code>export</code> with no arguments will give a list of all currently exported environment variables.</p> <p>A <strong>function</strong> is a code block that implements a set of operations. Functions are useful for executing procedures multiple times, perhaps with varying input variables (the first argument can be referred to as $1, the second as $2, and so on).</p> <div class=highlight><pre><span></span><code>function_name <span class=o>()</span> <span class=o>{</span>
   command...
<span class=o>}</span>
</code></pre></div> <p>The <strong>if statement</strong> takes actions depend on the evaluation of specified conditions. In bash scripts, the <code>condition</code> block uses double brackets instead of single brackets (supported by sh), which allows more enhanced conditional syntax.</p> <div class=highlight><pre><span></span><code><span class=k>if</span> condition
<span class=k>then</span>
    statements
<span class=k>elif</span> condition2
    statements
<span class=k>else</span>
    statements
<span class=k>fi</span>

<span class=c1># compact form</span>
<span class=k>if</span> TEST-COMMANDS<span class=p>;</span> <span class=k>then</span> CONSEQUENT-COMMANDS<span class=p>;</span> <span class=k>fi</span>
</code></pre></div> <p>Some condition <strong>operators on files</strong> in this table. Full list of conditions use <code>man 1 test</code>. Boolean expressions operators are no surprise <code>&amp;&amp; || !</code></p> <table> <thead> <tr> <th>Condition</th> <th>Meaning</th> </tr> </thead> <tbody> <tr> <td><code>-e file</code></td> <td>Checks if the file exists.</td> </tr> <tr> <td><code>-d file</code></td> <td>Checks if the file is a directory.</td> </tr> <tr> <td><code>-f file</code></td> <td>Checks if the file is a regular file (i.e. not a symbolic link, device node, directory, etc.)</td> </tr> <tr> <td><code>-s file</code></td> <td>Checks if the file is of non-zero size.</td> </tr> <tr> <td><code>-g file</code></td> <td>Checks if the file has sgid set.</td> </tr> <tr> <td><code>-u file</code></td> <td>Checks if the file has suid set.</td> </tr> <tr> <td><code>-r file</code></td> <td>Checks if the file is readable.</td> </tr> <tr> <td><code>-w file</code></td> <td>Checks if the file is writable.</td> </tr> <tr> <td><code>-x file</code></td> <td>Checks if the file is executable.</td> </tr> </tbody> </table> <p>When <strong>comparing numbers</strong>, use <code>-gt -lt -ge -le -eq -ne</code>; <strong>comparing strings</strong> ue <code>== !=</code> or <code>&gt; &lt;</code> for their sorting order.</p> <p>For <strong>arithmetic</strong> expressions, use <code>$(())</code>, <code>let</code> shell built-in, or <code>expr</code> utility. i.e. <code>X=$(expr $ARG + 8)</code> is same as <code>X=$((ARG + 8))</code> and same as <code>let X=( $ARG + 8 )</code>.</p> <p>A <strong>string</strong> variable contains a sequence of text characters. It can include letters, numbers, symbols and punctuation marks. Access string length with <code>${#VAR_NAME}</code>.</p> <p>To <strong>extract</strong> the first n characters of a string we can specify: <code>${string:0:n}</code>; To extract all characters in a string after a dot (.), use the following expression: <code>${string#*.}</code>, so anything after <code>#*</code> is the pattern we are looking for.</p> <p>The <strong>case statement</strong> is used in scenarios where the actual value of a variable can lead to different execution paths, usually used for handling command-line options. It is readable and easy to compare many values at once.</p> <div class=highlight><pre><span></span><code><span class=k>case</span> expression <span class=k>in</span>
   pattern1 <span class=o>)</span> execute commands<span class=p>;;</span>
   pattern2 <span class=o>)</span> execute commands<span class=p>;;</span>
   pattern3 <span class=o>)</span> execute commands<span class=p>;;</span>
   pattern4 <span class=p>|</span> pattern5 <span class=p>|</span> pattern6 <span class=o>)</span> execute commands<span class=p>;;</span>
   * <span class=o>)</span>       execute some default commands or nothing <span class=p>;;</span>
<span class=k>esac</span>
</code></pre></div> <p>There are three types of <strong>loop constructs</strong>, <code>for, while, until</code>.</p> <div class=highlight><pre><span></span><code><span class=c1># for must operate on each item in a list of items</span>
<span class=k>for</span> variable-name <span class=k>in</span> list <span class=c1># list can be a variable, a command, or hard-coded values separated by space</span>
<span class=k>do</span>
    execute one iteration <span class=k>for</span> each item <span class=k>in</span> the list <span class=k>until</span> the list is finished
<span class=k>done</span>

<span class=c1># while loop goes on as long as condition is evalutated as true</span>
<span class=k>while</span> condition
<span class=k>do</span>
    Commands <span class=k>for</span> execution
    ----
<span class=k>done</span>

<span class=c1># until loop goes on as long as condition is evalutated as false</span>
<span class=k>until</span> condition
<span class=k>do</span>
    Commands <span class=k>for</span> execution
    ----
<span class=k>done</span>
</code></pre></div> <p>A command (without brackets) can be used as <strong>condition</strong> so that its <strong>return value</strong> is evaluated: 0 is true and other values are false.</p> <p><strong>Debugging bash scripts</strong> either by running it with <code>bash -x ./script</code> or bracketing parts of the script code with <code>set -x</code> and <code>set +x</code>. The debug mode traces and prefixes each command with the <code>+</code> character, and prints each command's output.</p> <p><strong>Temporary files</strong> (and directories) are meant to store data for a short time. Usually, one should arrange it so that these files disappear when the program using them terminates.</p> <p>To do so use the <code>mktemp</code> utility. i.e. <code>TEMP=$(mktemp /tmp/tempfile.XXXXXXXX)</code> and for temp dir <code>TEMPDIR=$(mktemp -d /tmp/tempdir.XXXXXXXX)</code>. <code>XXXXXXXX</code> is replaced by mktemp with <strong>random characters</strong> to ensure the name of the temporary file cannot be easily predicted and is only known within your program.</p> <p>It is often useful to generate random numbers and other random data for certain tasks. Such random numbers can be easily generated (from the entropy pool) by using the <code>$RANDOM</code> <strong>environment variable</strong>.</p> <p><code>/dev/random</code> is used where very <strong>high quality randomness</strong> is required, such as one-time pad or key generation, but it is relatively slow to provide values. <code>/dev/urandom</code> reuses the internal pool to produce more <strong>pseudo-random bits</strong>.</p> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.53cc9318.min.js></script> <script src=../../../assets/javascripts/bundle.e9c9f54f.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.tabs', 'navigation.instant'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>