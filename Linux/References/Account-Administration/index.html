<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="We are all standing on the shoulders of the giants..."><meta name=author content="Zhongkai Liu"><link rel="shortcut icon" href=../../../assets/favicon.ico><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.2.6"><title>Manage Accounts & Groups - Ontitansshoulder</title><link rel=stylesheet href=../../../assets/stylesheets/main.cb6bc1d0.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.39b8e14a.min.css><meta name=theme-color content=#4051b5><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../../css/extra.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#login-and-non-login-shell class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../../.. title=Ontitansshoulder class="md-header-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <div class=md-header-nav__topic> <span class=md-ellipsis> Ontitansshoulder </span> </div> <div class=md-header-nav__topic> <span class=md-ellipsis> Manage Accounts & Groups </span> </div> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class="md-tabs__link md-tabs__link--active"> Notes </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=Ontitansshoulder class="md-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Ontitansshoulder </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1 checked> <label class=md-nav__link for=nav-1> Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Notes data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"></span> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Welcome </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-2 type=checkbox id=nav-1-2> <label class=md-nav__link for=nav-1-2> Foundamentals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Foundamentals data-md-level=2> <label class=md-nav__title for=nav-1-2> <span class="md-nav__icon md-icon"></span> Foundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Foundamental/Data_Structures_and_Algos/ class=md-nav__link> Data Structures and Algos </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3 type=checkbox id=nav-1-3 checked> <label class=md-nav__link for=nav-1-3> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=2> <label class=md-nav__title for=nav-1-3> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-1 type=checkbox id=nav-1-3-1> <label class=md-nav__link for=nav-1-3-1> Concepts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Concepts data-md-level=3> <label class=md-nav__title for=nav-1-3-1> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Concepts/Linux_Foundation/ class=md-nav__link> Linux Foundation </a> </li> <li class=md-nav__item> <a href=../../Concepts/Linux_Foundation_System_Admin/ class=md-nav__link> Linux System Administration </a> </li> <li class=md-nav__item> <a href=../../Concepts/Linux_Foundation_Network_Admin/ class=md-nav__link> Linux Network Administration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-2 type=checkbox id=nav-1-3-2> <label class=md-nav__link for=nav-1-3-2> Practical References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Practical References" data-md-level=3> <label class=md-nav__title for=nav-1-3-2> <span class="md-nav__icon md-icon"></span> Practical References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Commands/Freq-Used-Shell-Cmds/ class=md-nav__link> Freq Used Shell Cmds </a> </li> <li class=md-nav__item> <a href=../../Commands/Networking-Shell-Cmds/ class=md-nav__link> Freq Used Network Cmds </a> </li> <li class=md-nav__item> <a href=../../Commands/Text-Manipulating-Cmds/ class=md-nav__link> Text Manipulating Cmds </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-3 type=checkbox id=nav-1-3-3 checked> <label class=md-nav__link for=nav-1-3-3> Tricks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tricks data-md-level=3> <label class=md-nav__title for=nav-1-3-3> <span class="md-nav__icon md-icon"></span> Tricks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Freq-Tasks/ class=md-nav__link> Freq Linux Tasks </a> </li> <li class=md-nav__item> <a href=../Terminal-Tricks/ class=md-nav__link> Linux Terminal Tricks </a> </li> <li class=md-nav__item> <a href=../Vim-Tricks/ class=md-nav__link> Vim Tricks </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Manage Accounts & Groups <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Manage Accounts & Groups </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#login-and-non-login-shell class=md-nav__link> login and non-login shell </a> </li> <li class=md-nav__item> <a href=#user-identification class=md-nav__link> User Identification </a> </li> <li class=md-nav__item> <a href=#groups class=md-nav__link> Groups </a> </li> <li class=md-nav__item> <a href=#user-management class=md-nav__link> User management </a> </li> <li class=md-nav__item> <a href=#group-management class=md-nav__link> Group management </a> </li> <li class=md-nav__item> <a href=#linux-acl-privilege class=md-nav__link> Linux ACL Privilege </a> </li> <li class=md-nav__item> <a href=#sudo class=md-nav__link> sudo </a> </li> <li class=md-nav__item> <a href=#special-shell class=md-nav__link> Special shell </a> <nav class=md-nav aria-label="Special shell"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pam-pluggable-authentication-modules class=md-nav__link> PAM (Pluggable Authentication Modules) </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-4 type=checkbox id=nav-1-4> <label class=md-nav__link for=nav-1-4> Cloud <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Cloud data-md-level=2> <label class=md-nav__title for=nav-1-4> <span class="md-nav__icon md-icon"></span> Cloud </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Architecture/Cloud-App-Architecture/ class=md-nav__link> Cloud App Architecture </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Docker/Docker/ class=md-nav__link> Docker and Containers </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Docker/Docker-Practical/ class=md-nav__link> Docker Practical </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/k8s/K8s-Knowledge/ class=md-nav__link> K8s Knowledge </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/k8s/service_mesh/ class=md-nav__link> Service Mesh </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5 type=checkbox id=nav-1-5> <label class=md-nav__link for=nav-1-5> Monitoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Monitoring data-md-level=2> <label class=md-nav__title for=nav-1-5> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5-1 type=checkbox id=nav-1-5-1> <label class=md-nav__link for=nav-1-5-1> Splunk <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Splunk data-md-level=3> <label class=md-nav__title for=nav-1-5-1> <span class="md-nav__icon md-icon"></span> Splunk </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Dev-Tools-Reference/Splunk/Splunk-References/ class=md-nav__link> Splunk Knowledge </a> </li> <li class=md-nav__item> <a href=../../../Dev-Tools-Reference/Splunk/Splunk-Dashboarding/ class=md-nav__link> Splunk Dashboarding </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6 type=checkbox id=nav-1-6> <label class=md-nav__link for=nav-1-6> Programming Langs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Programming Langs" data-md-level=2> <label class=md-nav__title for=nav-1-6> <span class="md-nav__icon md-icon"></span> Programming Langs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-1 type=checkbox id=nav-1-6-1> <label class=md-nav__link for=nav-1-6-1> Golang <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Golang data-md-level=3> <label class=md-nav__title for=nav-1-6-1> <span class="md-nav__icon md-icon"></span> Golang </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Golang/Golang-Specs/ class=md-nav__link> Golang Language Reference </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Golang/Best-Practices/ class=md-nav__link> Effective Go </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Golang/Freq-Used-Libs/ class=md-nav__link> Go libraries and examples </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-2 type=checkbox id=nav-1-6-2> <label class=md-nav__link for=nav-1-6-2> Java <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Java data-md-level=3> <label class=md-nav__title for=nav-1-6-2> <span class="md-nav__icon md-icon"></span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Style-Guide/ class=md-nav__link> Style Guide </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Best-Practices/ class=md-nav__link> Effective Java </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Design-Patterns/ class=md-nav__link> Java Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Testing-Design-Patterns/ class=md-nav__link> Testing Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Java_Std_Lib_Cheatsheet/ class=md-nav__link> Java Std Lib Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-3 type=checkbox id=nav-1-6-3> <label class=md-nav__link for=nav-1-6-3> C++ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=C++ data-md-level=3> <label class=md-nav__title for=nav-1-6-3> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/CPP/CPlusPlus_Lang_Specs/ class=md-nav__link> C++ Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-4 type=checkbox id=nav-1-6-4> <label class=md-nav__link for=nav-1-6-4> Perl <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Perl data-md-level=3> <label class=md-nav__title for=nav-1-6-4> <span class="md-nav__icon md-icon"></span> Perl </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Perl/Perl-Lang-Specs/ class=md-nav__link> Perl Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-5 type=checkbox id=nav-1-6-5> <label class=md-nav__link for=nav-1-6-5> Shell <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Shell data-md-level=3> <label class=md-nav__title for=nav-1-6-5> <span class="md-nav__icon md-icon"></span> Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Shell/Shell-Scripting/ class=md-nav__link> Shell Scripting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Github-Markdown/ class=md-nav__link> Github Markdown Guide </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Regex-Specs/ class=md-nav__link> Regex Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-7 type=checkbox id=nav-1-7> <label class=md-nav__link for=nav-1-7> Reading Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reading Notes" data-md-level=2> <label class=md-nav__title for=nav-1-7> <span class="md-nav__icon md-icon"></span> Reading Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Reading-Notes/How-Netflix-Works/ class=md-nav__link> How Netflix Works </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/System-Design-Concepts/ class=md-nav__link> System Design Guide </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Why-Latency-Matters/ class=md-nav__link> Why Latency Matters </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/DevOps_SRE/ class=md-nav__link> Intro to DevOps and SRE </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Leading-without-formal-authority/ class=md-nav__link> Leading Without Formal Authority </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Google-SRE-Book/ class=md-nav__link> Google SRE Book </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Good-Reads/ class=md-nav__link> Good Reads </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#login-and-non-login-shell class=md-nav__link> login and non-login shell </a> </li> <li class=md-nav__item> <a href=#user-identification class=md-nav__link> User Identification </a> </li> <li class=md-nav__item> <a href=#groups class=md-nav__link> Groups </a> </li> <li class=md-nav__item> <a href=#user-management class=md-nav__link> User management </a> </li> <li class=md-nav__item> <a href=#group-management class=md-nav__link> Group management </a> </li> <li class=md-nav__item> <a href=#linux-acl-privilege class=md-nav__link> Linux ACL Privilege </a> </li> <li class=md-nav__item> <a href=#sudo class=md-nav__link> sudo </a> </li> <li class=md-nav__item> <a href=#special-shell class=md-nav__link> Special shell </a> <nav class=md-nav aria-label="Special shell"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pam-pluggable-authentication-modules class=md-nav__link> PAM (Pluggable Authentication Modules) </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>Manage Accounts & Groups</h1> <p>This notes covers users accounts on Linux.</p> <p><br></p> <h3 id=login-and-non-login-shell>login and non-login shell<a class=headerlink href=#login-and-non-login-shell title="Permanent link">&para;</a></h3> <ul> <li><strong>login shell</strong> - need to go through login process each time started</li> <li><strong>non-login shell</strong> - no need login, i.e. after you login through X window, your bash assignment required no password again, neither when you initiated bash terminal there.</li> </ul> <p>The two shells read different configuration files</p> <ul> <li>login shell:</li> <li><code>/etc/profile</code>: overall system settings, don't change<ul> <li>vars like <code>PATH, MAIL, USER, HOSTNAME, HISTSIZE</code></li> <li>call other config files, like <code>/etc/inputrc</code>, <code>/etc/profile.d/*.sh</code>, <code>/etc/sysconfig/i18n</code></li> <li><code>~/.bash_profile</code> or <code>~/.bash_login</code> or <code>~/.profile</code>: personal settings</li> </ul> </li> <li>non-login shell:<ul> <li><code>~/.bashrc</code></li> </ul> </li> </ul> <table> <thead> <tr> <th>key_press -</th> <th>- results</th> </tr> </thead> <tbody> <tr> <td><code>ctrl-c</code></td> <td>interrupt</td> </tr> <tr> <td><code>ctrl-d</code></td> <td>enter EOF</td> </tr> <tr> <td><code>ctrl-m</code></td> <td>like enter</td> </tr> <tr> <td><code>ctrl-s</code></td> <td>pulse screen output</td> </tr> <tr> <td><code>ctrl-q</code></td> <td>continue screen output</td> </tr> <tr> <td><code>ctrl-u</code></td> <td>delete a line of command</td> </tr> <tr> <td><code>ctrl-z</code></td> <td>pulse current process</td> </tr> </tbody> </table> <p><br></p> <p><strong>tty</strong></p> <p>use [alt-ctrl-(F1-F6)] to access tty1-6</p> <ul> <li>welcome message at login is in <code>/etc/issue</code></li> <li>welcome message at login for telnet is in <code>/etc/issue.net</code></li> <li>message after login is in <code>/etc/motd</code></li> </ul> <p><br></p> <h3 id=user-identification>User Identification<a class=headerlink href=#user-identification title="Permanent link">&para;</a></h3> <p><strong>UID and GID</strong></p> <p>Linux use UID to identify users. These information are stored in /etc/passwd.</p> <p>Restrictions:</p> <table> <thead> <tr> <th>id range</th> <th>feature</th> </tr> </thead> <tbody> <tr> <td><code>0</code></td> <td>system admin, or root. Other account UID could be changed to 0 to get root access but not recommended</td> </tr> <tr> <td><code>[1, 499]</code></td> <td>system account, reserved to system services, not useable by users to login</td> </tr> <tr> <td><code>[500, 2^23-1]</code></td> <td>for normal users</td> </tr> </tbody> </table> <p><br></p> <p>Similar concept for GID, in <code>/etc/group</code></p> <p>Use <code>id</code> to check some user's UID GID and groups info. <code>id user_name</code></p> <p><strong>Linux Login process</strong></p> <ol> <li>locate account in <code>/etc/passwd</code>, read UID and GID, as well as home directory and shell settings.</li> <li>check password from <code>/etc/shadow</code> by looking up UID</li> <li>password match, login success, control access granted</li> </ol> <p>A line in <code>/etc/passwd</code> looks like <code>root:x:0:0:root:/root:/bin/bash</code> parts are:</p> <ol> <li>Account name</li> <li>Password. Not here anymore, in <code>/etc/shadow</code> instead</li> <li>UID</li> <li>GID</li> <li>User info</li> <li>home directory</li> <li>shell</li> </ol> <p>A line in <code>/etc/shadow</code> looks like <code>root:$1$/30QpE5e$y9N/D0bh6rAACBEz.hqo00:14126:0:99999:7:::</code> parts are:</p> <ol> <li>Account name</li> <li>Password (encrypted)</li> <li>Recent changed date (in number of days from 1970/1/1)</li> <li>Password unchangeable for N days</li> <li>Password required changes in N days</li> <li>Password change remainder N days before due</li> <li>Password expiration tolerance in N days</li> <li>Password expiration date (like 3)</li> <li>reserved</li> </ol> <p><code>passwd</code> can change the password of current user.</p> <p>When <strong>forgot root password</strong></p> <ol> <li>reboot and enter single-user maintenance mode, use <code>passwd</code> to change it.</li> <li>boot from CD, mount <code>/root</code> and change <code>/etc/shadow</code>, delete the password part (next login root requires no password), then login to root use <code>passwd</code> to change it.</li> </ol> <p><br></p> <h3 id=groups>Groups<a class=headerlink href=#groups title="Permanent link">&para;</a></h3> <p>A line in <code>/etc/group</code> looks like <code>root:x:0:root</code> parts are:</p> <ol> <li>Group name</li> <li>Group password (not here anymore, in /etc/gshadow)</li> <li>GID</li> <li>All accounts that joined this group</li> </ol> <p><strong>Effective group and Initial group</strong></p> <ul> <li><strong>initial group</strong>: the group access given upon successful login. 4th column in /etc/passwd</li> <li><strong>effective group</strong>: the group that is under effect now. It can be the group current user belongs to, user can own the group access of the file</li> <li><code>groups</code> shows the groups this user belongs to<ul> <li>the first group output is the effective group</li> <li>use <code>newgrp</code> to switch to other group as effective group (starts a new shell. Need to exit if wish to go back to previous shell)</li> </ul> </li> <li>root can add a user into a group using <code>usermod</code>. It can also be done by the group admin using <code>gpasswd</code></li> </ul> <p><strong>A line in /etc/gshadow</strong> looks like <code>root:::root</code> parts are:</p> <ol> <li>Group name</li> <li>Password</li> <li>Group admin account</li> <li>All accounts joined this group</li> </ol> <p>This file's purpose is to add group admins for each group, for which group admin can help root add user to a group.</p> <p><br></p> <h3 id=user-management>User management<a class=headerlink href=#user-management title="Permanent link">&para;</a></h3> <p><strong>useradd</strong> create a user</p> <ul> <li><code>useradd [-u UID] [-g init_group] [-G secondary_group] [-mM] [-c notes] [-d home_dir_path] [-s shell_path] user_name</code></li> <li>use <code>passwd user_name</code> to change password and add encryption</li> <li>the default values come from /etc/default/useradd, /etc/login.defs, and /etc/skel/*</li> </ul> <p><strong>passwd</strong>, <strong>chage</strong> can both edit user passwords</p> <p><strong>usermod</strong> can change existing account's info, like home directory, password expiration date, freeze account, etc.</p> <ul> <li><code>usermod [-cdegGlsuLU] username</code></li> </ul> <p><strong>userdel</strong> deletes user and all data associated with /etc/passwd, /etc/shadow, /etc/group, /etc/gshadow, etc.</p> <ul> <li><code>userdel [-r] user_name</code> -r means delete home dir as well</li> </ul> <p><strong>finger</strong> lookup user related information.</p> <ul> <li><code>finger [-s] user_name</code></li> <li>use <code>finger</code> by it self will list current users logged in</li> <li>use <strong>chfn</strong> to add more info about a user: <code>chfn [-foph] user_name</code></li> </ul> <p>Forgot to add a home directory after creating a user? Follow this:</p> <div class=highlight><pre><span></span><code>ll -d ~guest <span class=c1># make sure it is not there</span>
cp -a /etc/skel /home/guest
chown -R guest:guest /home/guest
chmod <span class=m>700</span> /home/guest
</code></pre></div> <p><br></p> <h3 id=group-management>Group management<a class=headerlink href=#group-management title="Permanent link">&para;</a></h3> <p><strong>groupadd</strong> add a new group</p> <ul> <li><code>groupadd [-g gid] [-r] group_name</code></li> <li><code>-r</code> setup system group</li> </ul> <p><strong>groupmod</strong> modify a group</p> <ul> <li><code>groupmod [-g gid] [-n new_group_name] group_name</code></li> </ul> <p><strong>groupdel</strong> delete a group</p> <ul> <li><code>groupdel group_name</code></li> </ul> <p><strong>gpasswd</strong> to add a group admin or change a group's password</p> <ul> <li><code>gpasswd [-A user1, ...] [-M user, ...] [-rR] group_name</code></li> <li><code>-A</code> (root) <code>-a</code> (group admin) give users admin privilege</li> <li><code>-d</code> remove users from group admin</li> <li><code>-M</code> add users to this group</li> <li><code>-r</code> remove password</li> <li><code>-R</code> invalidate group password</li> </ul> <p><br></p> <h3 id=linux-acl-privilege>Linux ACL Privilege<a class=headerlink href=#linux-acl-privilege title="Permanent link">&para;</a></h3> <p>ACL stands for Access Control List, applies to individual privileges on top of the traditional owner, group, others access rights.</p> <p>AcCL supports access for single user for single file rwx setting. More on Book P505.</p> <p><br></p> <h3 id=sudo>sudo<a class=headerlink href=#sudo title="Permanent link">&para;</a></h3> <p><code>sudo</code> is a handy command to become root for only executing a command with root's privilege.</p> <p>A user must be added to <code>/etc/sudoers</code> to be able to use <code>sudo</code>. The command to do so is <code>visudo</code>.</p> <p>More on P512 on Book</p> <p><br></p> <h3 id=special-shell>Special shell<a class=headerlink href=#special-shell title="Permanent link">&para;</a></h3> <p><code>/sbin/nologin</code> use this shell to limit the user account to not able to log onto the system shell.</p> <p>i.e. when the user should have only the mail server access.</p> <h4 id=pam-pluggable-authentication-modules>PAM (Pluggable Authentication Modules)<a class=headerlink href=#pam-pluggable-authentication-modules title="Permanent link">&para;</a></h4> <p>Many program uses PAM for password functions</p> <p>Take an example as a call to <code>passwd</code> 1. user exec <code>/usr/bin/passwd</code>, and enter password 2. <code>passwd</code> calls PAM module for verification 3. PAM will check <code>/etc/pam.d</code> and look for passwd configuration 4. based on <code>/etc/pam.d/passwd</code>, use corresponding PAM module to verify 5. return result to <code>passwd</code> 6. <code>passwd</code> decide next action</p> <p><code>/etc/pam.d/passwd</code> What is inside the file:</p> <div class=highlight><pre><span></span><code>auth include system-auth
account include system-auth
password include system-auth
<span class=o>(</span>Type<span class=o>)</span>  <span class=o>(</span>Flag<span class=o>)</span>  <span class=o>(</span>Parameter<span class=o>)</span>
</code></pre></div> <p><em>Type:</em></p> <ul> <li>auth: authentication, check user identification</li> <li>account: authorization, check whether user has specific access</li> <li>session: what env setting available for this session</li> <li>password: change password</li> </ul> <p><em>Control-flag:</em></p> <ul> <li>required: required check, on success/failure still proceed</li> <li>requisite: must be checked success to proceed, otherwise return failure</li> <li>sufficient: final checking step</li> <li>optional: mostly just showing information, not for checking</li> <li>include: call next word for verification <code>password include system-auth</code> means call <code>system-auth</code> instead</li> </ul> <p>See on Book P521</p> <p>PAM can set a disk quota for each user by changing <code>/etc/security/limits.conf</code></p> <div class=highlight><pre><span></span><code>user_name   soft    fsize   <span class=m>90000</span>  <span class=c1># gives warning when reach this much, in KB</span>
user_name   hard    fsize   <span class=m>100000</span> <span class=c1># cannot exceed this</span>
@group_name soft    fsize   <span class=m>100000</span> <span class=c1># limit for groups</span>
</code></pre></div> <p>use <code>ulimit</code> can check usage limits, <code>ulimit -a</code></p> <p><strong>login error logs</strong></p> <p><code>/var/log/secure</code> and <code>/var/log/messages</code> contains logs for users logging into this machine</p> <p><strong>look up usage of a user</strong></p> <p><code>w</code> and <code>who</code> shows users currently logged in</p> <p><code>lastlog</code> shows last login time for each user</p> <p><strong>message or broadcast</strong></p> <p><code>write &lt;user_name&gt;</code> will directly display a message to that user <code>mesg n</code> to disable receiving, <code>mesg y</code> to enable <code>wall "broadcast: message"</code> to let a message show for all users</p> <p><strong>mail</strong></p> <p>use <code>mail</code> to receive/send mails in Linux</p> <div class=highlight><pre><span></span><code>mail username@host -s <span class=s2>&quot;subject&quot;</span>
Hello nice to meet you.
Bye!
. <span class=c1># this dot must be there to finish the draft</span>
</code></pre></div> <p>you can write email in a file first then <code>mail user -s "subject" &lt; filename</code></p> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../Vim-Tricks/ class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Vim Tricks </div> </div> </a> <a href=../../../Cloud-and-Containers/Architecture/Cloud-App-Architecture/ class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Cloud App Architecture </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.53cc9318.min.js></script> <script src=../../../assets/javascripts/bundle.e9c9f54f.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.tabs', 'navigation.instant'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>