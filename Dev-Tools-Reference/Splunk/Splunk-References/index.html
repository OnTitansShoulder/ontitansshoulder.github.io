<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="We are all standing on the shoulders of the giants..."><meta name=author content="Zhongkai Liu"><link rel="shortcut icon" href=../../../assets/favicon.ico><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.2.6"><title>Splunk References - Ontitansshoulder</title><link rel=stylesheet href=../../../assets/stylesheets/main.cb6bc1d0.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.39b8e14a.min.css><meta name=theme-color content=#4051b5><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../../css/extra.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#splunk-brief class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../../.. title=Ontitansshoulder class="md-header-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <div class=md-header-nav__topic> <span class=md-ellipsis> Ontitansshoulder </span> </div> <div class=md-header-nav__topic> <span class=md-ellipsis> Splunk References </span> </div> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class="md-tabs__link md-tabs__link--active"> Notes </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=Ontitansshoulder class="md-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Ontitansshoulder </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1 checked> <label class=md-nav__link for=nav-1> Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Notes data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"></span> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Welcome </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-2 type=checkbox id=nav-1-2> <label class=md-nav__link for=nav-1-2> Foundamentals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Foundamentals data-md-level=2> <label class=md-nav__title for=nav-1-2> <span class="md-nav__icon md-icon"></span> Foundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Foundamental/Data_Structures_and_Algos/ class=md-nav__link> Data Structures and Algos </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3 type=checkbox id=nav-1-3> <label class=md-nav__link for=nav-1-3> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=2> <label class=md-nav__title for=nav-1-3> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-1 type=checkbox id=nav-1-3-1> <label class=md-nav__link for=nav-1-3-1> Concepts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Concepts data-md-level=3> <label class=md-nav__title for=nav-1-3-1> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Concepts/Linux_Foundation/ class=md-nav__link> Linux Foundation </a> </li> <li class=md-nav__item> <a href=../../../Linux/Concepts/Linux_Foundation_System_Admin/ class=md-nav__link> Linux System Administration </a> </li> <li class=md-nav__item> <a href=../../../Linux/Concepts/Linux_Foundation_Network_Admin/ class=md-nav__link> Linux Network Administration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-2 type=checkbox id=nav-1-3-2> <label class=md-nav__link for=nav-1-3-2> Practical References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Practical References" data-md-level=3> <label class=md-nav__title for=nav-1-3-2> <span class="md-nav__icon md-icon"></span> Practical References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Commands/Freq-Used-Shell-Cmds/ class=md-nav__link> Freq Used Shell Cmds </a> </li> <li class=md-nav__item> <a href=../../../Linux/Commands/Networking-Shell-Cmds/ class=md-nav__link> Freq Used Network Cmds </a> </li> <li class=md-nav__item> <a href=../../../Linux/Commands/Text-Manipulating-Cmds/ class=md-nav__link> Text Manipulating Cmds </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-3 type=checkbox id=nav-1-3-3> <label class=md-nav__link for=nav-1-3-3> Tricks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tricks data-md-level=3> <label class=md-nav__title for=nav-1-3-3> <span class="md-nav__icon md-icon"></span> Tricks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/References/Freq-Tasks/ class=md-nav__link> Freq Linux Tasks </a> </li> <li class=md-nav__item> <a href=../../../Linux/References/Terminal-Tricks/ class=md-nav__link> Linux Terminal Tricks </a> </li> <li class=md-nav__item> <a href=../../../Linux/References/Vim-Tricks/ class=md-nav__link> Vim Tricks </a> </li> <li class=md-nav__item> <a href=../../../Linux/References/Account-Administration/ class=md-nav__link> Manage Accounts & Groups </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-4 type=checkbox id=nav-1-4> <label class=md-nav__link for=nav-1-4> Cloud <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Cloud data-md-level=2> <label class=md-nav__title for=nav-1-4> <span class="md-nav__icon md-icon"></span> Cloud </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Architecture/Cloud-App-Architecture/ class=md-nav__link> Cloud App Architecture </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Docker/Docker/ class=md-nav__link> Docker and Containers </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Docker/Docker-Practical/ class=md-nav__link> Docker Practical </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/k8s/K8s-Knowledge/ class=md-nav__link> K8s Knowledge </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/k8s/service_mesh/ class=md-nav__link> Service Mesh </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5 type=checkbox id=nav-1-5 checked> <label class=md-nav__link for=nav-1-5> Monitoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Monitoring data-md-level=2> <label class=md-nav__title for=nav-1-5> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5-1 type=checkbox id=nav-1-5-1 checked> <label class=md-nav__link for=nav-1-5-1> Splunk <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Splunk data-md-level=3> <label class=md-nav__title for=nav-1-5-1> <span class="md-nav__icon md-icon"></span> Splunk </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Splunk Knowledge <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Splunk Knowledge </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#splunk-brief class=md-nav__link> Splunk Brief </a> <nav class=md-nav aria-label="Splunk Brief"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-splunk-is-good-for class=md-nav__link> What Splunk is good for </a> </li> <li class=md-nav__item> <a href=#splunk-modules class=md-nav__link> Splunk Modules </a> </li> <li class=md-nav__item> <a href=#splunk-user-types class=md-nav__link> Splunk User Types </a> </li> <li class=md-nav__item> <a href=#get-data-into-splunk class=md-nav__link> Get Data into Splunk </a> <nav class=md-nav aria-label="Get Data into Splunk"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-data-is-stored class=md-nav__link> How Data is stored </a> <nav class=md-nav aria-label="How Data is stored"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bucketing class=md-nav__link> Bucketing </a> </li> <li class=md-nav__item> <a href=#bloom-filters class=md-nav__link> Bloom Filters </a> </li> <li class=md-nav__item> <a href=#segmentation class=md-nav__link> Segmentation </a> </li> <li class=md-nav__item> <a href=#inside-a-search class=md-nav__link> Inside a Search </a> </li> <li class=md-nav__item> <a href=#inspect-a-search class=md-nav__link> Inspect a Search </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#search-and-report-app class=md-nav__link> Search and Report App </a> <nav class=md-nav aria-label="Search and Report App"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#search-ui class=md-nav__link> Search UI </a> <nav class=md-nav aria-label="Search UI"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#search-fields class=md-nav__link> Search Fields </a> </li> <li class=md-nav__item> <a href=#tags class=md-nav__link> Tags </a> </li> <li class=md-nav__item> <a href=#event-type class=md-nav__link> Event Type </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#knowledge-objects class=md-nav__link> Knowledge Objects </a> <nav class=md-nav aria-label="Knowledge Objects"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#field-extractor class=md-nav__link> Field Extractor </a> </li> <li class=md-nav__item> <a href=#field-aliases class=md-nav__link> Field Aliases </a> </li> <li class=md-nav__item> <a href=#calculated-field class=md-nav__link> Calculated Field </a> </li> <li class=md-nav__item> <a href=#search-macros class=md-nav__link> Search Macros </a> </li> <li class=md-nav__item> <a href=#datasets class=md-nav__link> Datasets </a> <nav class=md-nav aria-label=Datasets> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lookups class=md-nav__link> Lookups </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#pivot class=md-nav__link> Pivot </a> </li> <li class=md-nav__item> <a href=#data-models class=md-nav__link> Data Models </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#splunk-search-language-spl class=md-nav__link> Splunk Search Language (SPL) </a> <nav class=md-nav aria-label="Splunk Search Language (SPL)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#spl-components class=md-nav__link> SPL Components </a> <nav class=md-nav aria-label="SPL Components"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#search-terms class=md-nav__link> Search Terms </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#subsearch class=md-nav__link> Subsearch </a> </li> <li class=md-nav__item> <a href=#spl-commands class=md-nav__link> SPL Commands </a> <nav class=md-nav aria-label="SPL Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#streaming-commands class=md-nav__link> Streaming Commands </a> <nav class=md-nav aria-label="Streaming Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#append class=md-nav__link> append </a> </li> <li class=md-nav__item> <a href=#appendcols class=md-nav__link> appendcols </a> </li> <li class=md-nav__item> <a href=#appendpipe class=md-nav__link> appendpipe </a> </li> <li class=md-nav__item> <a href=#addtotals class=md-nav__link> addtotals </a> </li> <li class=md-nav__item> <a href=#bin class=md-nav__link> bin </a> </li> <li class=md-nav__item> <a href=#dedup class=md-nav__link> dedup </a> </li> <li class=md-nav__item> <a href=#erex class=md-nav__link> erex </a> </li> <li class=md-nav__item> <a href=#eval class=md-nav__link> eval </a> </li> <li class=md-nav__item> <a href=#eventstats class=md-nav__link> eventstats </a> </li> <li class=md-nav__item> <a href=#fieldformat class=md-nav__link> fieldformat </a> </li> <li class=md-nav__item> <a href=#fields class=md-nav__link> fields </a> </li> <li class=md-nav__item> <a href=#fillnull class=md-nav__link> fillnull </a> </li> <li class=md-nav__item> <a href=#foreach class=md-nav__link> foreach </a> </li> <li class=md-nav__item> <a href=#join class=md-nav__link> join </a> </li> <li class=md-nav__item> <a href=#lookup class=md-nav__link> lookup </a> </li> <li class=md-nav__item> <a href=#makemv class=md-nav__link> makemv </a> </li> <li class=md-nav__item> <a href=#multikv class=md-nav__link> multikv </a> </li> <li class=md-nav__item> <a href=#mvexpand class=md-nav__link> mvexpand </a> </li> <li class=md-nav__item> <a href=#rename class=md-nav__link> rename </a> </li> <li class=md-nav__item> <a href=#rex class=md-nav__link> rex </a> </li> <li class=md-nav__item> <a href=#search class=md-nav__link> search </a> </li> <li class=md-nav__item> <a href=#sort class=md-nav__link> sort </a> </li> <li class=md-nav__item> <a href=#spath class=md-nav__link> spath </a> </li> <li class=md-nav__item> <a href=#streamstats class=md-nav__link> streamstats </a> </li> <li class=md-nav__item> <a href=#table class=md-nav__link> table </a> </li> <li class=md-nav__item> <a href=#transaction class=md-nav__link> transaction </a> </li> <li class=md-nav__item> <a href=#union class=md-nav__link> union </a> </li> <li class=md-nav__item> <a href=#untable class=md-nav__link> untable </a> </li> <li class=md-nav__item> <a href=#where class=md-nav__link> where </a> </li> <li class=md-nav__item> <a href=#xyseries class=md-nav__link> xyseries </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#transforming-commands class=md-nav__link> Transforming Commands </a> <nav class=md-nav aria-label="Transforming Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#chart class=md-nav__link> chart </a> </li> <li class=md-nav__item> <a href=#fieldsummary class=md-nav__link> fieldsummary </a> </li> <li class=md-nav__item> <a href=#rare class=md-nav__link> rare </a> </li> <li class=md-nav__item> <a href=#stats class=md-nav__link> stats </a> </li> <li class=md-nav__item> <a href=#timechart class=md-nav__link> timechart </a> </li> <li class=md-nav__item> <a href=#timewrap class=md-nav__link> timewrap </a> </li> <li class=md-nav__item> <a href=#top class=md-nav__link> top </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#generating-commands class=md-nav__link> Generating Commands </a> <nav class=md-nav aria-label="Generating Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#datamodel class=md-nav__link> datamodel </a> </li> <li class=md-nav__item> <a href=#inputlookup class=md-nav__link> inputlookup </a> </li> <li class=md-nav__item> <a href=#makeresults class=md-nav__link> makeresults </a> </li> <li class=md-nav__item> <a href=#tstats class=md-nav__link> tstats </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#special-commands class=md-nav__link> Special Commands </a> <nav class=md-nav aria-label="Special Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#gauge class=md-nav__link> gauge </a> </li> <li class=md-nav__item> <a href=#geom class=md-nav__link> geom </a> </li> <li class=md-nav__item> <a href=#geostats class=md-nav__link> geostats </a> </li> <li class=md-nav__item> <a href=#iplocation class=md-nav__link> iplocation </a> </li> <li class=md-nav__item> <a href=#trendline class=md-nav__link> trendline </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#spl-best-practices class=md-nav__link> SPL Best Practices </a> </li> <li class=md-nav__item> <a href=#spl-tricks class=md-nav__link> SPL Tricks </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reports-and-dashboards class=md-nav__link> Reports and Dashboards </a> <nav class=md-nav aria-label="Reports and Dashboards"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reports class=md-nav__link> Reports </a> <nav class=md-nav aria-label=Reports> <ul class=md-nav__list> <li class=md-nav__item> <a href=#scheduled-reports-and-alerts class=md-nav__link> Scheduled Reports and Alerts </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#visulizations class=md-nav__link> Visulizations </a> <nav class=md-nav aria-label=Visulizations> <ul class=md-nav__list> <li class=md-nav__item> <a href=#choropleth-maps class=md-nav__link> Choropleth Maps </a> </li> <li class=md-nav__item> <a href=#single-value class=md-nav__link> Single Value </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dashboards class=md-nav__link> Dashboards </a> <nav class=md-nav aria-label=Dashboards> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dashboarding-tricks class=md-nav__link> Dashboarding Tricks </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#accelerations class=md-nav__link> Accelerations </a> <nav class=md-nav aria-label=Accelerations> <ul class=md-nav__list> <li class=md-nav__item> <a href=#report-acceleration class=md-nav__link> Report acceleration </a> </li> <li class=md-nav__item> <a href=#summary-indexing class=md-nav__link> Summary indexing </a> </li> <li class=md-nav__item> <a href=#data-model-acceleration class=md-nav__link> Data model acceleration </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Splunk-Dashboarding/ class=md-nav__link> Splunk Dashboarding </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6 type=checkbox id=nav-1-6> <label class=md-nav__link for=nav-1-6> Programming Langs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Programming Langs" data-md-level=2> <label class=md-nav__title for=nav-1-6> <span class="md-nav__icon md-icon"></span> Programming Langs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-1 type=checkbox id=nav-1-6-1> <label class=md-nav__link for=nav-1-6-1> Golang <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Golang data-md-level=3> <label class=md-nav__title for=nav-1-6-1> <span class="md-nav__icon md-icon"></span> Golang </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Golang/Golang-Specs/ class=md-nav__link> Golang Language Reference </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Golang/Best-Practices/ class=md-nav__link> Effective Go </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Golang/Freq-Used-Libs/ class=md-nav__link> Go libraries and examples </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-2 type=checkbox id=nav-1-6-2> <label class=md-nav__link for=nav-1-6-2> Java <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Java data-md-level=3> <label class=md-nav__title for=nav-1-6-2> <span class="md-nav__icon md-icon"></span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Style-Guide/ class=md-nav__link> Style Guide </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Best-Practices/ class=md-nav__link> Effective Java </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Design-Patterns/ class=md-nav__link> Java Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Testing-Design-Patterns/ class=md-nav__link> Testing Design Patterns </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Java/Java_Std_Lib_Cheatsheet/ class=md-nav__link> Java Std Lib Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-3 type=checkbox id=nav-1-6-3> <label class=md-nav__link for=nav-1-6-3> C++ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=C++ data-md-level=3> <label class=md-nav__title for=nav-1-6-3> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/CPP/CPlusPlus_Lang_Specs/ class=md-nav__link> C++ Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-4 type=checkbox id=nav-1-6-4> <label class=md-nav__link for=nav-1-6-4> Perl <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Perl data-md-level=3> <label class=md-nav__title for=nav-1-6-4> <span class="md-nav__icon md-icon"></span> Perl </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Perl/Perl-Lang-Specs/ class=md-nav__link> Perl Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-5 type=checkbox id=nav-1-6-5> <label class=md-nav__link for=nav-1-6-5> Shell <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Shell data-md-level=3> <label class=md-nav__title for=nav-1-6-5> <span class="md-nav__icon md-icon"></span> Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Shell/Shell-Scripting/ class=md-nav__link> Shell Scripting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Github-Markdown/ class=md-nav__link> Github Markdown Guide </a> </li> <li class=md-nav__item> <a href=../../../Programming-Lang-Reference/Regex-Specs/ class=md-nav__link> Regex Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-7 type=checkbox id=nav-1-7> <label class=md-nav__link for=nav-1-7> Reading Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reading Notes" data-md-level=2> <label class=md-nav__title for=nav-1-7> <span class="md-nav__icon md-icon"></span> Reading Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Reading-Notes/How-Netflix-Works/ class=md-nav__link> How Netflix Works </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/System-Design-Concepts/ class=md-nav__link> System Design Guide </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Why-Latency-Matters/ class=md-nav__link> Why Latency Matters </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/DevOps_SRE/ class=md-nav__link> Intro to DevOps and SRE </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Leading-without-formal-authority/ class=md-nav__link> Leading Without Formal Authority </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Google-SRE-Book/ class=md-nav__link> Google SRE Book </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Good-Reads/ class=md-nav__link> Good Reads </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#splunk-brief class=md-nav__link> Splunk Brief </a> <nav class=md-nav aria-label="Splunk Brief"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-splunk-is-good-for class=md-nav__link> What Splunk is good for </a> </li> <li class=md-nav__item> <a href=#splunk-modules class=md-nav__link> Splunk Modules </a> </li> <li class=md-nav__item> <a href=#splunk-user-types class=md-nav__link> Splunk User Types </a> </li> <li class=md-nav__item> <a href=#get-data-into-splunk class=md-nav__link> Get Data into Splunk </a> <nav class=md-nav aria-label="Get Data into Splunk"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-data-is-stored class=md-nav__link> How Data is stored </a> <nav class=md-nav aria-label="How Data is stored"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bucketing class=md-nav__link> Bucketing </a> </li> <li class=md-nav__item> <a href=#bloom-filters class=md-nav__link> Bloom Filters </a> </li> <li class=md-nav__item> <a href=#segmentation class=md-nav__link> Segmentation </a> </li> <li class=md-nav__item> <a href=#inside-a-search class=md-nav__link> Inside a Search </a> </li> <li class=md-nav__item> <a href=#inspect-a-search class=md-nav__link> Inspect a Search </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#search-and-report-app class=md-nav__link> Search and Report App </a> <nav class=md-nav aria-label="Search and Report App"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#search-ui class=md-nav__link> Search UI </a> <nav class=md-nav aria-label="Search UI"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#search-fields class=md-nav__link> Search Fields </a> </li> <li class=md-nav__item> <a href=#tags class=md-nav__link> Tags </a> </li> <li class=md-nav__item> <a href=#event-type class=md-nav__link> Event Type </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#knowledge-objects class=md-nav__link> Knowledge Objects </a> <nav class=md-nav aria-label="Knowledge Objects"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#field-extractor class=md-nav__link> Field Extractor </a> </li> <li class=md-nav__item> <a href=#field-aliases class=md-nav__link> Field Aliases </a> </li> <li class=md-nav__item> <a href=#calculated-field class=md-nav__link> Calculated Field </a> </li> <li class=md-nav__item> <a href=#search-macros class=md-nav__link> Search Macros </a> </li> <li class=md-nav__item> <a href=#datasets class=md-nav__link> Datasets </a> <nav class=md-nav aria-label=Datasets> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lookups class=md-nav__link> Lookups </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#pivot class=md-nav__link> Pivot </a> </li> <li class=md-nav__item> <a href=#data-models class=md-nav__link> Data Models </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#splunk-search-language-spl class=md-nav__link> Splunk Search Language (SPL) </a> <nav class=md-nav aria-label="Splunk Search Language (SPL)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#spl-components class=md-nav__link> SPL Components </a> <nav class=md-nav aria-label="SPL Components"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#search-terms class=md-nav__link> Search Terms </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#subsearch class=md-nav__link> Subsearch </a> </li> <li class=md-nav__item> <a href=#spl-commands class=md-nav__link> SPL Commands </a> <nav class=md-nav aria-label="SPL Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#streaming-commands class=md-nav__link> Streaming Commands </a> <nav class=md-nav aria-label="Streaming Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#append class=md-nav__link> append </a> </li> <li class=md-nav__item> <a href=#appendcols class=md-nav__link> appendcols </a> </li> <li class=md-nav__item> <a href=#appendpipe class=md-nav__link> appendpipe </a> </li> <li class=md-nav__item> <a href=#addtotals class=md-nav__link> addtotals </a> </li> <li class=md-nav__item> <a href=#bin class=md-nav__link> bin </a> </li> <li class=md-nav__item> <a href=#dedup class=md-nav__link> dedup </a> </li> <li class=md-nav__item> <a href=#erex class=md-nav__link> erex </a> </li> <li class=md-nav__item> <a href=#eval class=md-nav__link> eval </a> </li> <li class=md-nav__item> <a href=#eventstats class=md-nav__link> eventstats </a> </li> <li class=md-nav__item> <a href=#fieldformat class=md-nav__link> fieldformat </a> </li> <li class=md-nav__item> <a href=#fields class=md-nav__link> fields </a> </li> <li class=md-nav__item> <a href=#fillnull class=md-nav__link> fillnull </a> </li> <li class=md-nav__item> <a href=#foreach class=md-nav__link> foreach </a> </li> <li class=md-nav__item> <a href=#join class=md-nav__link> join </a> </li> <li class=md-nav__item> <a href=#lookup class=md-nav__link> lookup </a> </li> <li class=md-nav__item> <a href=#makemv class=md-nav__link> makemv </a> </li> <li class=md-nav__item> <a href=#multikv class=md-nav__link> multikv </a> </li> <li class=md-nav__item> <a href=#mvexpand class=md-nav__link> mvexpand </a> </li> <li class=md-nav__item> <a href=#rename class=md-nav__link> rename </a> </li> <li class=md-nav__item> <a href=#rex class=md-nav__link> rex </a> </li> <li class=md-nav__item> <a href=#search class=md-nav__link> search </a> </li> <li class=md-nav__item> <a href=#sort class=md-nav__link> sort </a> </li> <li class=md-nav__item> <a href=#spath class=md-nav__link> spath </a> </li> <li class=md-nav__item> <a href=#streamstats class=md-nav__link> streamstats </a> </li> <li class=md-nav__item> <a href=#table class=md-nav__link> table </a> </li> <li class=md-nav__item> <a href=#transaction class=md-nav__link> transaction </a> </li> <li class=md-nav__item> <a href=#union class=md-nav__link> union </a> </li> <li class=md-nav__item> <a href=#untable class=md-nav__link> untable </a> </li> <li class=md-nav__item> <a href=#where class=md-nav__link> where </a> </li> <li class=md-nav__item> <a href=#xyseries class=md-nav__link> xyseries </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#transforming-commands class=md-nav__link> Transforming Commands </a> <nav class=md-nav aria-label="Transforming Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#chart class=md-nav__link> chart </a> </li> <li class=md-nav__item> <a href=#fieldsummary class=md-nav__link> fieldsummary </a> </li> <li class=md-nav__item> <a href=#rare class=md-nav__link> rare </a> </li> <li class=md-nav__item> <a href=#stats class=md-nav__link> stats </a> </li> <li class=md-nav__item> <a href=#timechart class=md-nav__link> timechart </a> </li> <li class=md-nav__item> <a href=#timewrap class=md-nav__link> timewrap </a> </li> <li class=md-nav__item> <a href=#top class=md-nav__link> top </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#generating-commands class=md-nav__link> Generating Commands </a> <nav class=md-nav aria-label="Generating Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#datamodel class=md-nav__link> datamodel </a> </li> <li class=md-nav__item> <a href=#inputlookup class=md-nav__link> inputlookup </a> </li> <li class=md-nav__item> <a href=#makeresults class=md-nav__link> makeresults </a> </li> <li class=md-nav__item> <a href=#tstats class=md-nav__link> tstats </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#special-commands class=md-nav__link> Special Commands </a> <nav class=md-nav aria-label="Special Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#gauge class=md-nav__link> gauge </a> </li> <li class=md-nav__item> <a href=#geom class=md-nav__link> geom </a> </li> <li class=md-nav__item> <a href=#geostats class=md-nav__link> geostats </a> </li> <li class=md-nav__item> <a href=#iplocation class=md-nav__link> iplocation </a> </li> <li class=md-nav__item> <a href=#trendline class=md-nav__link> trendline </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#spl-best-practices class=md-nav__link> SPL Best Practices </a> </li> <li class=md-nav__item> <a href=#spl-tricks class=md-nav__link> SPL Tricks </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reports-and-dashboards class=md-nav__link> Reports and Dashboards </a> <nav class=md-nav aria-label="Reports and Dashboards"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reports class=md-nav__link> Reports </a> <nav class=md-nav aria-label=Reports> <ul class=md-nav__list> <li class=md-nav__item> <a href=#scheduled-reports-and-alerts class=md-nav__link> Scheduled Reports and Alerts </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#visulizations class=md-nav__link> Visulizations </a> <nav class=md-nav aria-label=Visulizations> <ul class=md-nav__list> <li class=md-nav__item> <a href=#choropleth-maps class=md-nav__link> Choropleth Maps </a> </li> <li class=md-nav__item> <a href=#single-value class=md-nav__link> Single Value </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dashboards class=md-nav__link> Dashboards </a> <nav class=md-nav aria-label=Dashboards> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dashboarding-tricks class=md-nav__link> Dashboarding Tricks </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#accelerations class=md-nav__link> Accelerations </a> <nav class=md-nav aria-label=Accelerations> <ul class=md-nav__list> <li class=md-nav__item> <a href=#report-acceleration class=md-nav__link> Report acceleration </a> </li> <li class=md-nav__item> <a href=#summary-indexing class=md-nav__link> Summary indexing </a> </li> <li class=md-nav__item> <a href=#data-model-acceleration class=md-nav__link> Data model acceleration </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>Splunk Knowledge</h1> <p>Notes taken from Splunk official trainings. It serves as a quick reference for Splunk Search commands and tricks.</p> <h2 id=splunk-brief>Splunk Brief<a class=headerlink href=#splunk-brief title="Permanent link">&para;</a></h2> <h3 id=what-splunk-is-good-for>What Splunk is good for<a class=headerlink href=#what-splunk-is-good-for title="Permanent link">&para;</a></h3> <p>Monitoring, alerting, debugging issues and outages, generating reports and insights.</p> <p>Its <strong>workflow</strong> is roughly: Index Data -&gt; Search &amp; Investigate -&gt; Add Knowledge -&gt; Monitor &amp; Alert -&gt; Report &amp; Analyze</p> <p>Splunk <strong>Data Sources</strong> can be from: Computers, network devices, virtual machines, Internet devices, commnuication devices, sensors, databases, logs, configurations, messages, call detail records, clickstream, alerts, metrics, scripts, changes, tickets, and more.</p> <h3 id=splunk-modules>Splunk Modules<a class=headerlink href=#splunk-modules title="Permanent link">&para;</a></h3> <ul> <li><strong>Indexer</strong> - Process <strong>incoming data</strong> and string results in indexes as <strong>events</strong><ul> <li>Create files organized in sets of directories by <strong>age</strong></li> <li>When searching, Splunk only open the dirs that match the <strong>time frame</strong> of the search</li> </ul> </li> <li><strong>Search Heads</strong> - all users to search the data using Splunk Search Language<ul> <li>Takes the search, divide and conquor and <strong>distribute</strong> work to indexers, and <strong>aggregate</strong> the results got back</li> <li>Also serve tools like <strong>dashboards, alerts, reports</strong></li> </ul> </li> <li><strong>Forwarders</strong> - Splunk Enterprise component that consumes data and <strong>forward</strong> to the indexers for process and save<ul> <li>Usually resides on the machines where the data origins and requires negligible resources</li> <li>Primary way data is supplied for indexing</li> </ul> </li> </ul> <p>For a large scale of data sources, it is better to split the Splunk installation into multiple <strong>specialized instances</strong>: multiple Search Heads and Indexers (which can form clusters), and many Forwarders.</p> <p>Read More: https://splunkbase.splunk.com/ and http://dev.splunk.com/</p> <h3 id=splunk-user-types>Splunk User Types<a class=headerlink href=#splunk-user-types title="Permanent link">&para;</a></h3> <ul> <li><strong>Admin User</strong> - access to <strong>install apps</strong>, create knowledge objects for all users</li> <li><strong>Power User</strong> - access to <strong>create and share</strong> knowledge objects for users of an app and do realtime searches</li> <li><strong>User</strong> - only see their own knowledge objects and those shared with them<ul> <li>knowledge objects created must be made share-in-app by Power User for it to be seen by other Users</li> </ul> </li> </ul> <h3 id=get-data-into-splunk>Get Data into Splunk<a class=headerlink href=#get-data-into-splunk title="Permanent link">&para;</a></h3> <ul> <li>Admin User upload data files through web UI</li> <li>Configure Splunk to monitor some files locally on the machine<ul> <li>Event Logs, File System changes, Active Directory, Network Info</li> </ul> </li> <li>(Main) Receive data from external Forwarders<ul> <li>Read more: https://docs.splunk.com/Documentation/Splunk/latest/Data/Usingforwardingagents</li> </ul> </li> </ul> <h4 id=how-data-is-stored>How Data is stored<a class=headerlink href=#how-data-is-stored title="Permanent link">&para;</a></h4> <p>Splunk store data in <strong>indexes</strong> which held data in groups of <strong>data buckets</strong>.</p> <h5 id=bucketing>Bucketing<a class=headerlink href=#bucketing title="Permanent link">&para;</a></h5> <p>Data are stored in <strong>Hot</strong> buckets as they <strong>arrive</strong>, then <strong>Warm</strong> buckets and time elapses and finally <strong>Cold</strong> buckets. Eventually they go to <strong>Frozen</strong> buckets for <strong>deletion or archiving</strong>.</p> <p>Each bucket contains:</p> <ul> <li>a <strong>journal.gz</strong> file, where Splunk stores <strong>raw event data</strong>, composed of many smaller and compressed <strong>slices</strong> (each about 128 kb)</li> <li><strong>time-series index</strong> (.tsidx) files, serves as <strong>index keys</strong> to the journal file<ul> <li>Splunk uses this to know which slice to open up and search for events</li> <li>created from raw events, where each line is tokenized with the token words written out to a <strong>lexicon</strong> which exists inside each tsidx file</li> <li>and each lexicon has a <strong>posting array</strong> which has the location of the events in the journal file</li> </ul> </li> </ul> <h5 id=bloom-filters>Bloom Filters<a class=headerlink href=#bloom-filters title="Permanent link">&para;</a></h5> <p><strong>Bloom Filters</strong> is created based on tsidx files when a bucket roll over from Hot to Warm</p> <ul> <li>it is a data structure for quick <strong>elimination</strong> of data that doesn't match a search<ul> <li>allows Splunk to AVOID accessing <strong>disk</strong> unless really necessary</li> </ul> </li> <li>when creating a Bloom Filter, each term inside a bucket's tsidx files' lexicon is run through a <strong>hashing algorithm</strong><ul> <li>resulting hash sets the <strong>bits</strong> in the Bloom filter to 0/1</li> <li>When a search is run, it <strong>generates</strong> its own Bloom filter based on the <strong>search terms</strong> and compared with the buckets' Bloom Filters, resulting a fast filter on unrelevant buckets</li> </ul> </li> </ul> <h5 id=segmentation>Segmentation<a class=headerlink href=#segmentation title="Permanent link">&para;</a></h5> <p>The process of <strong>tokenizing</strong> search terms at search-time. Two stages:</p> <ul> <li>splitting events up by finding major/minor breaker characters<ul> <li>major breakers are used to <strong>isolate</strong> words, phrases, terms, and numerical data<ul> <li>example major breakers: <code>space \n \r \t [] ! ,</code></li> </ul> </li> <li>minor breakers go through results in the <strong>first pass</strong> and break them up <strong>further</strong> in the second pass<ul> <li>example minor breakers: <code>/ : . - $</code></li> </ul> </li> </ul> </li> <li>The tokens become part of tsidx files lexicons at index-time and used to build bloom filters</li> </ul> <p>Read more from <a href=https://docs.splunk.com/Documentation/Splunk/latest/Data/Abouteventsegmentation target=_blank>doc page</a></p> <h5 id=inside-a-search>Inside a Search<a class=headerlink href=#inside-a-search title="Permanent link">&para;</a></h5> <p>Take this search as an example:</p> <div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>security failed <span class=nv>user</span><span class=o>=</span>root
<span class=p>|</span> timechart count <span class=nv>span</span><span class=o>=</span>1h
<span class=p>|</span> stats avg<span class=o>(</span>count<span class=o>)</span> as HourlyAverage
</code></pre></div> <ul> <li>Splunk extracts 'failed' and 'root' and creates a Bloom Filter from them</li> <li>Splunk then identify buckets in <code>security</code> index for the past 24h</li> <li>Splunk compares the search Bloom Filter with those from the buckets</li> <li>Splunk rules out tsidx files that don't have matches</li> <li>Splunk checks the tsidx files from the selected buckets for extracted terms</li> <li>Splunk uses the terms to go through each posting list to obtain seek address in journal file for raw events</li> <li>Splunk extracts search-time fields from the raw events</li> <li>Splunk filters the events that contains our search terms 'failed' and 'root'</li> <li>The remaining events are search results</li> </ul> <h5 id=inspect-a-search>Inspect a Search<a class=headerlink href=#inspect-a-search title="Permanent link">&para;</a></h5> <p>Within the Job Inspector:</p> <ul> <li><code>command.search.index</code> gives the time to get location info from <strong>tsidx</strong> files</li> <li><code>command.search.rawdata</code> tells the time to extract event data from the <strong>gzip</strong> journal files</li> <li><code>command.search.kv</code> tells the time took to perform search-time field <strong>extractions</strong></li> <li><code>command.search.filter</code> shows the time took to filter out <strong>non-matching</strong> events</li> <li><code>command.search.log</code> look for phrase "base lispy" that contains the <strong>Lispy Expression</strong> created from the query and is used to build Bloom Filter and locate terms in tsidx files</li> </ul> <h2 id=search-and-report-app>Search and Report App<a class=headerlink href=#search-and-report-app title="Permanent link">&para;</a></h2> <p>The <strong>Search &amp; Report</strong> app allows you to search and analyze data through creating knowledge objects, reports, dashboards and more.</p> <h3 id=search-ui>Search UI<a class=headerlink href=#search-ui title="Permanent link">&para;</a></h3> <p><code>Events</code> tab displays the events returned for your search and the <strong>fields extracted</strong> from the events.</p> <p><code>patterns</code> tab allows you to see patterns in your data.</p> <p>If your search generates statistics or visuals, they will appear in <code>Statistics</code> and <code>Visualization</code> tabs. Commands that create statistics and visualizations are called <strong>transforming commands</strong>, they transform data into data tables.</p> <p>By default, a search is active &amp; valid for <strong>10 minutes</strong>, otherwise needs rerun.</p> <p>A <strong>shared search job</strong> is active for <strong>7 days</strong> and its first-ran result visible by anyone you shared with.</p> <p>From the web UI, use <code>Search &amp; Reporting</code> -&gt; <code>Search History</code> to quickly view recent searches and reuse the searches if possible.</p> <p>Also from the web UI, use <code>Activity</code> -&gt; <code>Jobs</code> to view recent search jobs (with data). Then further use <code>Job -&gt; inspect job</code> to view the query performance.</p> <h4 id=search-fields>Search Fields<a class=headerlink href=#search-fields title="Permanent link">&para;</a></h4> <p><strong>Search fields</strong> are <code>key=value</code> string in the search query and will be <strong>automatically extracted</strong> and available for use by commands for creating insights. The key is <strong>case-sensitive</strong> but the value is not.</p> <p>Three fields ALWAYS available are <code>hosts</code>, <code>source</code>, and <code>sourcetype</code>. <strong>Interesting fields</strong> are those appear within <strong>at least 20%</strong> of the events</p> <p>From the extracted fields, <code>a</code> denotes a String value, <code>#</code> denotes a numeral value</p> <p>In the search, <code>= !=</code> can be used on numeral and String values; <code>&gt; &gt;= &lt; &lt;=</code> can be used on numeral values only.</p> <h4 id=tags>Tags<a class=headerlink href=#tags title="Permanent link">&para;</a></h4> <p><strong>Tags</strong> are Knowledge Objects allow you to designate <strong>descriptive names</strong> for <code>key-value</code> pairs.</p> <p>It is useful when you have logs that multiple fields may have the same value(s) you want to filter with. Then you can tag those fields with the same tag name and in future searches do filter with the tag name.</p> <p>Tags are <strong>value-specific</strong> and are case-sensitive. When you tag a key-value pair you are associating a tag with that pair. When the field appears with another value then it is not tagged with this tag name.</p> <p>Do NOT tag a field having <strong>infinite possible values</strong>.</p> <p>Steps: in a Splunk search, click on an event and see the list of key=vlaue pairs and in actions dropdown select <code>Edit Tags</code> to add new tags (comma separated).</p> <p>To search with tags, enter <code>tag=&lt;tag_name&gt;</code>. For example, <code>index=security tag=SF</code> matches all fields that are tagged with that value. To limit a tag to a field do <code>tag::&lt;field&gt;=&lt;tag_name&gt;</code></p> <p>Read more about tags in <a href=https://docs.splunk.com/Documentation/Splunk/8.1.2/Knowledge/TagandaliasfieldvaluesinSplunkWeb target=_blank>doc page</a></p> <h4 id=event-type>Event Type<a class=headerlink href=#event-type title="Permanent link">&para;</a></h4> <p><strong>Event Type</strong> allows saving a search's <strong>definition</strong> and use the definition in another search to <strong>highlight</strong> matching events. It is good for <strong>categorizing events</strong> based on search terms. The priority settings affects the display order of returned results.</p> <p>Steps: after a search, save as "Event Type" and use it in another search with <code>eventtype</code>. For example, <code>index=web sourcetype=access_combined eventtype=purchase_strategy</code></p> <h3 id=knowledge-objects>Knowledge Objects<a class=headerlink href=#knowledge-objects title="Permanent link">&para;</a></h3> <p><strong>Knowledge Objects</strong> are like some tools to help <strong>discover and analyze data</strong>, which include data interpretation, classification, enrichment, normalization, and search-time-mapping of knowledge (Data Models).</p> <p>Saved Searches, Reports, Alerts, and Dashboards are all Knowledge Objects.</p> <h4 id=field-extractor>Field Extractor<a class=headerlink href=#field-extractor title="Permanent link">&para;</a></h4> <p>The <strong>Field Extractor</strong> allows to use a GUI to extract fields that <strong>persist as Knowledge Objects</strong> and make them reusable in searches.</p> <p>It is useful if the information from events are <strong>badly structured</strong> (not in some <code>key=value</code> fashion), such as simple statements in a natural language but contains useful information in a specific <strong>pattern</strong>.</p> <p>Fields extracted are <strong>specific</strong> to a <code>host, source, or sourcetype</code> and are <strong>persistent</strong>. Two different ways a field extractor can use: <strong>regex</strong> and <strong>delimiters</strong>:</p> <ul> <li><strong>regex</strong>: using regular expression, work well when having unstructured data and events to extract fields from</li> <li><strong>delimiters</strong>: a delimiter such as comma, space, or any char. Use it for things like CSV files</li> </ul> <p>Three ways to access a field extractor: - Settings -&gt; Fields - The field sidebar during a search - From an event's actions menu (easiest)</p> <p>Read more from the <a href=http://docs.splunk.com/Documentation/Splunk/latest/Knowledge/AboutSplunkregularexpressions target=_blank>docs page</a> for Splunk regex.</p> <h4 id=field-aliases>Field Aliases<a class=headerlink href=#field-aliases title="Permanent link">&para;</a></h4> <p><strong>Field Aliases</strong> give you a way to <strong>normalize data</strong> over <strong>multiple sources</strong>.</p> <p>For example, when aggregating results from multiple sources or indexes, but the data logged may have fields with different names such as url, uurl, dest_url, service_url, etc. which all refers to the same thing. Then this tool is handy.</p> <p>You can create one or more aliases to any <strong>extracted field</strong> and can apply them to <a href=#lookups>lookup</a>.</p> <ul> <li>Steps: Settings -&gt; Fields -&gt; Field aliases (add new)<ul> <li>set destination app</li> <li>name (choose a meaningful name for the new field)</li> <li>apply to (sourcetype, source, or host) and its matching value</li> <li>Map fieldName=newFieldName</li> <li>Map multiple fields by adding another field</li> </ul> </li> </ul> <h4 id=calculated-field>Calculated Field<a class=headerlink href=#calculated-field title="Permanent link">&para;</a></h4> <p><strong>Calculated Field</strong> saves <strong>frequently</strong> used calculation you would do in searches with complex <em>eval</em> statements and it is like a shorthand for a function made of SPL commands on <strong>extracted fields</strong>.</p> <p>For example, you might want to save something to do conversion between bytes to megabytes, or encoding some field to sha256, etc.</p> <ul> <li>Steps: Settings -&gt; Fields -&gt; Calculated fields (add new)</li> </ul> <h4 id=search-macros>Search Macros<a class=headerlink href=#search-macros title="Permanent link">&para;</a></h4> <p><strong>Macros</strong> are <strong>reusable</strong> search strings or portions of search strings. It is useful for frequent searches with complicated search syntax and can store <strong>entire search strings</strong>.</p> <p>You can pass arguments (fields or constants) to the search.</p> <p>Steps: Settings -&gt; Advanced Search -&gt; Search macros (add new)</p> <p>Then use it in the search by surrounding the macro name with backticks. For example: <code>index=sales sourcetype=vendor_sales | stats sum(sale_price) as total_sales by Vendor | ``convertUSD``</code></p> <p>Within a search, use <code>ctrl-shift-E</code> or <code>cmd-shift-E</code> to <strong>preview and expand</strong> the macro used without running it.</p> <h4 id=datasets>Datasets<a class=headerlink href=#datasets title="Permanent link">&para;</a></h4> <p><strong>Datasets</strong> are small <strong>subsets of data</strong> for specific purposes, defined like tables with fields names as columns and fields values as cells.</p> <h5 id=lookups>Lookups<a class=headerlink href=#lookups title="Permanent link">&para;</a></h5> <p>Lookups are in fact datasets that allow you to add useful values to your events not included in the indexed data.</p> <p>Field values from a Lookup are case sensitive by default</p> <p>Set it up in Splunk UI -&gt; Settings -&gt; Lookups -&gt; Define a lookup table</p> <p>Use <code>| inputlookup &lt;lookup_definition_name&gt;</code> to verify lookup is setup correctly. </p> <p>Additionally, you can populate lookup table with search results or from external script or linux executable. Read more about <a href=https://docs.splunk.com/Documentation/Splunk/latest/Knowledge/Configureexternallookups target=_blank>external lookups</a> and <a href=https://docs.splunk.com/Documentation/Splunk/latest/Knowledge/ConfigureKVstorelookups target=_blank>KVstore lookups</a></p> <p>Some tips for using lookups:</p> <ul> <li>in lookup table, keep the key field the first column</li> <li>put lookups at the end of the search</li> <li>if a lookup usage is very common in search, make it automatic</li> <li>use KV store or gzip CSVs for large lookup table</li> <li>only put data being used in lookup table</li> <li>the <code>outputlookup</code> can output results of search to a static lookup table</li> </ul> <h4 id=pivot>Pivot<a class=headerlink href=#pivot title="Permanent link">&para;</a></h4> <p><strong>Pivot</strong> allows users to get knowledge from the data without learning SPL in deep; a UI-based tool can help the users with creating useful searches. It is like a tool created by knowledgable Splunk users to serve the users don't know much about Splunk.</p> <h4 id=data-models>Data Models<a class=headerlink href=#data-models title="Permanent link">&para;</a></h4> <p><strong>Data Models</strong> are made of Datasets and are knowledge objects that provide the data structure that drives Pivots. It can also be used to significantly <strong>speed up</strong> searches, reports, and dashboard.</p> <p>Data Models must be created by <strong>Admins and Power Users</strong> and are <strong>hierarchically strucutred</strong> datasets. Starting from a Root Object (a search with index and sourcetype), then add Child Objects (a filter or constraint).</p> <p>Data Models are good for <strong>accelerating searches</strong>. Doing searches on data models are like searching on some cached events that gets updated regularly.</p> <p>Steps: Settings -&gt; Data Models -&gt; New Data Model</p> <p>Then search the datamodel with <code>| datamodel keywords</code></p> <p>Read more from the <a href=http://docs.splunk.com/Documentation/Splunk/latest/Knowledge/Acceleratedatamodels target=_blank>doc page</a></p> <h2 id=splunk-search-language-spl>Splunk Search Language (SPL)<a class=headerlink href=#splunk-search-language-spl title="Permanent link">&para;</a></h2> <h3 id=spl-components>SPL Components<a class=headerlink href=#spl-components title="Permanent link">&para;</a></h3> <ul> <li><strong>Search Terms</strong> - defines what data to return<ul> <li>i.e. <code>host=xxx status&gt;399</code></li> <li>also includes <strong>Boolean operators</strong> (<code>NOT OR AND</code> in its evaluation precedence)</li> </ul> </li> <li><strong>Commands</strong> - process search results and, create charts, compute statistics, and format results<ul> <li>i.e. <code>eval</code> in <code>eval foo=1</code></li> </ul> </li> <li><strong>Functions</strong> - serves supplying additional conditions and algorithms to compute and evaluate the results in Commands<ul> <li>i.e. <code>avg</code> in <code>stats avg(latency) by host</code></li> </ul> </li> <li><strong>Arguments</strong> - variables we want to apply to the Functions<ul> <li>i.e. <code>latency</code> in <code>stats avg(latency) by host</code></li> </ul> </li> <li><strong>Clauses</strong> - how we want the results grouped<ul> <li>i.e. <code>by</code> in <code>stats avg(latency) by host</code></li> </ul> </li> </ul> <p>Search Terms, Command names, Function names are <strong>NOT case-sensitive</strong>, with the exception to the command <code>replace</code> where search term must be an exact match.</p> <h4 id=search-terms>Search Terms<a class=headerlink href=#search-terms title="Permanent link">&para;</a></h4> <ul> <li><strong>Keywords</strong>, any keywords can be searched on; "AND" boolean is implied for multiple keywords</li> <li><strong>Booleans</strong>, AND OR NOT</li> <li><strong>Phrases</strong>, keywords surrounded by ""</li> <li><strong>Fields</strong>, key=value pair search</li> <li><strong>Wildcards</strong>, used in keywords and fields to match any chars; inefficient if used at the beginning of a word</li> <li><strong>Comparisons</strong>, = != &lt; &lt;= &gt; &gt;=</li> </ul> <h3 id=subsearch>Subsearch<a class=headerlink href=#subsearch title="Permanent link">&para;</a></h3> <p><strong>Subsearch</strong> is a search enclosed in <strong>brackets</strong> that passes its results to its outer search as <strong>search terms</strong>.</p> <p>The <code>return</code> command can be used in subsearch to <strong>limit</strong> the first few number of values to return, i.e. <code>| return src_ip</code>. The field name is included by default; to omit returning values with the field name, use <code>$</code>, i.e. <code>| return 5 $src_ip</code></p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=s2>&quot;accepted&quot;</span>
    <span class=o>[</span>search <span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=s2>&quot;failed password&quot;</span> src_ip!<span class=o>=</span><span class=m>10</span>.0.0.0/8
    <span class=p>|</span> stats count by src_ip
    <span class=p>|</span> where count &gt; <span class=m>10</span>
    <span class=p>|</span> fields src_ip<span class=o>]</span>
    <span class=c1># when subsearch returns, Splunk implicitly adds &quot;OR&quot; between each two results</span>
    <span class=c1># then whole results is combined with the outter search with an implicit &quot;AND&quot; operator</span>
<span class=p>|</span> dedup src_ip, user
<span class=p>|</span> table src_ip, user

<span class=c1># subsearch with &#39;return&#39; command</span>
<span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
    <span class=o>[</span> search <span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales VendorID&lt;<span class=o>=</span><span class=m>2000</span> <span class=nv>product_name</span><span class=o>=</span>Mediocre*
    <span class=p>|</span> top <span class=nv>limit</span><span class=o>=</span><span class=m>5</span> Vendor
    <span class=p>|</span> <span class=k>return</span> <span class=m>5</span> Vendor <span class=o>]</span>
<span class=p>|</span> rare <span class=nv>limit</span><span class=o>=</span><span class=m>1</span> product_name by Vendor
<span class=p>|</span> fields - percent, count
</code></pre></div> </details> <p>Some limitations of subsearches:</p> <ul> <li>default time limit of <strong>60 seconds</strong> to execute<ul> <li>right after time limit, result is finalized and returned to outer search</li> </ul> </li> <li>default returns up to <strong>10000 results</strong></li> <li>if the outter search is executed <strong>real-time</strong>, its subsearch is executed for <strong>all-time</strong><ul> <li>best to use <code>earliest</code> and <code>latest</code> time modifiers in subsearch</li> </ul> </li> </ul> <h3 id=spl-commands>SPL Commands<a class=headerlink href=#spl-commands title="Permanent link">&para;</a></h3> <p><strong>Transforming vs. Streaming Commands</strong></p> <ul> <li>transforming commands operate on the <strong>entire result set</strong> of data<ul> <li>executes on the <strong>Search Head</strong> and waits for full set of results</li> <li>change event data into results once its complete</li> <li>example commands <code>stats timechart chart top rare</code></li> </ul> </li> <li>streaming commands has two types<ul> <li>centralized (aka "Stateful Streaming Commands")<ul> <li>executes on the Search Head</li> <li>apply transformations to each event returned by a search</li> <li>results order depends on the order when data came in</li> <li>example commands <code>transaction streamstats</code></li> </ul> </li> <li>distributable<ul> <li>executes on Search head or Indexers</li> <li>order of events does not matter</li> <li>when <strong>preceded</strong> by commands that have to run on a Search Head, ALL will run on a Search Head</li> <li>example commands <code>rename eval fields regex</code></li> </ul> </li> </ul> </li> </ul> <p>Read more from <a href=http://docs.splunk.com/Documentation/Splunk/latest/SearchReference/Commandsbytype target=_blank>doc page</a></p> <h4 id=streaming-commands>Streaming Commands<a class=headerlink href=#streaming-commands title="Permanent link">&para;</a></h4> <h5 id=append>append<a class=headerlink href=#append title="Permanent link">&para;</a></h5> <p>Add results by <strong>appending subsearch results</strong> to the end of the main search results as <strong>additional rows</strong>. Does NOT work with read-time searches.</p> <p>It is useful to draw data on the same visualization by <strong>combining results</strong> from two searches. However, rows are NOT combined based on the <strong>values</strong> in some of the fields.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=s2>&quot;failed password&quot;</span> NOT <span class=s2>&quot;invalid user&quot;</span>
<span class=p>|</span> timechart count as known_users
<span class=p>|</span> append
    <span class=o>[</span>search <span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=s2>&quot;failed password&quot;</span> <span class=s2>&quot;invalid user&quot;</span>
    <span class=p>|</span> timechart count as unknown_users<span class=o>]</span>
<span class=c1># Final result data may look awkward as rows are NOT combined based on the values in some of the fields.</span>
<span class=c1># Fix it with the `first` Function - return the first value of a field by the order it appears in the results.</span>
<span class=p>|</span> timechart first<span class=o>(</span>*<span class=o>)</span> as * <span class=c1># apply first Function on all fields and keep their original name</span>
</code></pre></div> </details> <h5 id=appendcols>appendcols<a class=headerlink href=#appendcols title="Permanent link">&para;</a></h5> <p>Add results of a subsearch to the right of the main search's results. It also attempts to match rows by some common field values, but it is not always possible.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=s2>&quot;failed password&quot;</span> NOT <span class=s2>&quot;invalid user&quot;</span>
<span class=p>|</span> timechart count as known_users
<span class=p>|</span> appendcols
    <span class=o>[</span>search <span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=s2>&quot;failed password&quot;</span> <span class=s2>&quot;invalid user&quot;</span>
    <span class=p>|</span> timechart count as unknown_users<span class=o>]</span>
<span class=c1># &quot;unknown_users&quot; is added as a new column to the outter search&#39;s results and matches the _time field</span>
</code></pre></div> </details> <h5 id=appendpipe>appendpipe<a class=headerlink href=#appendpipe title="Permanent link">&para;</a></h5> <p><strong>Append</strong> subpipeline search data as events to your search results. Appended search is NOT run until the command is <strong>reached</strong>.</p> <p><code>appendpipe</code> is <strong>NOT an additional search</strong>, but merely a pipeline for the previous results. It acts on the data received and appended back <strong>new events</strong> while <strong>keeping</strong> the data before the pipe. It is useful to add summary to some results.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>network <span class=nv>sourcetype</span><span class=o>=</span>cisco_wsa_squid <span class=o>(</span><span class=nv>usage</span><span class=o>=</span>Borderline OR <span class=nv>usage</span><span class=o>=</span>Violation<span class=o>)</span> 
<span class=p>|</span> stats count by usage, cs_username
<span class=p>|</span> appendpipe 
    <span class=o>[</span>stats sum<span class=o>(</span>count<span class=o>)</span> as count by usage
    <span class=p>|</span> <span class=nb>eval</span> <span class=nv>cs_username</span><span class=o>=</span> <span class=s2>&quot;TOTAL: &quot;</span>.usage<span class=o>]</span>
<span class=p>|</span> appendpipe 
    <span class=o>[</span>search <span class=nv>cs_username</span><span class=o>=</span>Total*
    <span class=p>|</span> stats sum<span class=o>(</span>count<span class=o>)</span> as count
    <span class=p>|</span> <span class=nb>eval</span> <span class=nv>cs_username</span> <span class=o>=</span> <span class=s2>&quot;GRAND TOTAL&quot;</span><span class=o>]</span>
<span class=p>|</span> sort usage, count
</code></pre></div> </details> <h5 id=addtotals>addtotals<a class=headerlink href=#addtotals title="Permanent link">&para;</a></h5> <p>Compute the SUM of ALL <strong>numeric fields</strong> for <strong>each event</strong> (table row) and creates a <code>total</code> column (default behavior).</p> <p>You can override the default behavior and let it calculate a sum for a <strong>column</strong>, see the example.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=c1># adds a column to calculate the totals of all numeric fields per row</span>
<span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> chart sum<span class=o>(</span>bytes<span class=o>)</span> over host by file
<span class=p>|</span> addtotals <span class=nv>fieldname</span><span class=o>=</span><span class=s2>&quot;Total by host&quot;</span>
<span class=c1># adds a row to calculate the totals of one column</span>
<span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> chart sum<span class=o>(</span>bytes<span class=o>)</span> as sum over host
<span class=p>|</span> addtotals <span class=nv>col</span><span class=o>=</span><span class=nb>true</span> <span class=nv>label</span><span class=o>=</span><span class=s2>&quot;Total&quot;</span> <span class=nv>labelfield</span><span class=o>=</span>sum
</code></pre></div> </details> <h5 id=bin>bin<a class=headerlink href=#bin title="Permanent link">&para;</a></h5> <p>Adjust and <strong>group</strong> numerical values into <strong>discrete sets</strong> (bins) so that all the items in a bin <strong>share</strong> the same value.</p> <p><code>bin</code> overrides the field value on the field provided. Use a copied field if need the original values in subsequent pipes.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> stats sum<span class=o>(</span>price<span class=o>)</span> as totalSales by product_name
<span class=p>|</span> bin totalSales <span class=nv>span</span><span class=o>=</span><span class=m>10</span> <span class=c1># span is the bin size to group on</span>
<span class=p>|</span> stats list<span class=o>(</span>product_name<span class=o>)</span> by totalSales
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>totalSales</span> <span class=o>=</span> <span class=s2>&quot;</span>$<span class=s2>&quot;</span>.totalSales
</code></pre></div> </details> <h5 id=dedup>dedup<a class=headerlink href=#dedup title="Permanent link">&para;</a></h5> <p><strong>Remove duplicated</strong> events from results that share common values from the fields specified.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>history* <span class=nv>Address_Description</span><span class=o>=</span><span class=s2>&quot;San Francisco&quot;</span>
<span class=p>|</span> dedup Username <span class=c1># can be a single field or multiple fields</span>
<span class=p>|</span> table Username First_Name Last_Name
</code></pre></div> </details> <h5 id=erex>erex<a class=headerlink href=#erex title="Permanent link">&para;</a></h5> <p>Like an auto field extractor, but had the same shortcomings as the regex <a href=#field-extractor>field extractor</a> through Splunk UI: only look for matches based on the samples provided. Better use <a href=#rex><code>rex</code></a> command.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=s2>&quot;port&quot;</span>
<span class=p>|</span> erex ipaddress <span class=nv>examples</span><span class=o>=</span><span class=s2>&quot;74.125.19.106, 88.12.32.208&quot;</span>
<span class=p>|</span> table ipaddress, src_port
</code></pre></div> </details> <h5 id=eval>eval<a class=headerlink href=#eval title="Permanent link">&para;</a></h5> <p><strong>Calculate</strong> and <strong>manipulate</strong> field values in many powerful ways and also works with <strong>multi-value</strong> fields. Results can create new fields (case-sensitive) or override existing fields.</p> <p>Multiple field expressions can be calculated on the same eval command, and one is created/altered after another so the <strong>order</strong> of these expressions matters.</p> <p>Besides the many Functions it supports, <code>eval</code> supports <strong>operators</strong> include arithmetic, concatenation (using <code>.</code>), and boolean.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>network <span class=nv>sourcetype</span><span class=o>=</span>cisco_wsa_squid
<span class=p>|</span> stats sum<span class=o>(</span>sc_bytes<span class=o>)</span> as Bytes by usage
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>bandwidth</span> <span class=o>=</span> round<span class=o>(</span>Bytes/1024/1024, <span class=m>2</span><span class=o>)</span>
<span class=c1># eval with if conditions and cases</span>
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>VendorTerritory</span><span class=o>=</span><span class=k>if</span><span class=o>(</span>VendorId&lt;<span class=m>4000</span>, <span class=s2>&quot;North America&quot;</span>, <span class=s2>&quot;Other&quot;</span><span class=o>)</span>
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>httpCategory</span><span class=o>=</span><span class=k>case</span><span class=o>(</span>status&gt;<span class=o>=</span><span class=m>200</span> AND status&lt;<span class=m>300</span>, <span class=s2>&quot;Success&quot;</span>, status&gt;<span class=o>=</span><span class=m>300</span> AND status&lt;<span class=m>400</span>, <span class=s2>&quot;Redirect&quot;</span>, status&gt;<span class=o>=</span><span class=m>400</span> AND status&lt;<span class=m>500</span>, <span class=s2>&quot;Client Error&quot;</span>, status&gt;<span class=o>=</span><span class=m>500</span>, <span class=s2>&quot;Server Error&quot;</span>, true<span class=o>()</span>, <span class=s2>&quot;default catch all other cases&quot;</span><span class=o>)</span>
<span class=c1># eval can be used as a Function with stats command to apply conditions</span>
<span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> stats count<span class=o>(</span>eval<span class=o>(</span>status&lt;<span class=m>300</span><span class=o>))</span> as <span class=s2>&quot;Success&quot;</span>, ...
</code></pre></div> </details> <p>Supported Functions see <a href=https://docs.splunk.com/Documentation/Splunk/8.1.2/SearchReference/CommonEvalFunctions target=_blank>docs page</a></p> <h5 id=eventstats>eventstats<a class=headerlink href=#eventstats title="Permanent link">&para;</a></h5> <p>Generates <strong>statistics</strong> for fields in searched events and save them as <strong>new fields</strong> in the results. Each event will have the SAME value for the statistics calculated.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined <span class=nv>action</span><span class=o>=</span>remove
<span class=p>|</span> chart sum<span class=o>(</span>price<span class=o>)</span> as lostSales by product_name
<span class=p>|</span> eventstats avg<span class=o>(</span>lostSales<span class=o>)</span> as averageLoss
<span class=p>|</span> where lostSales &gt; averageLoss
<span class=p>|</span> fields - averageLoss
<span class=p>|</span> sort -lostSales
</code></pre></div> </details> <p>Supported Functions see <a href=https://docs.splunk.com/Documentation/Splunk/8.1.2/SearchReference/CommonStatsFunctions target=_blank>docs page</a></p> <p>See also <a href=#streamstats><code>streamstats</code></a> command.</p> <h5 id=fieldformat>fieldformat<a class=headerlink href=#fieldformat title="Permanent link">&para;</a></h5> <p><strong>Format</strong> values WITHOUT changing characteristics of underlying values. In other words, only a format is specified when the value is displayed as outputs and the same field can <strong>still participate calculations</strong> as if their values are not changed.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined <span class=nv>product_name</span><span class=o>=</span>* <span class=nv>action</span><span class=o>=</span>purchase
<span class=p>|</span> stats sum<span class=o>(</span>price<span class=o>)</span> as total_list_price, sum<span class=o>(</span>sale_price<span class=o>)</span> as total_sale_price by product_name
<span class=p>|</span> fieldformat <span class=nv>total_list_price</span> <span class=o>=</span> <span class=s2>&quot;</span>$<span class=s2>&quot;</span> + tostring<span class=o>(</span>total_list_price<span class=o>)</span>
</code></pre></div> </details> <p>Supported Functions see <a href=https://docs.splunk.com/Documentation/Splunk/8.1.2/SearchReference/CommonEvalFunctions target=_blank>docs page</a>. Specifically look for Conversion Functions and Text Functions.</p> <h5 id=fields>fields<a class=headerlink href=#fields title="Permanent link">&para;</a></h5> <p><strong>Include or exclude</strong> fields from search results to limit the fields to display and also make search run faster.</p> <p><strong>Field extraction</strong> is one of the most <strong>costly</strong> parts of searching in Splunk. Eliminate unnecessary fields will improve search speed since field inclusion occurs BEFORE field extraction, while field exclusion happens AFTER field extraction.</p> <p>Internal fields like <em>raw</em> and <em>_time</em> will ALWAYS be extracted, but can also be removed from the search results using <code>fields</code>.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> fields status clientip <span class=c1># only include fields status and clientip</span>
<span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> fields - status clientip <span class=c1># to exclude fields status and clientip</span>
</code></pre></div> </details> <h5 id=fillnull>fillnull<a class=headerlink href=#fillnull title="Permanent link">&para;</a></h5> <p>Replaces any null values in your events. It by default fills NULL with <code>0</code> and it can be set with <code>value="something else"</code></p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> chart sum<span class=o>(</span>price<span class=o>)</span> over product_name by VendorCountry
<span class=p>|</span> fillnull
</code></pre></div> </details> <h5 id=foreach>foreach<a class=headerlink href=#foreach title="Permanent link">&para;</a></h5> <p>Run <strong>templated subsearches</strong> for each field in a specified list, and each row goes through the foreach command and subsearch calculation.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> timechart <span class=nv>span</span><span class=o>=</span>1h sum<span class=o>(</span>bytes<span class=o>)</span> as totalBytes by host
<span class=p>|</span> foreach www* <span class=o>[</span><span class=nb>eval</span> <span class=s1>&#39;&lt;&lt;FIELD&gt;&gt;&#39;</span> <span class=o>=</span> round<span class=o>(</span><span class=s1>&#39;&lt;&lt;FIELD&gt;&gt;&#39;</span>/<span class=o>(</span><span class=m>1024</span>*1024<span class=o>)</span>,2<span class=o>)]</span>
<span class=c1># &#39;&lt;&lt;FIELD&gt;&gt;&#39; refers to the value of the column_name</span>
<span class=c1># assume &#39;host&#39; gives values www1 www2 www3</span>
</code></pre></div> </details> <h5 id=join>join<a class=headerlink href=#join title="Permanent link">&para;</a></h5> <p><strong>Combine</strong> results of subsearch with outter search using <strong>common fields</strong>. It requires both searches to share <strong>at least one</strong> field in common.</p> <p>Two types of join:</p> <ul> <li><strong>inner join</strong> (default) - only return results from outter search that have matches in the subsearch</li> <li><strong>outer/left join</strong> - returns all results from the outter search and those have matches in the subsearch; can be specified with argument</li> </ul> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span><span class=s2>&quot;security&quot;</span> <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=nv>src_ip</span><span class=o>=</span><span class=m>10</span>.0.0.0/8 <span class=s2>&quot;Failed&quot;</span>
<span class=p>|</span> join src_ip
    <span class=o>[</span>search <span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>winauthentication_security <span class=nv>bcg_ip</span><span class=o>=</span>*
    <span class=p>|</span> dedup bcg_workstation
    <span class=p>|</span> rename bcg_ip as src_ip
    <span class=p>|</span> fields src_ip, bcg_workstation<span class=o>]</span>
<span class=p>|</span> stats count as access_attempts by user, dest, bcg_workstation
<span class=p>|</span> where access_attempts &gt; <span class=m>40</span>
<span class=p>|</span> sort - access_attempts
</code></pre></div> </details> <p>See also <a href=#union>union</a></p> <h5 id=lookup>lookup<a class=headerlink href=#lookup title="Permanent link">&para;</a></h5> <p>Invoke field value lookups.</p> <div class="admonition note"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code><span class=c1># http_status is the name of the lookup definition</span>
<span class=c1># code is one of the columns in the csv, and we have status in our event</span>
<span class=c1># defualt all fields in lookup table are returned except the input fields</span>
<span class=c1>#   specify OUTPUT to choose the fields added from the lookup</span>
<span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined NOT <span class=nv>status</span><span class=o>=</span><span class=m>200</span>
<span class=p>|</span> lookup http_status code as status,
    OUTPUT code as <span class=s2>&quot;HTTP Code&quot;</span>,
        description as <span class=s2>&quot;HTTP Description&quot;</span>
</code></pre></div> </div> <h5 id=makemv>makemv<a class=headerlink href=#makemv title="Permanent link">&para;</a></h5> <p>Create a <strong>multi-value</strong> field from an <strong>existing</strong> field and replace that field. It splits its values using some <strong>delimiter or regex</strong>.</p> <div class="admonition note"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>account_codes</span><span class=o>=</span>productId
<span class=p>|</span> makemv <span class=nv>delim</span><span class=o>=</span><span class=s2>&quot;-&quot;</span>, account_codes
<span class=p>|</span> dedup product_name
<span class=p>|</span> table product_name, productId, account_codes

<span class=c1># same results can be achieved by using regex and specifying capture groups</span>
<span class=p>|</span> makemv <span class=nv>tokenizer</span><span class=o>=</span><span class=s2>&quot;([A-Z]{2}|[A-Z]{1}[0-9]{2})&quot;</span>, account_codes
</code></pre></div> </div> <h5 id=multikv>multikv<a class=headerlink href=#multikv title="Permanent link">&para;</a></h5> <p><strong>Extract</strong> field values from data formatted as large and single events of <strong>tabular data</strong>. Each row becomes an event, header becomes the field names, and tabular data becomes values of the fields.</p> <p>Example of some data event suitable:</p> <div class=highlight><pre><span></span><code>Name     Age   Occupation
Josh     42    SoftwareEngineer
Francine 35    CEO
Samantha 22    ProjectManager
</code></pre></div> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>main <span class=nv>sourcetype</span><span class=o>=</span>netstat
<span class=p>|</span> multikv fields LocalAddress State filter LISTEN
<span class=p>|</span> rex <span class=nv>field</span><span class=o>=</span>LocalAddress <span class=s2>&quot;:(?P&lt;Listening_Port&gt;\d+)</span>$<span class=s2>&quot;</span>
<span class=p>|</span> dedup Listening_Port
<span class=p>|</span> table Listening_Port
</code></pre></div> </details> <h5 id=mvexpand>mvexpand<a class=headerlink href=#mvexpand title="Permanent link">&para;</a></h5> <p>Create <strong>separate event</strong> for <strong>each value</strong> contained in a multi-value field. It reates new events count as of the number of values in a multi-valued field and copy all other values to the new evnets.</p> <p>Best to remove unused fields before the <code>mvexpand</code> command.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>systems <span class=nv>sourcetype</span><span class=o>=</span>system_info
<span class=p>|</span> mvexpand ROOT_USERS
<span class=p>|</span> dedup SYSTE ROOT_USERS
<span class=p>|</span> stats list<span class=o>(</span>SYSTEM<span class=o>)</span> by ROOT_USERS
</code></pre></div> </details> <h5 id=rename>rename<a class=headerlink href=#rename title="Permanent link">&para;</a></h5> <p><strong>Rename</strong> one or more fields. After the rename, subsequent commands must use the new names otherwise operation won't have any effects.</p> <p>Note that after <code>rename</code> if a field name contains <strong>spaces</strong>, you need to use <strong>single quotes</strong> on the field name to refer to it in subsequent commands.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access* <span class=nv>status</span><span class=o>=</span><span class=m>200</span> <span class=nv>product_name</span><span class=o>=</span>*
<span class=p>|</span> table JESSIONID, product_name, price
<span class=p>|</span> rename JESSIONID as <span class=s2>&quot;User Session Id&quot;</span>,
        product_name as <span class=s2>&quot;Purchased Game&quot;</span>,
        price as <span class=s2>&quot;Purchase Price&quot;</span>
</code></pre></div> </details> <h5 id=rex>rex<a class=headerlink href=#rex title="Permanent link">&para;</a></h5> <p>Allow use regex capture groups to extract values at search time. By default, it uses <code>field=_raw</code> if not provided a field name to read from.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=s2>&quot;port&quot;</span>
<span class=p>|</span> rex <span class=s2>&quot;(?i) from (?P&lt;ipaddress&gt;[^ ]+)&quot;</span>
<span class=p>|</span> table ipaddress, src_port

<span class=nv>index</span><span class=o>=</span>network <span class=nv>sourcetype</span><span class=o>=</span>cisco_esa
<span class=p>|</span> where isnotnull<span class=o>(</span>mailfrom<span class=o>)</span>
<span class=p>|</span> rex <span class=nv>field</span><span class=o>=</span>mailfrom <span class=s2>&quot;@(?P&lt;mail_domain&gt;\S+)&quot;</span>
</code></pre></div> </details> <p>Better examples can be found at <a href=https://docs.splunk.com/Documentation/Splunk/8.1.2/SearchReference/Rex#Examples target=_blank>doc page</a></p> <h5 id=search>search<a class=headerlink href=#search title="Permanent link">&para;</a></h5> <p>Add search terms further <strong>down the pipeline</strong>. In fact, the part before the first <code>|</code> is itself a <code>search</code> command.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>network <span class=nv>sourcetype</span><span class=o>=</span>cisco_wsa_squid <span class=nv>usage</span><span class=o>=</span>Violation
<span class=p>|</span> stats count<span class=o>(</span>usage<span class=o>)</span> as Visits by cs_username
<span class=p>|</span> search Visits &gt; <span class=m>1</span>
</code></pre></div> </details> <h5 id=sort>sort<a class=headerlink href=#sort title="Permanent link">&para;</a></h5> <p>Organize the results <strong>sorted</strong> by some fields.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> table Vendor product_name sale_price
<span class=p>|</span> sort - sale_price Vendor
<span class=c1># the &#39;-&#39; here affects all fields</span>
<span class=p>|</span> sort -sale_price Vendor
<span class=c1># sort-decending will only affect sale_price while Vendor is sorted ascending</span>
<span class=p>|</span> sort -sale_price Vendor <span class=nv>limit</span><span class=o>=</span><span class=m>20</span>
<span class=c1># will also limit the results for the first twenty in sorted order.</span>
</code></pre></div> </details> <h5 id=spath>spath<a class=headerlink href=#spath title="Permanent link">&para;</a></h5> <p>Extracts info from <strong>semi-structured data</strong> (such as xml, json) and store in fields. It by default uses <code>input=_raw</code>, if not provided a field name to read from.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>systems <span class=nv>sourcetype</span><span class=o>=</span>system_info_xml
<span class=p>|</span> spath <span class=nv>path</span><span class=o>=</span>event.systeminfo.cpu.percent <span class=nv>output</span><span class=o>=</span>CPU

<span class=c1># working with json, values in array specified with {}</span>
<span class=nv>index</span><span class=o>=</span>systems <span class=nv>sourcetype</span><span class=o>=</span>system_info_json
<span class=p>|</span> spath <span class=nv>path</span><span class=o>=</span>CPU_CORES<span class=o>{}</span>.idle <span class=nv>output</span><span class=o>=</span>CPU_IDLE
<span class=p>|</span> stats avg<span class=o>(</span>CPU_IDLE<span class=o>)</span> by SYSTEM

<span class=c1># spath Function</span>
<span class=nv>index</span><span class=o>=</span>hr <span class=nv>sourcetype</span><span class=o>=</span>HR_DB
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>RFID</span><span class=o>=</span>spath<span class=o>(</span>Access, <span class=s2>&quot;rfid.chip&quot;</span><span class=o>)</span>, <span class=nv>Location</span><span class=o>=</span>spath<span class=o>(</span>Access, <span class=s2>&quot;rfid.location&quot;</span><span class=o>)</span> 
<span class=p>|</span> table Name, Access, RFID, Location
</code></pre></div> </details> <p>Better examples see <a href=https://docs.splunk.com/Documentation/Splunk/8.1.2/SearchReference/Spath target=_blank>doc page</a></p> <h5 id=streamstats>streamstats<a class=headerlink href=#streamstats title="Permanent link">&para;</a></h5> <p>Aggregates statistics to your searched events as Splunk sees the events in <strong>time</strong> in a <strong>streaming</strong> manner. In other words, it calculates statistics for each event <strong>cumulatively</strong> at the time the event is seen.</p> <p>Three important arguments to know:</p> <ul> <li><strong>current</strong> - setting to 'f' tells Splunk to only use the field values from previous events when performing statistical function</li> <li><strong>window</strong> - setting to N tells Splunk to only calculate previous N events at a time; default 0 means uses all previous events</li> <li><strong>time_window</strong> - setting to a time span to only calculate events happen in every that time span; with this function, events must be sorted by time</li> </ul> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined <span class=nv>action</span><span class=o>=</span>purchase <span class=nv>status</span><span class=o>=</span><span class=m>200</span>
<span class=p>|</span> stats sum<span class=o>(</span>price<span class=o>)</span> as orderAmount by JESSIONID
<span class=p>|</span> sort _time
<span class=p>|</span> streamstats avg<span class=o>(</span>orderAmount<span class=o>)</span> as averageOrder <span class=nv>current</span><span class=o>=</span>f <span class=nv>window</span><span class=o>=</span><span class=m>20</span>
<span class=c1># for each event, calculate the average from the previous 20 events&#39; orderAmount field</span>
</code></pre></div> </details> <h5 id=table>table<a class=headerlink href=#table title="Permanent link">&para;</a></h5> <p>Specify fields kept in the results and retains the data in a <strong>tabular</strong> format. Fields appears in the order specified to the command.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> table status clientip
</code></pre></div> </details> <h5 id=transaction>transaction<a class=headerlink href=#transaction title="Permanent link">&para;</a></h5> <p><strong>Transaction</strong> is any group of <strong>related events</strong> for a <strong>time span</strong> which can come from multiple applications or hosts. Events should be in a reversed chronological order before running this command.</p> <p><code>transaction</code> command takes in one or multiple fields to make transactions, and creates two fields in the raw event: <code>duration</code> (time between the first and last event) and <code>eventcount</code> (number of events)</p> <p><code>transaction</code> limits 1000 events per transaction by default and is an expensive command. Use it only when it has greater value than what you can do with <code>stats</code> command.</p> <p>Use <code>keepevicted=true</code> argument to keep incomplete transactions in results and <code>closed_txn</code> field will be added to indicate transactions incomplete.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> transaction clientip <span class=nv>startswith</span><span class=o>=</span><span class=nv>action</span><span class=o>=</span><span class=s2>&quot;addtocart&quot;</span> <span class=nv>endswith</span><span class=o>=</span><span class=nv>action</span><span class=o>=</span><span class=s2>&quot;purchase&quot;</span> <span class=nv>maxspan</span><span class=o>=</span>1h <span class=nv>maxpause</span><span class=o>=</span>30m
<span class=c1># startswith and endswith should be valid search strings</span>

<span class=c1># compare the two searches</span>
<span class=c1># using transaction</span>
<span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> transaction JESSIONID
<span class=p>|</span> where duration &gt; <span class=m>0</span>
<span class=p>|</span> stats avg<span class=o>(</span>duration<span class=o>)</span> as avgd, avg<span class=o>(</span>eventcount<span class=o>)</span> as avgc
<span class=p>|</span> <span class=nb>eval</span> <span class=s2>&quot;Average Time On Site&quot;</span><span class=o>=</span>round<span class=o>(</span>avgd, <span class=m>0</span><span class=o>)</span>, <span class=s2>&quot;Average Page Views&quot;</span><span class=o>=</span>round<span class=o>(</span>avgc, <span class=m>0</span><span class=o>)</span>
<span class=p>|</span> table <span class=s2>&quot;Average Time On Site&quot;</span>, <span class=s2>&quot;Average Page Views&quot;</span>
<span class=c1># using stats</span>
<span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> fields JESSIONID
<span class=p>|</span> stats range<span class=o>(</span>_time<span class=o>)</span> as duration, count as eventcount by JESSIONID
<span class=p>|</span> where duration &gt; <span class=m>0</span>
<span class=p>|</span> stats avg<span class=o>(</span>duration<span class=o>)</span> as avgd, avg<span class=o>(</span>eventcount<span class=o>)</span> as avgc
<span class=p>|</span> <span class=nb>eval</span> <span class=s2>&quot;Average Time On Site&quot;</span><span class=o>=</span>round<span class=o>(</span>avgd, <span class=m>0</span><span class=o>)</span>, <span class=s2>&quot;Average Page Views&quot;</span><span class=o>=</span>round<span class=o>(</span>avgc, <span class=m>0</span><span class=o>)</span>
<span class=p>|</span> table <span class=s2>&quot;Average Time On Site&quot;</span>, <span class=s2>&quot;Average Page Views&quot;</span>
</code></pre></div> </details> <p><code>transaction</code> is a very expensive operation. To build a transaction, all events data is searched and required, and is done on the Search Head. Some use cases can also be achieved by <code>stats</code> command.</p> <h5 id=union>union<a class=headerlink href=#union title="Permanent link">&para;</a></h5> <p><strong>Combine</strong> search results from two or more <strong>datasets</strong> into one. Datasets can be: saved searches, inputlookups, data models, subsearches.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=p>|</span> union 
    datamoel:Buttercup_Games_Online_Sales.successful_purchase,
    <span class=o>[</span>search <span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales<span class=o>]</span>
<span class=p>|</span> table sourcetype, product_name
</code></pre></div> </details> <p>See also <a href=#join>join</a></p> <h5 id=untable>untable<a class=headerlink href=#untable title="Permanent link">&para;</a></h5> <p>Does the opposite of <a href=#xyseries><code>xyseries</code></a>, for which it takes chartable and tabular data then format it similar to stats output.</p> <p>Good when need to further extract from, and manipulate values after using commands that result in tabular data.</p> <p>Syntax <code>| untable row-field, label-field, data-field</code> produces 3-column results</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales <span class=o>(</span>VendorID &gt;<span class=o>=</span> <span class=m>9000</span><span class=o>)</span>
<span class=p>|</span> chart count as prod_count by product_name, VendorCountry <span class=nv>limit</span><span class=o>=</span><span class=m>5</span> <span class=nv>useother</span><span class=o>=</span>f 
<span class=p>|</span> untable product_name, VendorCountry, prod_count
<span class=p>|</span> eventstats max<span class=o>(</span>prod_count<span class=o>)</span> as max by VendorCountry
<span class=p>|</span> where <span class=nv>prod_count</span><span class=o>=</span>max
<span class=p>|</span> stats list<span class=o>(</span>product_name<span class=o>)</span>, list<span class=o>(</span>prod_count<span class=o>)</span> by VendorCountry
</code></pre></div> </details> <h5 id=where>where<a class=headerlink href=#where title="Permanent link">&para;</a></h5> <p>Filter events to ONLY keep the results that <strong>evaluate as true</strong>.</p> <p>Try use <code>search</code> whenever you can rather than <code>where</code> as it is more efficient this way.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>network <span class=nv>sourcetype</span><span class=o>=</span>cisco_wsa_squid <span class=nv>usage</span><span class=o>=</span>Violation
<span class=p>|</span> stats count<span class=o>(</span>eval<span class=o>(</span><span class=nv>usage</span><span class=o>=</span><span class=s2>&quot;Personal&quot;</span><span class=o>))</span> as Personal, count<span class=o>(</span>eval<span class=o>(</span><span class=nv>usage</span><span class=o>=</span><span class=s2>&quot;Business&quot;</span><span class=o>))</span> as Business by username
<span class=p>|</span> where Personal &gt; Business AND username!<span class=o>=</span><span class=s2>&quot;lsagers&quot;</span>
<span class=p>|</span> sort -Personal
</code></pre></div> </details> <p>Supported Functions see <a href=https://docs.splunk.com/Documentation/Splunk/8.1.2/SearchReference/CommonEvalFunctions target=_blank>docs page</a>. <code>where</code> shared many of the <code>eval</code> Functions.</p> <h5 id=xyseries>xyseries<a class=headerlink href=#xyseries title="Permanent link">&para;</a></h5> <p>Convert <strong>statistical results</strong> into a <strong>tabular</strong> format suitable for visualizations. Useful for additional process after initial statistical data is returned.</p> <p>Syntax <code>| xyseries row-field, column-field, data-field</code> produces n+1 column result, where n is number of distinct values in column-field.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> bin _time <span class=nv>span</span><span class=o>=</span>1h
<span class=p>|</span> stats sum<span class=o>(</span>bytes<span class=o>)</span> as totalBytes by _time, host
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>MB</span> <span class=o>=</span> round<span class=o>(</span>totalBytes/<span class=o>(</span><span class=m>1024</span>*1024<span class=o>)</span>,2<span class=o>)</span>
<span class=p>|</span> xyseries _time, host, MB

<span class=c1># transforms </span>
_time<span class=p>|</span>host<span class=p>|</span>MB
-----<span class=p>|</span>----<span class=p>|</span>--
<span class=m>12</span>:00<span class=p>|</span>www1<span class=p>|</span><span class=m>12</span>
<span class=m>12</span>:00<span class=p>|</span>www2<span class=p>|</span><span class=m>11</span>
<span class=m>12</span>:00<span class=p>|</span>www3<span class=p>|</span><span class=m>7</span>
...<span class=p>|</span>...<span class=p>|</span>...
<span class=c1># into</span>
_time<span class=p>|</span>www1<span class=p>|</span>www2<span class=p>|</span>www3
-----<span class=p>|</span>----<span class=p>|</span>----<span class=p>|</span>----
<span class=m>12</span>:00<span class=p>|</span><span class=m>12</span><span class=p>|</span><span class=m>11</span><span class=p>|</span><span class=m>7</span>
...<span class=p>|</span>...<span class=p>|</span>...<span class=p>|</span>...
</code></pre></div> </details> <p>See also <a href=#untable><code>untable</code></a> command.</p> <h4 id=transforming-commands>Transforming Commands<a class=headerlink href=#transforming-commands title="Permanent link">&para;</a></h4> <h5 id=chart>chart<a class=headerlink href=#chart title="Permanent link">&para;</a></h5> <p>Organize the data as a regular or two-way <strong>chart table</strong>. To get a two-way table, you need to provide <strong>three fields</strong> used as table row value, table column value, and table data value. A common pattern is <code>chart &lt;function(data_field)&gt; over &lt;row_field&gt; by &lt;column_field&gt;</code></p> <p><code>chart</code> is limited to display <strong>10 columns by default</strong>, others will show up as an "other" column in the chart visualization. The 'other' column can be turned off by passing an argument <code>useother=f</code>.</p> <p>Use <code>limit=5</code> to control the <strong>max number of columns</strong> to display, or <code>limit=0</code> to display all columns.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined status&gt; <span class=m>299</span>
<span class=p>|</span> chart count over status by host
<span class=c1># if more than one field is supplied to `by` clause without `over` clause</span>
<span class=c1># the first field is used as with a `over` clause</span>
<span class=c1># this has the same effect as above command</span>
<span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined status&gt; <span class=m>299</span>
<span class=p>|</span> chart count by status, host
</code></pre></div> </details> <p>Supported Functions see <a href=https://docs.splunk.com/Documentation/Splunk/8.1.2/SearchReference/CommonStatsFunctions target=_blank>docs page</a></p> <h5 id=fieldsummary>fieldsummary<a class=headerlink href=#fieldsummary title="Permanent link">&para;</a></h5> <p>Calculate summary statistics for fields in your events.</p> <p>For example, given a search <code>index=web | fieldsummary</code> it gives insights of the "count, distinct_count, is_exact, min/max/mean/stdev, numberic_count, values" for each field.</p> <p>If field names are provided, then only do summary for those fields provided.</p> <h5 id=rare>rare<a class=headerlink href=#rare title="Permanent link">&para;</a></h5> <p>Shows the <strong>least common</strong> values of a field set. It is the opposite of <code>top</code> Command and accepts the same set of clauses.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> rare Vendor <span class=nv>limit</span><span class=o>=</span><span class=m>5</span> <span class=nv>countfield</span><span class=o>=</span><span class=s2>&quot;Number of Sales&quot;</span> <span class=nv>showperc</span><span class=o>=</span>False <span class=nv>useother</span><span class=o>=</span>True
</code></pre></div> </details> <h5 id=stats>stats<a class=headerlink href=#stats title="Permanent link">&para;</a></h5> <p>Produce <strong>statistics</strong> of our search results and need to use functions to produce stats.</p> <p>The <code>eval</code> Function is handy to apply quick and concise <strong>conditional filtering</strong> to limit the statistics calculated from desired data.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> stats count as <span class=s2>&quot;Total Sells By Vendors&quot;</span> by product_name, categoryid
<span class=c1># apply conditions using eval Function</span>
<span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> stats count<span class=o>(</span>eval<span class=o>(</span>status&lt;<span class=m>300</span><span class=o>))</span> as <span class=s2>&quot;Success&quot;</span>, ...
</code></pre></div> </details> <p>Supported Functions see <a href=https://docs.splunk.com/Documentation/Splunk/8.1.2/SearchReference/CommonStatsFunctions target=_blank>docs page</a></p> <h5 id=timechart>timechart<a class=headerlink href=#timechart title="Permanent link">&para;</a></h5> <p>Performs stats <strong>aggregations against time</strong>, and time is always the x-axis. Like <code>chart</code>, except only one value can be supplied to the <code>by</code> clause</p> <p>This command determines the time intervals from the time range selected, and it can be changed by using an argument <code>span</code>.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> timechart count by product_name <span class=nv>span</span><span class=o>=</span>1m
</code></pre></div> </details> <p>Supported Functions see <a href=https://docs.splunk.com/Documentation/Splunk/8.1.2/SearchReference/CommonStatsFunctions target=_blank>docs page</a></p> <h5 id=timewrap>timewrap<a class=headerlink href=#timewrap title="Permanent link">&para;</a></h5> <p>Compare the data from <code>timechart</code> further over an older time range.</p> <p>Specify a time period to apply to the result of a timechart command, then display series of data based on this time periods, with the X axis display the increments of this period and the Y axis display the aggregated values over that period.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales <span class=nv>product_name</span><span class=o>=</span><span class=s2>&quot;Dream Crusher&quot;</span>
<span class=p>|</span> timechart <span class=nv>span</span><span class=o>=</span>1d sum<span class=o>(</span>price<span class=o>)</span> by product_name
<span class=p>|</span> timewrap 7d
<span class=p>|</span> rename _time as Day
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>Day</span><span class=o>=</span>strftime<span class=o>(</span>Day, <span class=s2>&quot;%A&quot;</span><span class=o>)</span>
</code></pre></div> </details> <h5 id=top>top<a class=headerlink href=#top title="Permanent link">&para;</a></h5> <p>Finds the <strong>most common</strong> values of given field(s) in a result set and automatically returns count and percent columns. By default displays top 10 and the count can be set with <code>limit=n</code>; while <code>limit=0</code> yields all results.</p> <p>Top Command Clauses: limit=int countfield=string percentfield=string showcount=True/False showperc=True/False showother=True/False otherstr=string</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> top Vendor product_name <span class=nv>limit</span><span class=o>=</span><span class=m>5</span>
<span class=c1># top command also supports results grouping by fields</span>
<span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> top product_name by Vendor <span class=nv>limit</span><span class=o>=</span><span class=m>3</span> <span class=nv>countfield</span><span class=o>=</span><span class=s2>&quot;Number of Sales&quot;</span> <span class=nv>showperc</span><span class=o>=</span>False
</code></pre></div> </details> <h4 id=generating-commands>Generating Commands<a class=headerlink href=#generating-commands title="Permanent link">&para;</a></h4> <p>Commands that generates events.</p> <h5 id=datamodel>datamodel<a class=headerlink href=#datamodel title="Permanent link">&para;</a></h5> <p>Display the structure of data models and <strong>search</strong> against them.</p> <p>It accepts first argument as datamodel name and the second argument as the object name under than model. Add <code>search</code> to enable search on the data model data.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=p>|</span> datamodel Buttercup_Games_Online_Sales http_request search
<span class=p>|</span> search http_request.action<span class=o>=</span>purchase
</code></pre></div> </details> <h5 id=inputlookup>inputlookup<a class=headerlink href=#inputlookup title="Permanent link">&para;</a></h5> <p>Return values from a lookup table.</p> <p>Useful to use it in a <strong>subsearch</strong> to narrow down the set of events to search based on the values in the lookup table.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
    <span class=o>[</span><span class=p>|</span> inputlookup API_Tokens
    <span class=p>|</span> table VendorID <span class=o>]</span>
    <span class=c1># only take one column to use as filter; its values will be OR-ed together</span>
    <span class=c1># can add &#39;NOT before the subsearch to exclude those vendor ids</span>
<span class=p>|</span> top Vendor product_name <span class=nv>limit</span><span class=o>=</span><span class=m>5</span>
</code></pre></div> </details> <h5 id=makeresults>makeresults<a class=headerlink href=#makeresults title="Permanent link">&para;</a></h5> <p>Creates a defined number of search results, good for creating sample data for testing searches or building values to be used in searches.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=c1># must starts search with pipe</span>
<span class=p>|</span> makeresults
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>tomorrow</span><span class=o>=</span>relative_time<span class=o>(</span>now<span class=o>()</span>, <span class=s2>&quot;+1d&quot;</span><span class=o>)</span>,
    <span class=nv>tomorrow</span><span class=o>=</span>strftime<span class=o>(</span>tomorrow, <span class=s2>&quot;%A&quot;</span><span class=o>)</span>,
    <span class=nv>result</span><span class=o>=</span><span class=k>if</span><span class=o>(</span><span class=nv>tomorrow</span><span class=o>=</span><span class=s2>&quot;Saturday&quot;</span> OR <span class=nv>tomorrow</span><span class=o>=</span><span class=s2>&quot;Sunday&quot;</span>, <span class=s2>&quot;Huzzah!&quot;</span>, <span class=s2>&quot;Boo!&quot;</span><span class=o>)</span>, 
    <span class=nv>msg</span><span class=o>=</span>printf<span class=o>(</span><span class=s2>&quot;Tomorrow is %s, %s&quot;</span>, tomorrow, result<span class=o>)</span>
</code></pre></div> </details> <h5 id=tstats>tstats<a class=headerlink href=#tstats title="Permanent link">&para;</a></h5> <p>Get statistical info from <strong>tsidx files</strong>.</p> <p>Splunk will do full search if the search ran is outside of the summary range of the accelerated data model. Limit search to summary range with <code>summariesonly</code> argument.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=p>|</span> tstats count as <span class=s2>&quot;count&quot;</span> from <span class=nv>datamodel</span><span class=o>=</span>linux_server_access where web_server_access.src_ip<span class=o>=</span><span class=m>10</span>.* web_server_access.action<span class=o>=</span>failure by web_server_access.src_ip, web_server_access.user <span class=nv>summariesonly</span><span class=o>=</span>t <span class=nv>span</span><span class=o>=</span>1d
<span class=p>|</span> where count &gt; <span class=m>300</span>
<span class=p>|</span> sort -count
</code></pre></div> </details> <h4 id=special-commands>Special Commands<a class=headerlink href=#special-commands title="Permanent link">&para;</a></h4> <p>Splunk has commands to extract <strong>geographical info</strong> from data and display them in a good format.</p> <h5 id=gauge>gauge<a class=headerlink href=#gauge title="Permanent link">&para;</a></h5> <p>Show a field value in a gauge.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> stats sum<span class=o>(</span>sale<span class=o>)</span> as total
<span class=p>|</span> gauge total <span class=m>0</span> <span class=m>3000</span> <span class=m>6000</span> <span class=m>7000</span>
</code></pre></div> </details> <h5 id=geom>geom<a class=headerlink href=#geom title="Permanent link">&para;</a></h5> <p>Adds fields with geographical data structures matching polygons on a <strong>choropleth map visulization</strong>.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> stats count as Sales by VendorCountry
<span class=p>|</span> geom geo_countries <span class=nv>featureIdField</span><span class=o>=</span>VendorCountry
<span class=c1># the field `VendorCountry` must map back a country name in the featureCollection</span>
</code></pre></div> </details> <h5 id=geostats>geostats<a class=headerlink href=#geostats title="Permanent link">&para;</a></h5> <p>Aggregates <strong>geographical</strong> data for use on a <strong>map visualization</strong>.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>sales <span class=nv>sourcetype</span><span class=o>=</span>vendor_sales
<span class=p>|</span> geostats <span class=nv>latfield</span><span class=o>=</span>VendorLatitude <span class=nv>longfield</span><span class=o>=</span>VendorLongitude count by product_name <span class=nv>globallimit</span><span class=o>=</span><span class=m>4</span>
</code></pre></div> </details> <h5 id=iplocation>iplocation<a class=headerlink href=#iplocation title="Permanent link">&para;</a></h5> <p>Lookup <strong>IP address</strong> and add <strong>location information</strong> to events. Data like <code>city, country, region, latitude, and longitude</code> can be added to events that include external IP addresses. Not all location info might be available depends on the IP.</p> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined <span class=nv>action</span><span class=o>=</span>purchase <span class=nv>status</span><span class=o>=</span><span class=m>200</span>
<span class=p>|</span> iplocation clientip
</code></pre></div> </details> <h5 id=trendline>trendline<a class=headerlink href=#trendline title="Permanent link">&para;</a></h5> <p>Compute <strong>moving averages</strong> of field values, gives a good understanding of how the data is <strong>trending over time</strong>.</p> <p>Three trendtypes (used as Functions by <code>trendline</code> command):</p> <ul> <li><strong>simple moving average</strong> (<code>sma</code>): compute the sum of data points over a period of time</li> <li><strong>expoential moving average</strong> (<code>ema</code>): assigns a heavier weighting to more current data points</li> <li><strong>weighted moving average</strong> (<code>wma</code>): assigns a heavier weighting to more current data points</li> </ul> <details class=note><summary>Example</summary><div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined
<span class=p>|</span> timechart sum<span class=o>(</span>price<span class=o>)</span> as sales
<span class=p>|</span> trendline wma2<span class=o>(</span>sales<span class=o>)</span> as trend ema10<span class=o>(</span>bars<span class=o>)</span>
<span class=c1># &#39;2&#39; here means do calculation per 2 events</span>
<span class=c1># this number can be between 2 and 10000</span>
</code></pre></div> </details> <h4 id=spl-best-practices>SPL Best Practices<a class=headerlink href=#spl-best-practices title="Permanent link">&para;</a></h4> <div class="admonition note"> <p class=admonition-title>'key!=value' vs 'NOT key=value'</p> <p>A small difference: <code>key!=value</code> only includes entries where key is not NULL, while <code>NOT key=value</code> includes entries even when the key does NOT exitst on those events entries.</p> </div> <div class="admonition note"> <p class=admonition-title>use the 'IN' operator</p> <p>Instead of doing <code>(key=value1 OR key=value2 OR key=value3)</code>, more viewable syntax: <code>key IN ("value1", "value2", "value3")</code></p> </div> <div class="admonition note"> <p class=admonition-title>use 'index' 'source' 'host' early</p> <p>These fields are extracted <strong>when data was indexed</strong> and stored and won't take time to extract at search time. It is best to use these fields early in the search to limit the data to be further processed.</p> </div> <div class="admonition note"> <p class=admonition-title>use 'inclusion' over 'exclusion'</p> <p>Searching for exactly "something" is better than searching for "NOT something"</p> </div> <div class="admonition note"> <p class=admonition-title>specify time in the query when appropriate</p> <p>Use relative time <code>earliest=-2h latest=-1h</code> or absolute time <code>earliest=01/08/2018:12:00:00</code> in the search. Use <code>@</code> to round down time to the nearest 0 in the unit used <code>earliest=-2@h</code></p> </div> <div class="admonition note"> <p class=admonition-title>time is the most efficient way to improve queries search time</p> <p>Splunk stores data in buckets (directories) containing raw data and indexing data, and buckets have maximum size and maximum time span.</p> <p>Three kinds of searchable buckets: hot, warm, cold. Access speed: <strong>hot</strong> (read/write, very fast, like memory) &gt; <strong>warm</strong> (slow, read-only, slower medium) &gt; <strong>cold</strong> (very slow, read-only, cheap and stable medium).</p> <p>When search is run, it go look for the right bucket to open, uncompress the raw data and search the contents inside.</p> <p>The <strong>order of effectiveness</strong> in filtering data: <code>time &gt; index &gt; source &gt; host &gt; sourcetype</code></p> </div> <div class="admonition note"> <p class=admonition-title>create different indexes to group data</p> <p>Having <strong>specialized</strong> indexes helps make Splunk searches faster and more efficient.</p> </div> <div class="admonition note"> <p class=admonition-title>be careful when using wildcards</p> <p>Using wildcard at the <strong>beginning of a word</strong> cause Splunk to search all events which causes <strong>degradation in performance</strong>.</p> <p>Using wildcard in the <strong>middle of a string</strong> might cause <strong>inconsistent</strong> results due to the way Splunk indexes data that contains punctuation</p> <p>Best to make search as specific as possible, and only use wildcards at the <strong>end of a word</strong>, say <code>status=failure</code> instead of <code>status=fail*</code></p> </div> <div class="admonition note"> <p class=admonition-title>save search as reports using fast mode</p> <p><strong>Fast mode</strong> emphasis on <strong>performance</strong> and returns <strong>only essential data</strong>.</p> <p><strong>Verbose mode</strong> emphasizes <strong>completeness</strong> and returns <strong>all fields and event data</strong>.</p> <p><strong>Smart mode</strong> weights tradeoffs and returns the best results for the search being run.</p> </div> <div class="admonition note"> <p class=admonition-title>use 'fields' command to extract only the fields you need</p> <p>Doing so as <strong>early in the search</strong> as possible will let each indexer extract less fields, pack and return data back faster.</p> </div> <div class="admonition note"> <p class=admonition-title>consult Job Inspector to know the performance of the searches</p> <p>It tells you which phase of the search <strong>took the most time</strong>. Any search that has not expired can be inspected by this tool. Read more about <a href=https://docs.splunk.com/Documentation/Splunk/latest/Search/ViewsearchjobpropertieswiththeJobInspector target=_blank>Job Inspector</a></p> </div> <div class="admonition note"> <p class=admonition-title>avoid using subsearches when possible</p> <p>Compare the follow two queries, which returns the same results but the second one is significantly faster:</p> <div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>winauthentication_security <span class=o>(</span><span class=nv>EventCode</span><span class=o>=</span><span class=m>4624</span> OR <span class=nv>EventCode</span><span class=o>=</span><span class=m>540</span><span class=o>)</span> NOT
    <span class=o>[</span>search <span class=nv>sourcetype</span><span class=o>=</span>history_access
    <span class=p>|</span> rename Username as User
    <span class=p>|</span> fields User<span class=o>]</span>
<span class=p>|</span> stats count by User
<span class=p>|</span> table User

<span class=nv>index</span><span class=o>=</span>security <span class=o>(</span><span class=nv>sourcetype</span><span class=o>=</span>winauthentication_security <span class=o>(</span><span class=nv>EventCode</span><span class=o>=</span><span class=m>4624</span> OR <span class=nv>EventCode</span><span class=o>=</span><span class=m>540</span><span class=o>))</span> OR <span class=o>(</span><span class=nv>sourcetype</span><span class=o>=</span>history_access<span class=o>)</span>
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>badge_access</span><span class=o>=</span><span class=k>if</span><span class=o>(</span><span class=nv>sourcetype</span><span class=o>=</span><span class=s2>&quot;history_access&quot;</span>, <span class=m>1</span>, <span class=m>0</span><span class=o>)</span>
<span class=p>|</span> stats max<span class=o>(</span>badge_access<span class=o>)</span> as badged_in by Username
<span class=p>|</span> where <span class=nv>badged_in</span><span class=o>=</span><span class=m>0</span>
<span class=p>|</span> fields Username
</code></pre></div> </div> <h4 id=spl-tricks>SPL Tricks<a class=headerlink href=#spl-tricks title="Permanent link">&para;</a></h4> <div class="admonition note"> <p class=admonition-title>let subsearch limit main search's time range</p> <p>Let the subsearch output a table with a single row and columns <code>earliest</code> and <code>latest</code></p> </div> <div class="admonition note"> <p class=admonition-title>use Functions count and list in conjunction make readable results</p> <p><code>list</code> returns a list of values of a field as a multi-value result (will be put in one cell in the result table), by default up to 100 values</p> <div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined <span class=nv>action</span><span class=o>=</span>purchase <span class=nv>status</span><span class=o>=</span><span class=m>200</span>
<span class=p>|</span> stats count by host, product_name
<span class=p>|</span> sort -count
<span class=p>|</span> stats list<span class=o>(</span>product_name<span class=o>)</span> as <span class=s2>&quot;Product Name&quot;</span>, list<span class=o>(</span>count<span class=o>)</span> as Count, sum<span class=o>(</span>count<span class=o>)</span> as total by host
<span class=p>|</span> sort -total
<span class=p>|</span> fields - total
</code></pre></div> </div> <div class="admonition note"> <p class=admonition-title>use Functions strftime, strptime, relative_time to extract/convert time</p> <div class=highlight><pre><span></span><code><span class=c1># convert a time value into its timestamp representation</span>
<span class=nv>index</span><span class=o>=</span>manufacture <span class=nv>sourcetype</span><span class=o>=</span>3dPrinterData
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>boot_ts</span><span class=o>=</span>strptime<span class=o>(</span>boot_time, <span class=s2>&quot;%b/%d/%y %H:%M:%S&quot;</span><span class=o>)</span>, <span class=nv>days_since_boot</span><span class=o>=</span>round<span class=o>((</span>now<span class=o>()</span>-boot_ts<span class=o>)</span>/86400<span class=o>)</span>
<span class=p>|</span> stats values<span class=o>(</span>days_since_boot<span class=o>)</span> as <span class=s2>&quot;uptime_days&quot;</span> by printer_name

<span class=c1># extract parts from the time field</span>
<span class=nv>sourcetype</span><span class=o>=</span>foo
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>date_hour</span><span class=o>=</span>strftime<span class=o>(</span>_time, <span class=s2>&quot;%H&quot;</span><span class=o>)</span>
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>date_wday</span><span class=o>=</span>strftime<span class=o>(</span>_time, <span class=s2>&quot;%w&quot;</span><span class=o>)</span>
<span class=p>|</span> search date_hour&gt;<span class=o>=</span><span class=m>9</span> date_hour&lt;<span class=o>=</span><span class=m>18</span> date_wday&gt;<span class=o>=</span><span class=m>1</span> date_wday&lt;<span class=o>=</span><span class=m>5</span>

<span class=c1># push time forward or backwards from a timestamp</span>
<span class=nv>index</span><span class=o>=</span>manufacture <span class=nv>sourcetype</span><span class=o>=</span>3dPrinterData
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>boot_ts</span><span class=o>=</span>strptime<span class=o>(</span>boot_time, <span class=s2>&quot;%b/%d/%y %H:%M:%S&quot;</span><span class=o>)</span>, <span class=nv>rt</span><span class=o>=</span>relative_time<span class=o>(</span>boot_ts, <span class=s2>&quot;+30d&quot;</span><span class=o>)</span>, <span class=nv>reboot</span><span class=o>=</span>strftime<span class=o>(</span>rt, <span class=s2>&quot;%x&quot;</span><span class=o>)</span>
<span class=p>|</span> stats values<span class=o>(</span>reboot<span class=o>)</span> as <span class=s2>&quot;day_to_reboot&quot;</span> by printer_name
</code></pre></div> <p>A list of time format codes can be found <a href=https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes target=_blank>here</a></p> </div> <div class="admonition note"> <p class=admonition-title>use Functions lower/upper, substr, replace, len, for text manipulation</p> <div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>hr
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>Organization</span><span class=o>=</span>lower<span class=o>(</span>Organization<span class=o>)</span>, <span class=nv>Is_In_Marketing</span><span class=o>=</span><span class=k>if</span><span class=o>(</span><span class=nv>Organization</span><span class=o>==</span><span class=s2>&quot;marketing&quot;</span>, <span class=s2>&quot;Yes&quot;</span>, <span class=s2>&quot;No&quot;</span><span class=o>)</span>
<span class=p>|</span> table Name, Organization, Is_In_Marketing

<span class=nv>index</span><span class=o>=</span>hr
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>Group</span><span class=o>=</span>substr<span class=o>(</span>Employee_ID, <span class=m>1</span>, <span class=m>2</span><span class=o>)</span>, <span class=nv>Location</span><span class=o>=</span>substr<span class=o>(</span>Employee_ID, -2<span class=o>)</span>
<span class=p>|</span> table Name, Group, Location

<span class=nv>index</span><span class=o>=</span>hr
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>Employee_Details</span><span class=o>=</span>replace<span class=o>(</span>Employee_ID, <span class=s2>&quot;^([A-Z]+)_(\d+)_([A-Z]+)&quot;</span>, <span class=s2>&quot;Employee #\2 is a \1 in \3&quot;</span><span class=o>)</span>
</code></pre></div> </div> <div class="admonition note"> <p class=admonition-title>create empty column to help display data compared in bar chart</p> <div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=s2>&quot;fail*&quot;</span> <span class=nv>earliest</span><span class=o>=</span>-31d@d <span class=nv>latest</span><span class=o>=</span>-1d@d
<span class=p>|</span> timechart count as daily_total
<span class=p>|</span> stats avg<span class=o>(</span>daily_total<span class=o>)</span> as DailyAvg
<span class=p>|</span> appendcols
    <span class=o>[</span>search <span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=s2>&quot;fail*&quot;</span> <span class=nv>earliest</span><span class=o>=</span>-1d@d <span class=nv>latest</span><span class=o>=</span>@d
    <span class=p>|</span> stats count as Yesterday<span class=o>]</span>
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>Averages</span><span class=o>=</span><span class=s2>&quot;&quot;</span>
<span class=p>|</span> stats list<span class=o>(</span>DailyAvg<span class=o>)</span> as DailyAvg, list<span class=o>(</span>Yesterday<span class=o>)</span> as Yesterday by Averages
</code></pre></div> </div> <div class="admonition note"> <p class=admonition-title>swap row and column fields using untable and xyseries Commands</p> <div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined <span class=nv>action</span><span class=o>=</span>purchase
<span class=p>|</span> chart sum<span class=o>(</span>price<span class=o>)</span> by product_name, clientip <span class=nv>limit</span><span class=o>=</span><span class=m>0</span>
<span class=p>|</span> addtotals
<span class=p>|</span> sort <span class=m>5</span> Total
<span class=p>|</span> fields - Total
<span class=p>|</span> untable product_name, clientip, count
<span class=p>|</span> xyseries clientip, product_name, count <span class=c1># it took these commands to swap row and column fields!</span>
<span class=p>|</span> addtotals
<span class=p>|</span> sort <span class=m>3</span> -Total
<span class=p>|</span> fields - Total
</code></pre></div> </div> <div class="admonition note"> <p class=admonition-title>aggregate for two different time ranges and compare on the same visualization</p> <div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>security <span class=nv>sourcetype</span><span class=o>=</span>linux_secure <span class=s2>&quot;failed password&quot;</span> <span class=nv>earliest</span><span class=o>=</span>-30d@d <span class=nv>latest</span><span class=o>=</span>@h
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>Previous24h</span><span class=o>=</span>relative_time<span class=o>(</span>now<span class=o>()</span>, <span class=s2>&quot;-24h@h&quot;</span><span class=o>)</span>, <span class=nv>Series</span><span class=o>=</span><span class=k>if</span><span class=o>(</span>_time&gt;<span class=o>=</span>Previous24h, <span class=s2>&quot;last24h&quot;</span>, <span class=s2>&quot;prior&quot;</span><span class=o>)</span>
<span class=p>|</span> timechart count <span class=nv>span</span><span class=o>=</span>1h by Series
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>Hour</span><span class=o>=</span>strftime<span class=o>(</span>_time, <span class=s2>&quot;%H&quot;</span><span class=o>)</span>, <span class=nv>currentHour</span><span class=o>=</span>strftime<span class=o>(</span>now<span class=o>()</span>, <span class=s2>&quot;%H&quot;</span><span class=o>)</span>, <span class=nv>offset</span><span class=o>=</span><span class=k>case</span><span class=o>(</span>Hour&lt;<span class=o>=</span>currentHour, Hour-currentHour, Hour&gt;currentHour, <span class=o>(</span>Hour-24<span class=o>)</span>-currentHour<span class=o>)</span>
<span class=p>|</span> stats avg<span class=o>(</span>prior<span class=o>)</span> as <span class=s2>&quot;30 Day Average for Hour&quot;</span>, sum<span class=o>(</span>last24<span class=o>)</span> as <span class=s2>&quot;Last 24 Hours&quot;</span> by Hour, offset
<span class=p>|</span> sort offset
<span class=p>|</span> fields - offset
<span class=p>|</span> rename Hour as <span class=s2>&quot;Hour of Day&quot;</span>
</code></pre></div> </div> <div class="admonition note"> <p class=admonition-title>aggregate for certain time window each day</p> <p>You can do this with <code>stats</code> with more control and achieve what <code>timechart</code> provides and more!</p> <div class=highlight><pre><span></span><code><span class=nv>index</span><span class=o>=</span>web <span class=nv>sourcetype</span><span class=o>=</span>access_combined <span class=nv>action</span><span class=o>=</span>purchase <span class=nv>earliest</span><span class=o>=</span>-3d@d <span class=nv>latest</span><span class=o>=</span>@d date_hour&gt;<span class=o>=</span><span class=m>0</span> AND date_hour&lt;<span class=m>6</span>
<span class=p>|</span> bin <span class=nv>span</span><span class=o>=</span>1h _time
<span class=p>|</span> stats sum<span class=o>(</span>price<span class=o>)</span> as hourlySales by _time
<span class=p>|</span> <span class=nb>eval</span> <span class=nv>Hour</span><span class=o>=</span>strftime<span class=o>(</span>_time, <span class=s2>&quot;%b %d, %I %p&quot;</span><span class=o>)</span>, <span class=s2>&quot;Hourly Sales&quot;</span><span class=o>=</span><span class=s2>&quot;</span>$<span class=s2>&quot;</span>.tostring<span class=o>(</span>hourlySales<span class=o>)</span>
<span class=p>|</span> table Hour, <span class=s2>&quot;Hourly Sales&quot;</span>
</code></pre></div> </div> <h3 id=reports-and-dashboards>Reports and Dashboards<a class=headerlink href=#reports-and-dashboards title="Permanent link">&para;</a></h3> <h4 id=reports>Reports<a class=headerlink href=#reports title="Permanent link">&para;</a></h4> <p><strong>Reports</strong> allow people to easily store and share <strong>search results and queries</strong> used to make the search.</p> <p>When a report is run, a fresh search is run. Save report results to speed up search see <a href=https://docs.splunk.com/Documentation/Splunk/latest/Report/Acceleratereports target=_blank>Accelerate Reports Doc</a></p> <h5 id=scheduled-reports-and-alerts>Scheduled Reports and Alerts<a class=headerlink href=#scheduled-reports-and-alerts title="Permanent link">&para;</a></h5> <p><strong>Scheduled Reports</strong> can do weekly/monthly reports and automatically send results via emails.</p> <p>Select a <strong>saved report</strong> and add a schedule on it. Only admin can set its <strong>priority</strong>.</p> <p><strong>Alerts</strong> are based on searches that run on <strong>scheduled intervals</strong> or in <strong>real time</strong> (by admin). It is triggered when the results of a search meet <strong>defined conditions</strong>.</p> <p>Some alerts actions:</p> <ul> <li>create a log file with the events</li> <li>output to <a href=#lookups>lookup</a>, to apend or replace data in a lookup table</li> <li>send to a telemetry endpoint, call an endpoint</li> <li>trigger scripts, triggers a bash script stored on the machine</li> <li>send emails or Slack notifications</li> <li>use a webhook</li> </ul> <h4 id=visulizations>Visulizations<a class=headerlink href=#visulizations title="Permanent link">&para;</a></h4> <p>Any searches that returns statistics information can be presented as <strong>visualizations</strong>, or charts. Charts can be based on <strong>numbers, time, and location</strong>. Save visualizations as a report or a dashboard panel.</p> <p>Creating customized visualizations see <a href=http://docs.splunk.com/Documentation/Splunk/latest/AdvancedDev/CustomVizDevOverview target=_blank>doc page</a></p> <p>Visulizations that are availble by default and are very intuitive (bar, line, area, pie, and table charts) are not explained here.</p> <h5 id=choropleth-maps>Choropleth Maps<a class=headerlink href=#choropleth-maps title="Permanent link">&para;</a></h5> <p>Uses <strong>colored shadings</strong> to show <strong>differences in numbers over geographical locations</strong>. It requires a compressed <strong>Keyhole Markup Language</strong> (KMZ) file that defines region boundries.</p> <p>Splunk ships with two KMZ files, geo_us_states for US, and geo_countries for the countries of the world. Other KMZ files can be provided and used.</p> <p><code>geom</code> is the command to use to show choropleth map. See <a href=#geom>geom command</a>.</p> <h5 id=single-value>Single Value<a class=headerlink href=#single-value title="Permanent link">&para;</a></h5> <p>Displays a <strong>single number</strong> with formatting options to add <strong>caption, color, unit</strong>, etc. You can use the <code>timechart</code> command to add a <strong>trend</strong> and a sparkline for that value.</p> <p>It can also display as <strong>gauges</strong> which can take forms of radial, filler, or marker. There are options to format ranges and color.</p> <p><code>gauge</code> is the command to use to enable and pass in ranges. See <a href=#gauge>gauge command</a>.</p> <h4 id=dashboards>Dashboards<a class=headerlink href=#dashboards title="Permanent link">&para;</a></h4> <p><strong>Dashboard</strong> is a collection of reports or visualizations.</p> <h5 id=dashboarding-tricks>Dashboarding Tricks<a class=headerlink href=#dashboarding-tricks title="Permanent link">&para;</a></h5> <div class="admonition note"> <p class=admonition-title>let panels listen on variables</p> <p>Use <code>$variable_name$</code> to refer to another variable that can be controlled by a dropdown or the drilldown</p> </div> <div class="admonition note"> <p class=admonition-title>'earliest' and 'latest' from time picker</p> <p>For a time picker variable, the earliest and latest time can be accessed through <code>$variable_name$.earliest</code> and <code>$variable_name$.latest</code></p> </div> <h4 id=accelerations>Accelerations<a class=headerlink href=#accelerations title="Permanent link">&para;</a></h4> <p>Splunk allows creation of <strong>summary</strong> of event data, as <strong>smaller segments</strong> of event data that only include those info needed to fullfill the search.</p> <h5 id=report-acceleration>Report acceleration<a class=headerlink href=#report-acceleration title="Permanent link">&para;</a></h5> <p>Uses automatically created summaries, accelerates individual reports.</p> <ul> <li>acceleration summary basically are <strong>stored results</strong> populated <strong>every 10 minutes</strong><ul> <li>searches must be in Fast/Smart mode</li> <li>must include a transforming command, and having streaming command before it and non-streaming commands after</li> </ul> </li> <li>also stored as <strong>file chunks</strong> alongside indexes buckets</li> <li>must re-build when associated knowledge objects change</li> </ul> <h5 id=summary-indexing>Summary indexing<a class=headerlink href=#summary-indexing title="Permanent link">&para;</a></h5> <p>Uses <strong>manually</strong> created summaries, indexes <strong>separated</strong> from deployment.</p> <ul> <li>must use 'si'-prefixed commands such as <code>sichart</code>, <code>sistats</code></li> <li>search a Summary Index by using <code>index=&lt;summary_index_group_name&gt; | report=&lt;summary_index_name&gt;</code></li> <li>need to pay attention to avoid creating gaps and overlaps in the data</li> </ul> <h5 id=data-model-acceleration>Data model acceleration<a class=headerlink href=#data-model-acceleration title="Permanent link">&para;</a></h5> <p>Accelerates <strong>all fields</strong> in a data model, easiest and most efficient option.</p> <ul> <li><strong>adhoc acceleration</strong> - summary-creation happens automatically on data models that have not been accelerated; summary files created stays on the search head for the period that user is actively using the <strong>Pivot tool</strong></li> <li><strong>persistent acceleration</strong> - summary files created are stored alongside the data buckets and exits as long as the data model exists<ul> <li>data models will become read-only after the acceleration</li> <li>requires searches use only streaming commands</li> </ul> </li> </ul> <p><a href=#datamodel><code>datamodel</code></a> command allows display the structure of data models and search against them.</p> <p><strong>Time-Series Index Files</strong> (tsidx files) are files created for data model acceleration.</p> <ul> <li>tsidx components:<ul> <li><strong>lexicon</strong> - an alphanumerically ordered list of terms found in data at index-time<ul> <li>fields extracted at <strong>index-time</strong> showup as <code>key-value</code> pair in lexicon</li> <li>Splunk <strong>searches lexicon first</strong> and only open and read <strong>raw event</strong> data matching the terms using the pointers</li> </ul> </li> <li><strong>posting list</strong> - array of pointers that match each term to events in the raw data files</li> </ul> </li> <li>building of tsidx files ALSO happen when a data model is <strong>accelerated</strong><ul> <li>for persistent acceleration, updated tsidx <strong>every 5 min</strong> and remove-outdated after 30 min</li> </ul> </li> <li><a href=#tstats><code>tstats</code></a> command is for getting statistical info from tsidx files</li> </ul> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../../../Cloud-and-Containers/k8s/service_mesh/ class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Service Mesh </div> </div> </a> <a href=../Splunk-Dashboarding/ class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Splunk Dashboarding </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.53cc9318.min.js></script> <script src=../../../assets/javascripts/bundle.e9c9f54f.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.tabs', 'navigation.instant'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>