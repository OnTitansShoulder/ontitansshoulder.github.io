<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="We are all standing on the shoulders of the giants..."><meta name=author content="Zhongkai Liu"><link rel="shortcut icon" href=../../../assets/favicon.ico><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.2.6"><title>Java Testing Design Patterns - Ontitansshoulder</title><link rel=stylesheet href=../../../assets/stylesheets/main.cb6bc1d0.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.39b8e14a.min.css><meta name=theme-color content=#4051b5><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../../css/extra.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#intro-to-tdd class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../../.. title=Ontitansshoulder class="md-header-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <div class=md-header-nav__topic> <span class=md-ellipsis> Ontitansshoulder </span> </div> <div class=md-header-nav__topic> <span class=md-ellipsis> Java Testing Design Patterns </span> </div> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class="md-tabs__link md-tabs__link--active"> Notes </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=Ontitansshoulder class="md-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Ontitansshoulder </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1 checked> <label class=md-nav__link for=nav-1> Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Notes data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"></span> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Welcome </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-2 type=checkbox id=nav-1-2> <label class=md-nav__link for=nav-1-2> Foundamentals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Foundamentals data-md-level=2> <label class=md-nav__title for=nav-1-2> <span class="md-nav__icon md-icon"></span> Foundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Foundamental/Data_Structures_and_Algos/ class=md-nav__link> Data Structures and Algos </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3 type=checkbox id=nav-1-3> <label class=md-nav__link for=nav-1-3> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=2> <label class=md-nav__title for=nav-1-3> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-1 type=checkbox id=nav-1-3-1> <label class=md-nav__link for=nav-1-3-1> Concepts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Concepts data-md-level=3> <label class=md-nav__title for=nav-1-3-1> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Concepts/Linux_Foundation/ class=md-nav__link> Linux Foundation </a> </li> <li class=md-nav__item> <a href=../../../Linux/Concepts/Linux_Foundation_System_Admin/ class=md-nav__link> Linux System Administration </a> </li> <li class=md-nav__item> <a href=../../../Linux/Concepts/Linux_Foundation_Network_Admin/ class=md-nav__link> Linux Network Administration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-2 type=checkbox id=nav-1-3-2> <label class=md-nav__link for=nav-1-3-2> Practical References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Practical References" data-md-level=3> <label class=md-nav__title for=nav-1-3-2> <span class="md-nav__icon md-icon"></span> Practical References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Commands/Freq-Used-Shell-Cmds/ class=md-nav__link> Freq Used Shell Cmds </a> </li> <li class=md-nav__item> <a href=../../../Linux/Commands/Networking-Shell-Cmds/ class=md-nav__link> Freq Used Network Cmds </a> </li> <li class=md-nav__item> <a href=../../../Linux/Commands/Text-Manipulating-Cmds/ class=md-nav__link> Text Manipulating Cmds </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-3 type=checkbox id=nav-1-3-3> <label class=md-nav__link for=nav-1-3-3> Tricks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tricks data-md-level=3> <label class=md-nav__title for=nav-1-3-3> <span class="md-nav__icon md-icon"></span> Tricks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/References/Freq-Tasks/ class=md-nav__link> Freq Linux Tasks </a> </li> <li class=md-nav__item> <a href=../../../Linux/References/Terminal-Tricks/ class=md-nav__link> Linux Terminal Tricks </a> </li> <li class=md-nav__item> <a href=../../../Linux/References/Vim-Tricks/ class=md-nav__link> Vim Tricks </a> </li> <li class=md-nav__item> <a href=../../../Linux/References/Account-Administration/ class=md-nav__link> Manage Accounts & Groups </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-4 type=checkbox id=nav-1-4> <label class=md-nav__link for=nav-1-4> Cloud <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Cloud data-md-level=2> <label class=md-nav__title for=nav-1-4> <span class="md-nav__icon md-icon"></span> Cloud </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Architecture/Cloud-App-Architecture/ class=md-nav__link> Cloud App Architecture </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Docker/Docker/ class=md-nav__link> Docker and Containers </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Docker/Docker-Practical/ class=md-nav__link> Docker Practical </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/k8s/K8s-Knowledge/ class=md-nav__link> K8s Knowledge </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/k8s/service_mesh/ class=md-nav__link> Service Mesh </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5 type=checkbox id=nav-1-5> <label class=md-nav__link for=nav-1-5> Monitoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Monitoring data-md-level=2> <label class=md-nav__title for=nav-1-5> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5-1 type=checkbox id=nav-1-5-1> <label class=md-nav__link for=nav-1-5-1> Splunk <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Splunk data-md-level=3> <label class=md-nav__title for=nav-1-5-1> <span class="md-nav__icon md-icon"></span> Splunk </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Dev-Tools-Reference/Splunk/Splunk-References/ class=md-nav__link> Splunk Knowledge </a> </li> <li class=md-nav__item> <a href=../../../Dev-Tools-Reference/Splunk/Splunk-Dashboarding/ class=md-nav__link> Splunk Dashboarding </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6 type=checkbox id=nav-1-6 checked> <label class=md-nav__link for=nav-1-6> Programming Langs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Programming Langs" data-md-level=2> <label class=md-nav__title for=nav-1-6> <span class="md-nav__icon md-icon"></span> Programming Langs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-1 type=checkbox id=nav-1-6-1> <label class=md-nav__link for=nav-1-6-1> Golang <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Golang data-md-level=3> <label class=md-nav__title for=nav-1-6-1> <span class="md-nav__icon md-icon"></span> Golang </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Golang/Golang-Specs/ class=md-nav__link> Golang Language Reference </a> </li> <li class=md-nav__item> <a href=../../Golang/Best-Practices/ class=md-nav__link> Effective Go </a> </li> <li class=md-nav__item> <a href=../../Golang/Freq-Used-Libs/ class=md-nav__link> Go libraries and examples </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-2 type=checkbox id=nav-1-6-2 checked> <label class=md-nav__link for=nav-1-6-2> Java <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Java data-md-level=3> <label class=md-nav__title for=nav-1-6-2> <span class="md-nav__icon md-icon"></span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Style-Guide/ class=md-nav__link> Style Guide </a> </li> <li class=md-nav__item> <a href=../Best-Practices/ class=md-nav__link> Effective Java </a> </li> <li class=md-nav__item> <a href=../Design-Patterns/ class=md-nav__link> Java Design Patterns </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Testing Design Patterns <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Testing Design Patterns </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#intro-to-tdd class=md-nav__link> Intro to TDD </a> </li> <li class=md-nav__item> <a href=#best-practices-for-tdd class=md-nav__link> Best practices for TDD </a> <nav class=md-nav aria-label="Best practices for TDD"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#starter-test class=md-nav__link> Starter Test </a> </li> <li class=md-nav__item> <a href=#explanation-test class=md-nav__link> Explanation Test </a> </li> <li class=md-nav__item> <a href=#learning-test class=md-nav__link> Learning Test </a> </li> <li class=md-nav__item> <a href=#regression-test class=md-nav__link> Regression Test </a> </li> <li class=md-nav__item> <a href=#child-test class=md-nav__link> Child Test </a> </li> <li class=md-nav__item> <a href=#mock-object class=md-nav__link> Mock Object </a> </li> <li class=md-nav__item> <a href=#crash-test-dummy class=md-nav__link> Crash Test Dummy </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#refactoring class=md-nav__link> Refactoring </a> <nav class=md-nav aria-label=Refactoring> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reconcile-differences class=md-nav__link> Reconcile Differences </a> </li> <li class=md-nav__item> <a href=#isolate-change class=md-nav__link> Isolate Change </a> </li> <li class=md-nav__item> <a href=#migrate-data class=md-nav__link> Migrate Data </a> </li> <li class=md-nav__item> <a href=#extract-method class=md-nav__link> Extract Method </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Java_Std_Lib_Cheatsheet/ class=md-nav__link> Java Std Lib Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-3 type=checkbox id=nav-1-6-3> <label class=md-nav__link for=nav-1-6-3> C++ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=C++ data-md-level=3> <label class=md-nav__title for=nav-1-6-3> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../CPP/CPlusPlus_Lang_Specs/ class=md-nav__link> C++ Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-4 type=checkbox id=nav-1-6-4> <label class=md-nav__link for=nav-1-6-4> Perl <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Perl data-md-level=3> <label class=md-nav__title for=nav-1-6-4> <span class="md-nav__icon md-icon"></span> Perl </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Perl/Perl-Lang-Specs/ class=md-nav__link> Perl Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-5 type=checkbox id=nav-1-6-5> <label class=md-nav__link for=nav-1-6-5> Shell <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Shell data-md-level=3> <label class=md-nav__title for=nav-1-6-5> <span class="md-nav__icon md-icon"></span> Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Shell/Shell-Scripting/ class=md-nav__link> Shell Scripting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../Github-Markdown/ class=md-nav__link> Github Markdown Guide </a> </li> <li class=md-nav__item> <a href=../../Regex-Specs/ class=md-nav__link> Regex Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-7 type=checkbox id=nav-1-7> <label class=md-nav__link for=nav-1-7> Reading Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reading Notes" data-md-level=2> <label class=md-nav__title for=nav-1-7> <span class="md-nav__icon md-icon"></span> Reading Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Reading-Notes/How-Netflix-Works/ class=md-nav__link> How Netflix Works </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/System-Design-Concepts/ class=md-nav__link> System Design Guide </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Why-Latency-Matters/ class=md-nav__link> Why Latency Matters </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/DevOps_SRE/ class=md-nav__link> Intro to DevOps and SRE </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Leading-without-formal-authority/ class=md-nav__link> Leading Without Formal Authority </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Google-SRE-Book/ class=md-nav__link> Google SRE Book </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Good-Reads/ class=md-nav__link> Good Reads </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#intro-to-tdd class=md-nav__link> Intro to TDD </a> </li> <li class=md-nav__item> <a href=#best-practices-for-tdd class=md-nav__link> Best practices for TDD </a> <nav class=md-nav aria-label="Best practices for TDD"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#starter-test class=md-nav__link> Starter Test </a> </li> <li class=md-nav__item> <a href=#explanation-test class=md-nav__link> Explanation Test </a> </li> <li class=md-nav__item> <a href=#learning-test class=md-nav__link> Learning Test </a> </li> <li class=md-nav__item> <a href=#regression-test class=md-nav__link> Regression Test </a> </li> <li class=md-nav__item> <a href=#child-test class=md-nav__link> Child Test </a> </li> <li class=md-nav__item> <a href=#mock-object class=md-nav__link> Mock Object </a> </li> <li class=md-nav__item> <a href=#crash-test-dummy class=md-nav__link> Crash Test Dummy </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#refactoring class=md-nav__link> Refactoring </a> <nav class=md-nav aria-label=Refactoring> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reconcile-differences class=md-nav__link> Reconcile Differences </a> </li> <li class=md-nav__item> <a href=#isolate-change class=md-nav__link> Isolate Change </a> </li> <li class=md-nav__item> <a href=#migrate-data class=md-nav__link> Migrate Data </a> </li> <li class=md-nav__item> <a href=#extract-method class=md-nav__link> Extract Method </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>Testing Design Patterns</h1> <p>Two simple rules that helps software development:</p> <ul> <li>Write a failing automated test before you write any code</li> <li>Remove duplication</li> </ul> <h2 id=intro-to-tdd>Intro to TDD<a class=headerlink href=#intro-to-tdd title="Permanent link">&para;</a></h2> <ol> <li>Quickly add a test</li> <li>Run all tests and see the new one fail</li> <li>Make a little change</li> <li>Run all tests and see them all succeed</li> <li>Refactor to remove duplication</li> </ol> <p>Introduce a red, then make it green fast. Then make it good and green fast. Prefer not to write a test when there is red.</p> <p>A good habit is to <strong>maintain a to-do list</strong> for tests and features, and make the items in-progress as bold and completed items as crossed off. When the list is empty is a good time to review the design.</p> <p>First, put on the list examples of every operation that you know you need to implement. Next, for those operations that don't already exist, put the null version of that operation on the list. Finally, list all of the refactorings that you think you will have to do in order to have clean code at the end of this session.</p> <p>If you don't find any test on the list that represents one step, then add some new tests that would represent progress toward the items there.</p> <p>Always <strong>start a test small</strong>. TDD is not about taking teeny-tiny steps, it's about being able to take teeny-tiny steps. It is okay if the test doesn't even compile. Then work to fix the compile errors (can start with stubs), then fix the test so the outcome matches the expected. In the end, it is expected to have roughly as many lines and functions in the test and functional code.</p> <p>It is important to get through steps 1-4 quickly, then spend time to make step 5 right. Keep in mind while refactoring in the good direction, try not to introduce more design until you had a better motivation to do so.</p> <p>It is okay if the code that made the test pass is <strong>not perfect</strong> yet. Because the next step will be adding more tests to cover general cases and edge cases, then going through the TDD cycle.</p> <p>It is possible that after a few iterations, the code you initially wrote had been changed drastically, and you will find the initial dumb code has become more sophisticated and clean, and there is a nice set of tests that guards you with more refacotring aginst breaking existing functionalities.</p> <p>If dependency is the problem, <strong>duplication</strong> is the symptom. Duplication most often takes the form of duplicate logic -- the same expression appearing in multiple places in the code. This can be code snippets or constants.</p> <p>Another goal is to be able to write another test that “makes sense” to us, without having to change the code. By eliminating duplication before we go on to the next test, we maximize our chance of being able to get the next test running with one and only one change.</p> <p>You will often be implementing TDD in code that doesn't have <strong>adequate tests</strong>. You could make a refactoring mistake and the tests would all still run. Write the tests you wish you had. If you don't, you will eventually break something while refactoring.</p> <p>If you have a big system, then the parts that you touch all the time should be absolutely rock solid, so you can make daily changes confidently.</p> <p>TDD followed religiously should result in 100 percent statement coverage. You can also do defect insertion to evaluate test quality: change the meaning of a line of code and a test should break.</p> <p>The three approaches to making a <strong>test work cleanly</strong>: fake it, triangulation, and obvious implementation. Removing duplication between test and code as a way to drive the design. The ability to control the gap between tests to increase traction when the road gets slippery and cruise faster when conditions are clear.</p> <p>The running of tests should not affect one another at all times. Tests should be independent.</p> <p>Include expected and actual results in the test itself, and try to make their relationship apparent. You are writing tests for a reader, not just the computer. Later on when someone needs to maintain or update the test, it is easy to spot what you are trying to test.</p> <h2 id=best-practices-for-tdd>Best practices for TDD<a class=headerlink href=#best-practices-for-tdd title="Permanent link">&para;</a></h2> <p>You should test: conditionals, loops, operations, polymorphism.</p> <p>Some common signs that code needs improvements:</p> <ul> <li>long test setup code - objects probably are too big and need to be split</li> <li>setup duplication - too many objects tightly coupled that it is hard to have a common setup</li> <li>long running tests - long running tests won't be run often and is bad for TDD, and indicates design flaws</li> <li>fragile tests - tests break unexpectedly suggest that one part of application is affecting another</li> </ul> <p>When you have a bunch of code that more or less works and you want to add tests to it, and the biggest problem is that code that isn't written with tests in mind typically isn't very testable. What you don't do is go write tests for the whole thing and refactor the whole thing, which would take months. Start adding tests and refactor the code parts that most likely would change all the time, then repeat on untested code.</p> <blockquote> <p>I think the reason for this is that working in a test-driven development style gives you this sense of keeping just one ball in the air at once, so you can concentrate on that ball properly and do a really good job with it. When I'm trying to add some new functionality, I'm not worried about what really makes a good design for this piece of function, I'm just trying to get a test to pass as easily as I can. When I switch to refactoring mode, I'm not worried about adding some new function, I'm just worried about getting the right design. With both of these I'm just focused on one thing at a time, and as a result I can concentrate better on that one thing.</p> </blockquote> <p>Patterns are always half baked, and need to be adapted in the oven of your own project. But a good way to do this is to first copy the pattern fairly blindly, and then use some mix of refactoring or test-first, to perform the adaptation.</p> <h3 id=starter-test>Starter Test<a class=headerlink href=#starter-test title="Permanent link">&para;</a></h3> <p>Pick a Starter Test that will teach you something but that you are certain you can quickly get to work.</p> <p>Start by testing a variant of an operation that doesn't do anything. Then start asking the questions:</p> <ul> <li>Where does the operation belong</li> <li>What are the correct inputs</li> <li>What is the correct output given those inputs</li> </ul> <p>You will have a realistic test after answering all of the three questions with test code. Taking one question at a time helps with maintaining a fast Red/green/refactor loop.</p> <h3 id=explanation-test>Explanation Test<a class=headerlink href=#explanation-test title="Permanent link">&para;</a></h3> <p>Attempt to alter existing tests, ask yourself for explanations of those tests and come up with new test cases.</p> <h3 id=learning-test>Learning Test<a class=headerlink href=#learning-test title="Permanent link">&para;</a></h3> <p>Before using and coding with a new external library, attempt to write tests to verify its API works as expected.</p> <p>This way, if your application critically depends on some features or API provided by that library, then it is safe to verify those functionalities didn't change when upgrading to a newer version by running the existing learning tests.</p> <h3 id=regression-test>Regression Test<a class=headerlink href=#regression-test title="Permanent link">&para;</a></h3> <p>When something fails, a code bug was caught during production, write the smallest possible test that fails and that, once run, will be repaired.</p> <p>Every time you have to write a regression test, think about how you could have known to write the test in the first place.</p> <h3 id=child-test>Child Test<a class=headerlink href=#child-test title="Permanent link">&para;</a></h3> <p>When there is apparently a test case that turns out to be too big and requires multiple code changes to work, write a smaller test case that represents the broken part of the bigger test case. Then get the test passing and reintroduce a larger test case, repeat until you gets the complete large test case.</p> <h3 id=mock-object>Mock Object<a class=headerlink href=#mock-object title="Permanent link">&para;</a></h3> <p>To test an object that relies on an expensive or complicated resource, create a fake version of the resource that answers constants.</p> <p>Mock Objects encourage you down the path of carefully considering the visibility of every object, reducing the coupling in your designs.</p> <p>http://www.mockobjects.com/</p> <h3 id=crash-test-dummy>Crash Test Dummy<a class=headerlink href=#crash-test-dummy title="Permanent link">&para;</a></h3> <p>Test error code or exceptions logic by running tests with a special object that throws the exception intead of doing real work.</p> <h2 id=refactoring>Refactoring<a class=headerlink href=#refactoring title="Permanent link">&para;</a></h2> <h3 id=reconcile-differences>Reconcile Differences<a class=headerlink href=#reconcile-differences title="Permanent link">&para;</a></h3> <p>When there are two similar looking pieces of code, gradually bring them closer and unify them when they are identical.</p> <ul> <li>Two loop structures are similar. By making them identical, you can merge them.</li> <li>Two branches of a conditional are similar. By making them identical, you can eliminate the conditional.</li> <li>Two methods are similar. By making them identical, you can eliminate one.</li> <li>Two classes are similar. By making them identical, you can eliminate one.</li> </ul> <h3 id=isolate-change>Isolate Change<a class=headerlink href=#isolate-change title="Permanent link">&para;</a></h3> <p>Isolate the part that has to change when working on a multi-part method or object.</p> <h3 id=migrate-data>Migrate Data<a class=headerlink href=#migrate-data title="Permanent link">&para;</a></h3> <p>When moving data from one representation to another, temporarily duplicate the data.</p> <ul> <li>Add an instance variable in the new format.</li> <li>Set the new format variable everywhere you set the old format.</li> <li>Use the new format variable everywhere you use the old format.</li> <li>Delete the old format.</li> <li>Change the external interface to reflect the new format.</li> </ul> <p>If changing API:</p> <ul> <li>Add a parameter in the new format.</li> <li>Translate from the new format parameter to the old format internal representation.</li> <li>Delete the old format parameter.</li> <li>Replace uses of the old format with the new format.</li> <li>Delete the old format.</li> </ul> <h3 id=extract-method>Extract Method<a class=headerlink href=#extract-method title="Permanent link">&para;</a></h3> <p>Make long and complicated method easier to read by turnning a small part of it into a separate method and call the new method.</p> <ol> <li>Find a region of the method that would make sense as its own method. Bodies of loop, whole loops, and branches of conditionals are common candidates for extraction.</li> <li>Make sure that there are no assignments to temporary variables declared outside the scope of the region to be extracted.</li> <li>Copy the code from the old method to the new method. Compile it.</li> <li>For each temporary variable or parameter of the original method used in the new method, add a parameter to the new method.</li> <li>Call the new method from the original method.</li> </ol> <p>However, don't break methods too far that the code is not readable.</p> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../Design-Patterns/ class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Java Design Patterns </div> </div> </a> <a href=../Java_Std_Lib_Cheatsheet/ class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Java Std Lib Cheatsheet </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.53cc9318.min.js></script> <script src=../../../assets/javascripts/bundle.e9c9f54f.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.tabs', 'navigation.instant'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>