<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="We are all standing on the shoulders of the giants..."><meta name=author content="Zhongkai Liu"><link rel="shortcut icon" href=../../../assets/favicon.ico><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.2.6"><title>Golang Reference - Ontitansshoulder</title><link rel=stylesheet href=../../../assets/stylesheets/main.cb6bc1d0.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.39b8e14a.min.css><meta name=theme-color content=#4051b5><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../../css/extra.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#go-code-organization class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../../.. title=Ontitansshoulder class="md-header-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <div class=md-header-nav__topic> <span class=md-ellipsis> Ontitansshoulder </span> </div> <div class=md-header-nav__topic> <span class=md-ellipsis> Golang Reference </span> </div> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class="md-tabs__link md-tabs__link--active"> Notes </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=Ontitansshoulder class="md-nav__button md-logo" aria-label=Ontitansshoulder> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Ontitansshoulder </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1 checked> <label class=md-nav__link for=nav-1> Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Notes data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"></span> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Welcome </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-2 type=checkbox id=nav-1-2> <label class=md-nav__link for=nav-1-2> Foundamentals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Foundamentals data-md-level=2> <label class=md-nav__title for=nav-1-2> <span class="md-nav__icon md-icon"></span> Foundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Foundamental/Data_Structures_and_Algos/ class=md-nav__link> Data Structures and Algos </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3 type=checkbox id=nav-1-3> <label class=md-nav__link for=nav-1-3> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=2> <label class=md-nav__title for=nav-1-3> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-1 type=checkbox id=nav-1-3-1> <label class=md-nav__link for=nav-1-3-1> Concepts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Concepts data-md-level=3> <label class=md-nav__title for=nav-1-3-1> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Concepts/Linux_Foundation/ class=md-nav__link> Linux Foundation </a> </li> <li class=md-nav__item> <a href=../../../Linux/Concepts/Linux_Foundation_System_Admin/ class=md-nav__link> Linux System Administration </a> </li> <li class=md-nav__item> <a href=../../../Linux/Concepts/Linux_Foundation_Network_Admin/ class=md-nav__link> Linux Network Administration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-2 type=checkbox id=nav-1-3-2> <label class=md-nav__link for=nav-1-3-2> Practical References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Practical References" data-md-level=3> <label class=md-nav__title for=nav-1-3-2> <span class="md-nav__icon md-icon"></span> Practical References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Commands/Freq-Used-Shell-Cmds/ class=md-nav__link> Freq Used Shell Cmds </a> </li> <li class=md-nav__item> <a href=../../../Linux/Commands/Networking-Shell-Cmds/ class=md-nav__link> Freq Used Network Cmds </a> </li> <li class=md-nav__item> <a href=../../../Linux/Commands/Text-Manipulating-Cmds/ class=md-nav__link> Text Manipulating Cmds </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-3-3 type=checkbox id=nav-1-3-3> <label class=md-nav__link for=nav-1-3-3> Tricks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tricks data-md-level=3> <label class=md-nav__title for=nav-1-3-3> <span class="md-nav__icon md-icon"></span> Tricks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/References/Freq-Tasks/ class=md-nav__link> Freq Linux Tasks </a> </li> <li class=md-nav__item> <a href=../../../Linux/References/Terminal-Tricks/ class=md-nav__link> Linux Terminal Tricks </a> </li> <li class=md-nav__item> <a href=../../../Linux/References/Vim-Tricks/ class=md-nav__link> Vim Tricks </a> </li> <li class=md-nav__item> <a href=../../../Linux/References/Account-Administration/ class=md-nav__link> Manage Accounts & Groups </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-4 type=checkbox id=nav-1-4> <label class=md-nav__link for=nav-1-4> Cloud <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Cloud data-md-level=2> <label class=md-nav__title for=nav-1-4> <span class="md-nav__icon md-icon"></span> Cloud </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Architecture/Cloud-App-Architecture/ class=md-nav__link> Cloud App Architecture </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Docker/Docker/ class=md-nav__link> Docker and Containers </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/Docker/Docker-Practical/ class=md-nav__link> Docker Practical </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/k8s/K8s-Knowledge/ class=md-nav__link> K8s Knowledge </a> </li> <li class=md-nav__item> <a href=../../../Cloud-and-Containers/k8s/service_mesh/ class=md-nav__link> Service Mesh </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5 type=checkbox id=nav-1-5> <label class=md-nav__link for=nav-1-5> Monitoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Monitoring data-md-level=2> <label class=md-nav__title for=nav-1-5> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-5-1 type=checkbox id=nav-1-5-1> <label class=md-nav__link for=nav-1-5-1> Splunk <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Splunk data-md-level=3> <label class=md-nav__title for=nav-1-5-1> <span class="md-nav__icon md-icon"></span> Splunk </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Dev-Tools-Reference/Splunk/Splunk-References/ class=md-nav__link> Splunk Knowledge </a> </li> <li class=md-nav__item> <a href=../../../Dev-Tools-Reference/Splunk/Splunk-Dashboarding/ class=md-nav__link> Splunk Dashboarding </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6 type=checkbox id=nav-1-6 checked> <label class=md-nav__link for=nav-1-6> Programming Langs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Programming Langs" data-md-level=2> <label class=md-nav__title for=nav-1-6> <span class="md-nav__icon md-icon"></span> Programming Langs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-1 type=checkbox id=nav-1-6-1 checked> <label class=md-nav__link for=nav-1-6-1> Golang <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Golang data-md-level=3> <label class=md-nav__title for=nav-1-6-1> <span class="md-nav__icon md-icon"></span> Golang </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Golang Language Reference <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Golang Language Reference </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#go-code-organization class=md-nav__link> Go code organization </a> </li> <li class=md-nav__item> <a href=#go-command class=md-nav__link> Go command </a> </li> <li class=md-nav__item> <a href=#use-packages-from-other-sources class=md-nav__link> Use packages from other sources </a> </li> <li class=md-nav__item> <a href=#testing class=md-nav__link> Testing </a> </li> <li class=md-nav__item> <a href=#commenting class=md-nav__link> Commenting </a> </li> <li class=md-nav__item> <a href=#type-of-data class=md-nav__link> Type of Data </a> </li> <li class=md-nav__item> <a href=#conditions class=md-nav__link> Conditions </a> </li> <li class=md-nav__item> <a href=#loops class=md-nav__link> Loops </a> </li> <li class=md-nav__item> <a href=#functions class=md-nav__link> Functions </a> </li> <li class=md-nav__item> <a href=#special-statements class=md-nav__link> Special Statements </a> </li> <li class=md-nav__item> <a href=#methods class=md-nav__link> Methods </a> </li> <li class=md-nav__item> <a href=#interfaces class=md-nav__link> Interfaces </a> </li> <li class=md-nav__item> <a href=#exceptions-and-errors class=md-nav__link> Exceptions and Errors </a> </li> <li class=md-nav__item> <a href=#threading-and-goroutines class=md-nav__link> Threading and Goroutines </a> </li> <li class=md-nav__item> <a href=#pipes-and-channels class=md-nav__link> Pipes and Channels </a> </li> <li class=md-nav__item> <a href=#referencepointers class=md-nav__link> Reference/Pointers </a> </li> <li class=md-nav__item> <a href=#recursion class=md-nav__link> Recursion </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Best-Practices/ class=md-nav__link> Effective Go </a> </li> <li class=md-nav__item> <a href=../Freq-Used-Libs/ class=md-nav__link> Go libraries and examples </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-2 type=checkbox id=nav-1-6-2> <label class=md-nav__link for=nav-1-6-2> Java <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Java data-md-level=3> <label class=md-nav__title for=nav-1-6-2> <span class="md-nav__icon md-icon"></span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Java/Style-Guide/ class=md-nav__link> Style Guide </a> </li> <li class=md-nav__item> <a href=../../Java/Best-Practices/ class=md-nav__link> Effective Java </a> </li> <li class=md-nav__item> <a href=../../Java/Design-Patterns/ class=md-nav__link> Java Design Patterns </a> </li> <li class=md-nav__item> <a href=../../Java/Testing-Design-Patterns/ class=md-nav__link> Testing Design Patterns </a> </li> <li class=md-nav__item> <a href=../../Java/Java_Std_Lib_Cheatsheet/ class=md-nav__link> Java Std Lib Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-3 type=checkbox id=nav-1-6-3> <label class=md-nav__link for=nav-1-6-3> C++ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=C++ data-md-level=3> <label class=md-nav__title for=nav-1-6-3> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../CPP/CPlusPlus_Lang_Specs/ class=md-nav__link> C++ Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-4 type=checkbox id=nav-1-6-4> <label class=md-nav__link for=nav-1-6-4> Perl <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Perl data-md-level=3> <label class=md-nav__title for=nav-1-6-4> <span class="md-nav__icon md-icon"></span> Perl </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Perl/Perl-Lang-Specs/ class=md-nav__link> Perl Language Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-6-5 type=checkbox id=nav-1-6-5> <label class=md-nav__link for=nav-1-6-5> Shell <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Shell data-md-level=3> <label class=md-nav__title for=nav-1-6-5> <span class="md-nav__icon md-icon"></span> Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Shell/Shell-Scripting/ class=md-nav__link> Shell Scripting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../Github-Markdown/ class=md-nav__link> Github Markdown Guide </a> </li> <li class=md-nav__item> <a href=../../Regex-Specs/ class=md-nav__link> Regex Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-7 type=checkbox id=nav-1-7> <label class=md-nav__link for=nav-1-7> Reading Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reading Notes" data-md-level=2> <label class=md-nav__title for=nav-1-7> <span class="md-nav__icon md-icon"></span> Reading Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Reading-Notes/How-Netflix-Works/ class=md-nav__link> How Netflix Works </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/System-Design-Concepts/ class=md-nav__link> System Design Guide </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Why-Latency-Matters/ class=md-nav__link> Why Latency Matters </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/DevOps_SRE/ class=md-nav__link> Intro to DevOps and SRE </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Leading-without-formal-authority/ class=md-nav__link> Leading Without Formal Authority </a> </li> <li class=md-nav__item> <a href=../../../Reading-Notes/Google-SRE-Book/ class=md-nav__link> Google SRE Book </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Good-Reads/ class=md-nav__link> Good Reads </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#go-code-organization class=md-nav__link> Go code organization </a> </li> <li class=md-nav__item> <a href=#go-command class=md-nav__link> Go command </a> </li> <li class=md-nav__item> <a href=#use-packages-from-other-sources class=md-nav__link> Use packages from other sources </a> </li> <li class=md-nav__item> <a href=#testing class=md-nav__link> Testing </a> </li> <li class=md-nav__item> <a href=#commenting class=md-nav__link> Commenting </a> </li> <li class=md-nav__item> <a href=#type-of-data class=md-nav__link> Type of Data </a> </li> <li class=md-nav__item> <a href=#conditions class=md-nav__link> Conditions </a> </li> <li class=md-nav__item> <a href=#loops class=md-nav__link> Loops </a> </li> <li class=md-nav__item> <a href=#functions class=md-nav__link> Functions </a> </li> <li class=md-nav__item> <a href=#special-statements class=md-nav__link> Special Statements </a> </li> <li class=md-nav__item> <a href=#methods class=md-nav__link> Methods </a> </li> <li class=md-nav__item> <a href=#interfaces class=md-nav__link> Interfaces </a> </li> <li class=md-nav__item> <a href=#exceptions-and-errors class=md-nav__link> Exceptions and Errors </a> </li> <li class=md-nav__item> <a href=#threading-and-goroutines class=md-nav__link> Threading and Goroutines </a> </li> <li class=md-nav__item> <a href=#pipes-and-channels class=md-nav__link> Pipes and Channels </a> </li> <li class=md-nav__item> <a href=#referencepointers class=md-nav__link> Reference/Pointers </a> </li> <li class=md-nav__item> <a href=#recursion class=md-nav__link> Recursion </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>Golang Language Reference</h1> <p>This is set of notes is taking from golang.org/ref/spec and gobyexample.com</p> <p>Go is a general-purpose language designed with systems programming in mind. It is strongly typed and garbage-collected and has explicit support for concurrent programming.</p> <p><br></p> <h3 id=go-code-organization>Go code organization<a class=headerlink href=#go-code-organization title="Permanent link">&para;</a></h3> <p>Go organizes code into a collection of files that would be compiled together, called <strong>packages</strong>.</p> <ul> <li><em>Functions, types, variables, and constants</em> defined in one source file are visible to all other source files within the same package.</li> </ul> <p>Go packages that are related and released together are organized within a <strong>module</strong>. A <strong>repository</strong> typically contains only one module located at the root of the repo.</p> <ul> <li><code>go.mod</code> decalres the <code>module path</code></li> <li>A module's path serves as an import path prefix for its packages and indicates where the go command should look to download it</li> </ul> <p>A package's <strong>import path</strong> is its module path joined with its subdirectory within the module.</p> <ul> <li>i.e. the module <code>github.com/google/go-cmp</code> contains a package in the directory <code>cmp/</code>. That package's import path is <code>github.com/google/go-cmp/cmp</code></li> </ul> <p><br></p> <h3 id=go-command>Go command<a class=headerlink href=#go-command title="Permanent link">&para;</a></h3> <p><strong>Create from scratch</strong></p> <div class=highlight><pre><span></span><code><span class=nv>module_path</span><span class=o>=</span>&lt;module_path&gt;
mkdir <span class=s2>&quot;</span><span class=nv>$module_path</span><span class=s2>&quot;</span>
go mod init <span class=s2>&quot;</span><span class=nv>$module_path</span><span class=s2>&quot;</span>
</code></pre></div> <p>A <em>module path</em> can be in the form of <code>example.com/user/hello</code>, where the part before the first <code>/</code> is the organization domain name, then follows a variable-sized path, and the part after the last <code>/</code> will be the <em>module name</em>.</p> <p><strong>A simple program</strong></p> <div class=highlight><pre><span></span><code><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=p>(</span>
  <span class=s>&quot;fmt&quot;</span>
<span class=p>)</span>

<span class=kd>func</span> <span class=nx>main</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=s>&quot;Hello, world.&quot;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> <p>The first statement in a Go source file must be package name.</p> <p>When building <strong>Executable</strong> binaries, its starting point must always use package <code>main</code>.</p> <p><strong>Build a program</strong></p> <p><code>go install "$module_path"</code> will build and install the executable binary to <code>$HOME/go/bin/module_name</code></p> <ul> <li>has to be within the source directory of <code>$module_path</code></li> <li>go commands accept paths relative to the working directory</li> <li><code>go build</code> will just compile and build the code within current directory</li> </ul> <p>The install directory is controlled by the <code>$GOPATH</code> and <code>$GOBIN</code> environment variables.</p> <ul> <li>If <code>$GOBIN</code> is set, binaries are installed to that directory<ul> <li>use <code>go env -w GOBIN=/somewhere/else/bin</code> to dynamically change its value</li> <li>use <code>go env -u GOBIN</code> to unset it</li> </ul> </li> <li>If <code>$GOPATH</code> is set, binaries are installed to the bin subdirectory of the first directory in the <code>$GOPATH</code> list.</li> <li>Otherwise, binaries are installed to the bin subdirectory of the default <code>$GOPATH</code> (<code>$HOME/go</code>)</li> </ul> <p>Run the binary after the build, like you would do with a Linux command. Alternatively, can use <code>go run &lt;main_package&gt;.go</code> to preview running the program before building it.</p> <p><br></p> <h3 id=use-packages-from-other-sources>Use packages from other sources<a class=headerlink href=#use-packages-from-other-sources title="Permanent link">&para;</a></h3> <p>An <strong>import path</strong> can describe how to obtain the package source code using a revision control system such as Git.</p> <div class=highlight><pre><span></span><code><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=p>(</span>
    <span class=s>&quot;fmt&quot;</span>

    <span class=s>&quot;example.com/user/hello/morestrings&quot;</span>
    <span class=s>&quot;github.com/google/go-cmp/cmp&quot;</span> <span class=c1>// load github.com/google/go-cmp/cmp in this program</span>
<span class=p>)</span>

<span class=kd>func</span> <span class=nx>main</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>morestrings</span><span class=p>.</span><span class=nx>ReverseRunes</span><span class=p>(</span><span class=s>&quot;!oG ,olleH&quot;</span><span class=p>))</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>cmp</span><span class=p>.</span><span class=nx>Diff</span><span class=p>(</span><span class=s>&quot;Hello World&quot;</span><span class=p>,</span> <span class=s>&quot;Hello Go&quot;</span><span class=p>))</span> <span class=c1>// directly invoke functions defined in &#39;cmp&#39; module</span>
<span class=p>}</span>
</code></pre></div> <p>When you run commands like <code>go install, go build, or go run</code>, the go command will automatically download the remote module and record its version in your <code>go.mod</code> file.</p> <p>An interesting <a href=https://maelvls.dev/go111module-everywhere/ target=_blank>article</a> about GO111MODULE.</p> <p>Module dependencies are automatically downloaded to the <code>pkg/mod</code> subdirectory of the directory indicated by the <code>$GOPATH</code> environment variable.</p> <p>To remove all downloaded modules, use <code>go clean -modcache</code></p> <p><br></p> <h3 id=testing>Testing<a class=headerlink href=#testing title="Permanent link">&para;</a></h3> <p>Go has a lightweight test framework composed of the <code>go test</code> command and the <code>testing</code> package.</p> <ul> <li>A test file should be named ending with <code>_test.go</code></li> <li>A test function should be named like <code>TestXXX</code> with signature like <code>func (t *testing.T)</code></li> <li>If the function calls a failure function such as <code>t.Error</code> or <code>t.Fail</code>, the test is considered to have failed.</li> </ul> <div class=highlight><pre><span></span><code><span class=kn>package</span> <span class=nx>morestrings</span>

<span class=kn>import</span> <span class=s>&quot;testing&quot;</span>

<span class=kd>func</span> <span class=nx>TestReverseRunes</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>cases</span> <span class=o>:=</span> <span class=p>[]</span><span class=kd>struct</span> <span class=p>{</span>
        <span class=nx>in</span><span class=p>,</span> <span class=nx>want</span> <span class=kt>string</span>
    <span class=p>}{</span> <span class=c1>// shortcut to initialize anonymous struct</span>
        <span class=p>{</span><span class=s>&quot;Hello, world&quot;</span><span class=p>,</span> <span class=s>&quot;dlrow ,olleH&quot;</span><span class=p>},</span>
        <span class=p>{</span><span class=s>&quot;Hello, 世界&quot;</span><span class=p>,</span> <span class=s>&quot;界世 ,olleH&quot;</span><span class=p>},</span>
        <span class=p>{</span><span class=s>&quot;&quot;</span><span class=p>,</span> <span class=s>&quot;&quot;</span><span class=p>},</span>
    <span class=p>}</span>
    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>c</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>cases</span> <span class=p>{</span>
        <span class=nx>got</span> <span class=o>:=</span> <span class=nx>ReverseRunes</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>in</span><span class=p>)</span>
        <span class=k>if</span> <span class=nx>got</span> <span class=o>!=</span> <span class=nx>c</span><span class=p>.</span><span class=nx>want</span> <span class=p>{</span>
            <span class=nx>t</span><span class=p>.</span><span class=nx>Errorf</span><span class=p>(</span><span class=s>&quot;ReverseRunes(%q) == %q, want %q&quot;</span><span class=p>,</span> <span class=nx>c</span><span class=p>.</span><span class=nx>in</span><span class=p>,</span> <span class=nx>got</span><span class=p>,</span> <span class=nx>c</span><span class=p>.</span><span class=nx>want</span><span class=p>)</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=c1>// run the tests</span>
<span class=k>go</span> <span class=nx>test</span>
<span class=k>go</span> <span class=nx>test</span> <span class=o>-</span><span class=nx>v</span>
<span class=c1>// PASS</span>
<span class=c1>// ok   example.com/user/morestrings 0.165s</span>
</code></pre></div> <p><br></p> <h3 id=commenting>Commenting<a class=headerlink href=#commenting title="Permanent link">&para;</a></h3> <p>Go provides C-style <code>/* */</code> <strong>block comments</strong> and C++-style <code>//</code> <strong>line comments</strong></p> <p><br></p> <h3 id=type-of-data>Type of Data<a class=headerlink href=#type-of-data title="Permanent link">&para;</a></h3> <p>A <strong>variable</strong> is a storage location for holding a value. The set of permissible values is determined by the variable's type.</p> <ul> <li>Go can infer the type of initialized variables so a type is optional<ul> <li><code>var a = "initial"</code> same as <code>var a string = "string value"</code></li> </ul> </li> <li>declare multiple variables in one line: <code>var b, c int = 1, 2</code></li> <li>shorthand for declaring and assigning value to a variable: <code>f := "apple"</code></li> </ul> <p>A <strong>variable declaration</strong> or, for function parameters and results, the signature of a function declaration or function literal reserves storage for a named variable.</p> <p><strong>Structured variables</strong> of <em>array, slice, and struct</em> types have elements and fields that may be addressed individually. Each such element acts like a variable.</p> <p>The <strong>static type</strong> of a variable is the type given in its declaration, the type provided in the <em>new</em> call or composite literal, or the type of an element of a structured variable.</p> <p>Variables of interface type also have a distinct <strong>dynamic type</strong>, which is the concrete type of the value assigned to the variable at run time</p> <div class=highlight><pre><span></span><code><span class=kd>var</span> <span class=nx>x</span> <span class=kd>interface</span><span class=p>{}</span>  <span class=c1>// x is nil and has static type interface{}</span>
<span class=kd>var</span> <span class=nx>v</span> <span class=o>*</span><span class=nx>T</span>           <span class=c1>// v has value nil, static type *T</span>
<span class=nx>x</span> <span class=p>=</span> <span class=mi>42</span>             <span class=c1>// x has value 42 and dynamic type int</span>
<span class=nx>x</span> <span class=p>=</span> <span class=nx>v</span>              <span class=c1>// x has value (*T)(nil) and dynamic type *T</span>
</code></pre></div> <p>type declarations: <div class=highlight><pre><span></span><code><span class=kd>type</span> <span class=p>(</span>
    <span class=nx>A1</span> <span class=p>=</span> <span class=kt>string</span>
    <span class=nx>A2</span> <span class=p>=</span> <span class=nx>A1</span>
<span class=p>)</span>
</code></pre></div></p> <p><strong>Constants</strong></p> <p>There are boolean constants, rune constants, integer constants, floating-point constants, complex constants, and string constants.</p> <p>There are no constants denoting the IEEE-754 negative zero, infinity, and not-a-number values</p> <p>A constant may be given a type explicitly by a constant declaration or conversion, or implicitly when used in a variable declaration or an assignment or as an operand in an expression.</p> <ul> <li>declares a constant with <code>const s string = "string constant"</code></li> <li><code>const</code> can be used anywhere <code>var</code> is used</li> </ul> <p><strong>Numbers</strong></p> <p>A numeric type represents sets of integer or floating-point values.</p> <div class=highlight><pre><span></span><code><span class=kt>uint8</span>       <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>unsigned</span>  <span class=mi>8</span><span class=o>-</span><span class=nx>bit</span> <span class=nx>integers</span> <span class=p>(</span><span class=mi>0</span> <span class=nx>to</span> <span class=mi>255</span><span class=p>)</span>
<span class=kt>uint16</span>      <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>unsigned</span> <span class=mi>16</span><span class=o>-</span><span class=nx>bit</span> <span class=nx>integers</span> <span class=p>(</span><span class=mi>0</span> <span class=nx>to</span> <span class=mi>65535</span><span class=p>)</span>
<span class=kt>uint32</span>      <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>unsigned</span> <span class=mi>32</span><span class=o>-</span><span class=nx>bit</span> <span class=nx>integers</span> <span class=p>(</span><span class=mi>0</span> <span class=nx>to</span> <span class=mi>4294967295</span><span class=p>)</span>
<span class=kt>uint64</span>      <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>unsigned</span> <span class=mi>64</span><span class=o>-</span><span class=nx>bit</span> <span class=nx>integers</span> <span class=p>(</span><span class=mi>0</span> <span class=nx>to</span> <span class=mi>18446744073709551615</span><span class=p>)</span>

<span class=kt>int8</span>        <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>signed</span>  <span class=mi>8</span><span class=o>-</span><span class=nx>bit</span> <span class=nx>integers</span> <span class=p>(</span><span class=o>-</span><span class=mi>128</span> <span class=nx>to</span> <span class=mi>127</span><span class=p>)</span>
<span class=kt>int16</span>       <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>signed</span> <span class=mi>16</span><span class=o>-</span><span class=nx>bit</span> <span class=nx>integers</span> <span class=p>(</span><span class=o>-</span><span class=mi>32768</span> <span class=nx>to</span> <span class=mi>32767</span><span class=p>)</span>
<span class=kt>int32</span>       <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>signed</span> <span class=mi>32</span><span class=o>-</span><span class=nx>bit</span> <span class=nx>integers</span> <span class=p>(</span><span class=o>-</span><span class=mi>2147483648</span> <span class=nx>to</span> <span class=mi>2147483647</span><span class=p>)</span>
<span class=kt>int64</span>       <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>signed</span> <span class=mi>64</span><span class=o>-</span><span class=nx>bit</span> <span class=nx>integers</span> <span class=p>(</span><span class=o>-</span><span class=mi>9223372036854775808</span> <span class=nx>to</span> <span class=mi>9223372036854775807</span><span class=p>)</span>

<span class=kt>float32</span>     <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>IEEE</span><span class=o>-</span><span class=mi>754</span> <span class=mi>32</span><span class=o>-</span><span class=nx>bit</span> <span class=nx>floating</span><span class=o>-</span><span class=nx>point</span> <span class=nx>numbers</span>
<span class=kt>float64</span>     <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>IEEE</span><span class=o>-</span><span class=mi>754</span> <span class=mi>64</span><span class=o>-</span><span class=nx>bit</span> <span class=nx>floating</span><span class=o>-</span><span class=nx>point</span> <span class=nx>numbers</span>

<span class=kt>complex64</span>   <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>complex</span> <span class=nx>numbers</span> <span class=nx>with</span> <span class=kt>float32</span> <span class=nx>real</span> <span class=nx>and</span> <span class=nx>imaginary</span> <span class=nx>parts</span>
<span class=kt>complex128</span>  <span class=nx>the</span> <span class=nx>set</span> <span class=nx>of</span> <span class=nx>all</span> <span class=nx>complex</span> <span class=nx>numbers</span> <span class=nx>with</span> <span class=kt>float64</span> <span class=nx>real</span> <span class=nx>and</span> <span class=nx>imaginary</span> <span class=nx>parts</span>

<span class=kt>byte</span>        <span class=nx>alias</span> <span class=k>for</span> <span class=kt>uint8</span>
<span class=kt>rune</span>        <span class=nx>alias</span> <span class=k>for</span> <span class=kt>int32</span>

<span class=kt>uint</span>        <span class=nx>either</span> <span class=mi>32</span> <span class=nx>or</span> <span class=mi>64</span> <span class=nx>bits</span>
<span class=kt>int</span>         <span class=nx>same</span> <span class=nx>size</span> <span class=nx>as</span> <span class=kt>uint</span>
<span class=kt>uintptr</span>     <span class=nx>an</span> <span class=nx>unsigned</span> <span class=nx>integer</span> <span class=nx>large</span> <span class=nx>enough</span> <span class=nx>to</span> <span class=nx>store</span> <span class=nx>the</span> <span class=nx>uninterpreted</span> <span class=nx>bits</span> <span class=nx>of</span> <span class=nx>a</span> <span class=nx>pointer</span> <span class=nx>value</span>
</code></pre></div> <p><strong>Strings</strong></p> <p>A string type represents the set of string values. String value is a sequence of bytes: <code>"go lang"</code></p> <ul> <li>string length can be obtained from function <code>len(str)</code></li> <li>chars within a string can be accessed with <code>str[i]</code></li> <li>range can also be used on a string value to iterate through its chars</li> </ul> <p><strong>Numbers&lt;-&gt;Strings</strong></p> <p><strong>Operators and punctuation</strong></p> <div class=highlight><pre><span></span><code>+    &amp;     +=    &amp;=     &amp;&amp;    ==    !=    (    )
-    |     -=    |=     ||    &lt;     &lt;=    [    ]
*    ^     *=    ^=     &lt;-    &gt;     &gt;=    {    }
/    &lt;&lt;    /=    &lt;&lt;=    ++    =     :=    ,    ;
%    &gt;&gt;    %=    &gt;&gt;=    --    !     ...   .    :
     &amp;^          &amp;^=
</code></pre></div> <p><strong>Keywords reserved</strong></p> <div class=highlight><pre><span></span><code>break        default      func         interface    select
case         defer        go           map          struct
chan         else         goto         package      switch
const        fallthrough  if           range        type
continue     for          import       return       var
</code></pre></div> <p><strong>Arrays</strong> is a numbered sequence of elements of a specific length.</p> <div class=highlight><pre><span></span><code><span class=kd>var</span> <span class=nx>a</span> <span class=p>[</span><span class=mi>5</span><span class=p>]</span><span class=kt>int</span> <span class=c1>// declare an array</span>
<span class=nx>a</span><span class=p>[</span><span class=mi>4</span><span class=p>]</span> <span class=p>=</span> <span class=mi>100</span> <span class=c1>// access specific index</span>
<span class=nx>b</span> <span class=o>:=</span> <span class=p>[</span><span class=mi>5</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>}</span> <span class=c1>// declare and assign with initialized list of elements</span>
<span class=kd>var</span> <span class=nx>twoD</span> <span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span><span class=kt>int</span> <span class=c1>// declare an 2D array</span>
<span class=nx>p</span> <span class=o>:=</span> <span class=p>[</span><span class=mi>1000</span><span class=p>]</span><span class=o>*</span><span class=kt>float64</span> <span class=c1>// array of float64 pointers</span>
<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>num</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>nums</span> <span class=p>{</span> <span class=c1>// use range on array</span>
  <span class=nx>sum</span> <span class=o>+=</span> <span class=nx>num</span>
<span class=p>}</span>
</code></pre></div> <p><strong>Slices</strong> is a descriptor for a contiguous segment of an underlying array and provides access to a numbered sequence of elements from that array.</p> <p>A slice can be taken from another slice or from an array</p> <div class=highlight><pre><span></span><code><span class=nx>b</span> <span class=o>:=</span> <span class=p>[</span><span class=mi>5</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>11</span><span class=p>,</span> <span class=mi>22</span><span class=p>,</span> <span class=mi>33</span><span class=p>,</span> <span class=mi>44</span><span class=p>,</span> <span class=mi>55</span><span class=p>}</span>
<span class=nx>l</span> <span class=o>:=</span> <span class=nx>b</span><span class=p>[</span><span class=mi>2</span><span class=p>:</span><span class=mi>5</span><span class=p>]</span> <span class=c1>// in fact takes indexes from [start:end), so 2-4 in this case</span>
<span class=nx>l</span> <span class=p>=</span> <span class=nx>b</span><span class=p>[:</span><span class=mi>4</span><span class=p>]</span> <span class=c1>// takes indexes 0-3 in this case</span>
<span class=nx>l</span> <span class=p>=</span> <span class=nx>b</span><span class=p>[</span><span class=mi>2</span><span class=p>:]</span> <span class=c1>// takes indexes 2-4 in this case</span>
<span class=nx>l</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>string</span><span class=p>{</span><span class=s>&quot;g&quot;</span><span class=p>,</span> <span class=s>&quot;h&quot;</span><span class=p>}</span> <span class=c1>// declare and initialize a slice</span>
<span class=nx>c</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>b</span><span class=p>))</span> <span class=c1>// make a slice with initial length</span>
<span class=nb>copy</span><span class=p>(</span><span class=nx>c</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span> <span class=c1>// copy values from another slice</span>
<span class=nx>c</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>c</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>200</span><span class=p>)</span> <span class=c1>// can dynamically add elements to a slice</span>
</code></pre></div> <p><strong>Maps</strong> are Go’s built-in associative data type aka hashes or dicts in other language</p> <div class=highlight><pre><span></span><code><span class=nx>m</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=p>)</span> <span class=c1>// create a map with [key-type]value-type</span>
<span class=nx>m</span><span class=p>[</span><span class=s>&quot;key1&quot;</span><span class=p>]</span> <span class=p>=</span> <span class=mi>1</span> <span class=c1>// access key and modify value</span>
<span class=nx>val</span><span class=p>,</span> <span class=nx>exists</span> <span class=o>:=</span> <span class=nx>m</span><span class=p>[</span><span class=s>&quot;key2&quot;</span><span class=p>]</span> <span class=c1>// 2nd value is a boolean indicates whether key2 defined</span>
<span class=nb>len</span><span class=p>(</span><span class=nx>m</span><span class=p>)</span> <span class=c1>// gives the number of key/value pairs</span>
<span class=nb>delete</span><span class=p>(</span><span class=nx>m</span><span class=p>,</span> <span class=s>&quot;key2&quot;</span><span class=p>)</span> <span class=c1>// deletes a key/value pair</span>
<span class=k>for</span> <span class=nx>k</span><span class=p>,</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>m</span> <span class=p>{</span> <span class=c1>// use range on map</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;%s -&gt; %s\n&quot;</span><span class=p>,</span> <span class=nx>k</span><span class=p>,</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> <p><strong>Structs</strong> are mutable and typed collections of fields</p> <ul> <li>useful for grouping data together to form records.</li> <li>A field declaration may be followed by an optional string literal <strong>tag</strong>, which becomes an <strong>attribute</strong> for all the fields in the corresponding field declaration.<ul> <li>An empty tag string is equivalent to an absent tag.</li> <li>The tags are made visible through a reflection interface and take part in type identity for structs but are otherwise ignored.</li> </ul> </li> <li>Go supports methods defined on struct types.</li> <li>An embedded field must be specified as a type name T or as a pointer to a non-interface type name *T, and T itself may not be a pointer type.<ul> <li>The unqualified type name acts as the field name.</li> <li>field names must be unique in a struct type, so cannot have more than one embedded field of the same type</li> </ul> </li> </ul> <div class=highlight><pre><span></span><code><span class=kd>type</span> <span class=nx>person</span> <span class=kd>struct</span> <span class=p>{</span>
  <span class=nx>name</span> <span class=kt>string</span>
  <span class=nx>age</span>  <span class=kt>int</span> <span class=s>&quot;tag string for age&quot;</span>
  <span class=nx>T1</span> <span class=c1>// embedded field of type T1</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=nx>newPerson</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=o>*</span><span class=nx>person</span> <span class=p>{</span>
  <span class=nx>p</span> <span class=o>:=</span> <span class=nx>person</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span> <span class=nx>name</span><span class=p>}</span> <span class=c1>// specify values to the variables in the struct</span>
  <span class=nx>p</span><span class=p>.</span><span class=nx>age</span> <span class=p>=</span> <span class=mi>42</span> <span class=c1>// explicitly change the value</span>
  <span class=k>return</span> <span class=o>&amp;</span><span class=nx>p</span>
<span class=p>}</span>
</code></pre></div> <p><strong>Zero values</strong></p> <p>When storage is allocated for a variable, either through a <strong>declaration</strong> or a call of <code>new</code>, or when a new value is created, either through a <strong>composite literal</strong> or a call of <code>make</code>, and no <strong>explicit initialization</strong> is provided, the variable or value is given a <em>default value</em>.</p> <p><code>false</code> for <strong>booleans</strong>, <code>0</code> for <strong>numeric</strong> types, <code>""</code> for <strong>strings</strong>, and <code>nil</code> for <strong>pointers, functions, interfaces, slices, channels, and maps</strong>.</p> <p>This initialization is done recursively.</p> <p><br></p> <h3 id=conditions>Conditions<a class=headerlink href=#conditions title="Permanent link">&para;</a></h3> <p><strong>If-else</strong> condition block is just like other programming language. There is no ternary form, however.</p> <p>Note that you don’t need parentheses around conditions in Go. This is true for loops as well.</p> <div class=highlight><pre><span></span><code><span class=c1>// A statement can precede conditionals;</span>
<span class=c1>// any variables declared here are available in all branches</span>
<span class=k>if</span> <span class=nx>num</span> <span class=o>:=</span> <span class=nx>f</span><span class=p>();</span> <span class=nx>num</span> <span class=p>&lt;</span> <span class=mi>0</span> <span class=p>{</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>num</span><span class=p>,</span> <span class=s>&quot;is negative&quot;</span><span class=p>)</span>
<span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>num</span> <span class=p>&lt;</span> <span class=mi>10</span> <span class=p>{</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>num</span><span class=p>,</span> <span class=s>&quot;has 1 digit&quot;</span><span class=p>)</span>
<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>num</span><span class=p>,</span> <span class=s>&quot;has multiple digits&quot;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> <p><strong>Switch</strong> block conditions are evaluated left-to-right and top-to-bottom</p> <ul> <li>the first one that equals the switch expression triggers execution of the statements of the associated case; the other cases are skipped</li> <li><code>default</code> condition can appear anywhere in the block</li> <li>use keyword <code>fallthrough</code> to fallthrough</li> </ul> <div class=highlight><pre><span></span><code><span class=k>switch</span> <span class=nx>code</span> <span class=o>:=</span> <span class=nx>f</span><span class=p>();</span> <span class=p>{</span>
<span class=k>default</span><span class=p>:</span> <span class=nx>s3</span><span class=p>()</span> <span class=c1>// can appear anywhere in this block</span>
<span class=k>case</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>:</span> <span class=nx>s1</span><span class=p>()</span> <span class=c1>// there is a hidden break for each case</span>
<span class=k>case</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>:</span> <span class=k>fallthrough</span> <span class=c1>// is necessary to fallthrough to next case</span>
<span class=k>case</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span> <span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>:</span>
  <span class=nx>s2</span><span class=p>()</span>
  <span class=nx>s3</span><span class=p>()</span>
<span class=p>}</span>
</code></pre></div> <p><br></p> <h3 id=loops>Loops<a class=headerlink href=#loops title="Permanent link">&para;</a></h3> <p><strong>for</strong> is Go’s only looping construct.</p> <div class=highlight><pre><span></span><code><span class=k>for</span> <span class=nx>j</span> <span class=o>:=</span> <span class=mi>7</span><span class=p>;</span> <span class=nx>j</span> <span class=o>&lt;=</span> <span class=mi>9</span><span class=p>;</span> <span class=nx>j</span><span class=o>++</span> <span class=p>{</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>j</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> <p>for loop used in a while fashion:</p> <div class=highlight><pre><span></span><code><span class=nx>i</span> <span class=o>:=</span> <span class=mi>1</span>
<span class=k>for</span> <span class=nx>i</span> <span class=o>&lt;=</span> <span class=mi>30</span> <span class=p>{</span>
  <span class=k>if</span> <span class=nx>i</span><span class=o>%</span><span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
    <span class=k>continue</span>
  <span class=p>}</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
  <span class=nx>i</span> <span class=p>=</span> <span class=nx>i</span> <span class=o>+</span> <span class=mi>1</span>
<span class=p>}</span>
</code></pre></div> <p>while true fashion loop terminates with <strong>break</strong></p> <div class=highlight><pre><span></span><code><span class=k>for</span> <span class=p>{</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=s>&quot;loop&quot;</span><span class=p>)</span>
  <span class=k>break</span>
<span class=p>}</span>
</code></pre></div> <p>for with range; like a for-each loop but with access to index</p> <div class=highlight><pre><span></span><code><span class=kd>var</span> <span class=nx>a</span> <span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=kt>string</span>
<span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>s</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>a</span> <span class=p>{</span> <span class=c1>// i is index; s is a[i]</span>
  <span class=nx>g</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>s</span><span class=p>)</span> <span class=c1>// do something for that values</span>
<span class=p>}</span>
</code></pre></div> <p><br></p> <h3 id=functions>Functions<a class=headerlink href=#functions title="Permanent link">&para;</a></h3> <p>A few things special in golang's <strong>functions</strong>:</p> <ul> <li>A function can be assigned to a variable or invoked directly.</li> <li>A function can return another function</li> <li>A function can accept a variable number of arguments of the same type and saved as an array variable in the function body.<ul> <li>it has to be the last argument type in the function signature</li> </ul> </li> <li>There can be <strong>multiple return values</strong> from a function</li> <li>If no return values expected, can omit the return type</li> </ul> <div class=highlight><pre><span></span><code><span class=kd>func</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=kt>int</span><span class=p>,</span> <span class=nx>z</span> <span class=kt>float64</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span> <span class=c1>// return value is defined outside parentheses</span>
  <span class=k>return</span> <span class=nx>a</span><span class=o>*</span><span class=nx>b</span> <span class=p>&lt;</span> <span class=nb>int</span><span class=p>(</span><span class=nx>z</span><span class=p>)</span>
<span class=p>}</span>
<span class=nx>f</span> <span class=o>:=</span> <span class=kd>func</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span> <span class=kt>int</span><span class=p>)</span> <span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=nx>x</span> <span class=o>+</span> <span class=nx>y</span><span class=p>,</span> <span class=nx>x</span> <span class=o>-</span> <span class=nx>y</span> <span class=p>}</span>
<span class=kd>func</span><span class=p>(</span><span class=nx>s</span> <span class=o>...</span><span class=kt>string</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// variadic parameter list</span>
  <span class=c1>// can be invoked with zero or more arguments for that parameter.</span>
<span class=p>}</span>
</code></pre></div> <p>Function literals are <strong>closures</strong>: they may refer to variables defined in a surrounding function.</p> <div class=highlight><pre><span></span><code><span class=kd>func</span> <span class=nx>intSeq</span><span class=p>()</span> <span class=kd>func</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span> <span class=c1>// returns the anonymous function</span>
  <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span>
  <span class=k>return</span> <span class=kd>func</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span>
    <span class=nx>i</span><span class=o>++</span>
    <span class=k>return</span> <span class=nx>i</span>
  <span class=p>}</span> <span class=c1>// this function closes over the variable i to form a closure</span>
    <span class=c1>// it captures its own i value, which will be updated each time it is called</span>
    <span class=c1>// until a new instance of this anonymous function is obtained from calling intSeq()</span>
<span class=p>}</span>
</code></pre></div> <p><br></p> <h3 id=special-statements>Special Statements<a class=headerlink href=#special-statements title="Permanent link">&para;</a></h3> <p>A <strong>select statement</strong> chooses which of a set of possible <strong>send</strong> or <strong>receive</strong> operations will proceed. It looks similar to a <em>switch statement</em> but with the cases all referring to <strong>communication</strong> operations. Some rules:</p> <ol> <li>For all the cases in the statement, the channel operands of receive operations and the channel and right-hand-side expressions of <strong>send</strong> statements are evaluated <strong>exactly once</strong></li> <li>evaluation will occur irrespective of which (if any) communication operation is selected to proceed.</li> <li>If one or more of the communications can proceed, a single one that can proceed is chosen via a uniform pseudo-random selection.</li> <li>Unless the selected case is the default case, the respective communication operation is executed.</li> <li>If the selected case is a RecvStmt with a short variable declaration or an assignment, the left-hand side expressions are evaluated and the received value (or values) are assigned.</li> <li>The statement list of the selected case is executed.</li> </ol> <p>Go’s <code>select</code> lets you wait on multiple channel operations. Combining goroutines and channels with select is a powerful feature of Go.</p> <div class=highlight><pre><span></span><code><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=p>(</span>
    <span class=s>&quot;fmt&quot;</span>
    <span class=s>&quot;time&quot;</span>
<span class=p>)</span>

<span class=kd>func</span> <span class=nx>main</span><span class=p>()</span> <span class=p>{</span>
  <span class=nx>c1</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>string</span><span class=p>)</span>
  <span class=nx>c2</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>string</span><span class=p>)</span>
  <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>time</span><span class=p>.</span><span class=nx>Sleep</span><span class=p>(</span><span class=mi>1</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
    <span class=nx>c1</span> <span class=o>&lt;-</span> <span class=s>&quot;one&quot;</span>
  <span class=p>}()</span>
  <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>time</span><span class=p>.</span><span class=nx>Sleep</span><span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
    <span class=nx>c2</span> <span class=o>&lt;-</span> <span class=s>&quot;two&quot;</span>
  <span class=p>}()</span>
  <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>2</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
    <span class=k>select</span> <span class=p>{</span> <span class=c1>// blocks until either one of the channels got a message</span>
    <span class=k>case</span> <span class=nx>msg1</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>c1</span><span class=p>:</span>
      <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=s>&quot;received&quot;</span><span class=p>,</span> <span class=nx>msg1</span><span class=p>)</span>
    <span class=k>case</span> <span class=nx>msg2</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>c2</span><span class=p>:</span>
      <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=s>&quot;received&quot;</span><span class=p>,</span> <span class=nx>msg2</span><span class=p>)</span>
    <span class=p>}</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>A <strong>defer</strong> statement is used to ensure that a function call is <strong>performed later</strong> at the end of the current function scope, usually for purposes of <strong>cleanup</strong>.</p> <p>Check for errors in a deferred function, if applicable.</p> <div class=highlight><pre><span></span><code><span class=kd>func</span> <span class=nx>main</span><span class=p>()</span> <span class=p>{</span>
  <span class=nx>f</span> <span class=o>:=</span> <span class=nx>createFile</span><span class=p>(</span><span class=s>&quot;/tmp/defer.txt&quot;</span><span class=p>)</span>
  <span class=k>defer</span> <span class=nx>closeFile</span><span class=p>(</span><span class=nx>f</span><span class=p>)</span> <span class=c1>// will be executed at the end of the enclosing function (main)</span>
  <span class=nx>writeFile</span><span class=p>(</span><span class=nx>f</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> <p><br></p> <h3 id=methods>Methods<a class=headerlink href=#methods title="Permanent link">&para;</a></h3> <p><strong>Methods</strong> differ from functions in that it takes a receiver type</p> <ul> <li>The receiver is specified via an <strong>extra</strong> parameter section preceding the method name.</li> <li>receiver type can be a single defined type that is either <strong>pointer</strong> or <strong>value</strong> and non-variadic parameter type<ul> <li>must be defined in the same package as the method</li> <li>the method is said to be <strong>bound</strong> to its <strong>receiver base type</strong> and the method name is <strong>visible</strong> only within selectors for type T or *T.</li> <li>the non-blank identifier (receiver name) must be unique in the method signature (against other arguments)</li> </ul> </li> <li>method can still take in arguments like a function does</li> <li>Go automatically handles <strong>conversion between values and pointers</strong> for method calls</li> <li>The type of a method is the type of a function with the receiver as first argument<ul> <li>i.e. <code>func(r *rect)</code></li> </ul> </li> </ul> <div class=highlight><pre><span></span><code><span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=o>*</span><span class=nx>rect</span><span class=p>)</span> <span class=nx>area</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span> <span class=c1>// prefered for most cases</span>
    <span class=k>return</span> <span class=nx>r</span><span class=p>.</span><span class=nx>width</span> <span class=o>*</span> <span class=nx>r</span><span class=p>.</span><span class=nx>height</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=nx>rect</span><span class=p>)</span> <span class=nx>perim</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span>
    <span class=k>return</span> <span class=mi>2</span> <span class=o>*</span> <span class=p>(</span><span class=nx>r</span><span class=p>.</span><span class=nx>width</span> <span class=o>+</span> <span class=nx>r</span><span class=p>.</span><span class=nx>height</span><span class=p>)</span>
<span class=p>}</span>
<span class=nx>r</span> <span class=p>=</span> <span class=nx>rect</span><span class=p>{</span><span class=nx>width</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span> <span class=nx>height</span><span class=p>:</span> <span class=mi>5</span><span class=p>}</span>
<span class=nx>r</span><span class=p>.</span><span class=nx>area</span><span class=p>()</span> <span class=c1>// auto convert to pointer type and pass in `r`</span>
<span class=nx>r</span><span class=p>.</span><span class=nx>perim</span><span class=p>()</span>
</code></pre></div> <p>A type may have a method set associated with it.</p> <ul> <li>In a method set, each method must have a unique non-blank method name.</li> <li>The method set of a type determines the interfaces that the type implements and the methods that can be called using a receiver of that type.<ul> <li>The method set of an interface type is its interface.</li> <li>The method set of any other type T consists of all methods declared with receiver type T.</li> <li>The method set of the corresponding pointer type <em>T is the set of all methods declared with receiver </em>T or T</li> <li>Any other type has an empty method set.</li> </ul> </li> </ul> <p><br></p> <h3 id=interfaces>Interfaces<a class=headerlink href=#interfaces title="Permanent link">&para;</a></h3> <p>Interfaces are named collections of <strong>method signatures</strong></p> <div class=highlight><pre><span></span><code><span class=kd>type</span> <span class=nx>geometry</span> <span class=kd>interface</span> <span class=p>{</span>
  <span class=nx>area</span><span class=p>()</span> <span class=kt>float64</span>
  <span class=nx>perim</span><span class=p>()</span> <span class=kt>float64</span>
<span class=p>}</span>
</code></pre></div> <p>To implement an interface in Go, we just need to implement all the methods in the interface.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span> <span class=nx>rect</span> <span class=kd>struct</span> <span class=p>{</span>
  <span class=nx>width</span><span class=p>,</span> <span class=nx>height</span> <span class=kt>float64</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=nx>rect</span><span class=p>)</span> <span class=nx>area</span><span class=p>()</span> <span class=kt>float64</span> <span class=p>{</span>
  <span class=k>return</span> <span class=nx>r</span><span class=p>.</span><span class=nx>width</span> <span class=o>*</span> <span class=nx>r</span><span class=p>.</span><span class=nx>height</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=p>(</span><span class=nx>r</span> <span class=nx>rect</span><span class=p>)</span> <span class=nx>perim</span><span class=p>()</span> <span class=kt>float64</span> <span class=p>{</span>
  <span class=k>return</span> <span class=mi>2</span><span class=o>*</span><span class=nx>r</span><span class=p>.</span><span class=nx>width</span> <span class=o>+</span> <span class=mi>2</span><span class=o>*</span><span class=nx>r</span><span class=p>.</span><span class=nx>height</span>
<span class=p>}</span>
</code></pre></div> <p>If a variable has an interface type, then we can call methods that are in the named interface.</p> <div class=highlight><pre><span></span><code><span class=kd>func</span> <span class=nx>measure</span><span class=p>(</span><span class=nx>g</span> <span class=nx>geometry</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>g</span><span class=p>)</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>g</span><span class=p>.</span><span class=nx>area</span><span class=p>())</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>g</span><span class=p>.</span><span class=nx>perim</span><span class=p>())</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=nx>main</span><span class=p>()</span> <span class=p>{</span>
  <span class=nx>r</span> <span class=o>:=</span> <span class=nx>rect</span><span class=p>{</span><span class=nx>width</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span> <span class=nx>height</span><span class=p>:</span> <span class=mi>4</span><span class=p>}</span>
  <span class=nx>measure</span><span class=p>(</span><span class=nx>r</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> <p>The <code>interface{}</code> type is the interface that has no methods. So essentially all types implements this interface.</p> <p>If you write a function that takes an interface{} value as a parameter, you can supply that function with any value.</p> <p><br></p> <h3 id=exceptions-and-errors>Exceptions and Errors<a class=headerlink href=#exceptions-and-errors title="Permanent link">&para;</a></h3> <p>By convention, errors are the last return value and have type <code>error</code>, a built-in <em>interface</em>.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span> <span class=kt>error</span> <span class=kd>interface</span> <span class=p>{</span>
    <span class=nx>Error</span><span class=p>()</span> <span class=kt>string</span>
<span class=p>}</span>
</code></pre></div> <p>Can construct a basic error value with <code>errors.New("Error Message")</code></p> <div class=highlight><pre><span></span><code><span class=kd>func</span> <span class=nx>foo</span><span class=p>(</span><span class=nx>arg</span> <span class=kt>int</span><span class=p>)</span> <span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>if</span> <span class=nx>arg</span> <span class=p>&lt;</span> <span class=mi>0</span> <span class=p>{</span>
    <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=nx>errors</span><span class=p>.</span><span class=nx>New</span><span class=p>(</span><span class=s>&quot;invalid input&quot;</span><span class=p>)</span> <span class=c1>// constructs a basic error value with the given error message.</span>
  <span class=p>}</span>
  <span class=k>return</span> <span class=nx>arg</span> <span class=o>+</span> <span class=mi>3</span><span class=p>,</span> <span class=kc>nil</span> <span class=c1>// A nil value in the error position indicates that there was no error.</span>
<span class=p>}</span>
</code></pre></div> <p>It’s possible to use custom types as errors by implementing the <code>Error()</code> <em>method</em> on them.</p> <div class=highlight><pre><span></span><code><span class=kd>type</span> <span class=nx>argError</span> <span class=kd>struct</span> <span class=p>{</span>
    <span class=nx>arg</span>  <span class=kt>int</span>
    <span class=nx>prob</span> <span class=kt>string</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=p>(</span><span class=nx>e</span> <span class=o>*</span><span class=nx>argError</span><span class=p>)</span> <span class=nx>Error</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
    <span class=k>return</span> <span class=nx>fmt</span><span class=p>.</span><span class=nx>Sprintf</span><span class=p>(</span><span class=s>&quot;%d - %s&quot;</span><span class=p>,</span> <span class=nx>e</span><span class=p>.</span><span class=nx>arg</span><span class=p>,</span> <span class=nx>e</span><span class=p>.</span><span class=nx>prob</span><span class=p>)</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=nx>foo2</span><span class=p>(</span><span class=nx>arg</span> <span class=kt>int</span><span class=p>)</span> <span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
  <span class=k>if</span> <span class=nx>arg</span> <span class=p>&lt;</span> <span class=mi>0</span> <span class=p>{</span>
    <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>argError</span><span class=p>{</span><span class=nx>arg</span><span class=p>,</span> <span class=s>&quot;can&#39;t work with it&quot;</span><span class=p>}</span> <span class=c1>// build a new struct</span>
  <span class=p>}</span>
  <span class=k>return</span> <span class=nx>arg</span> <span class=o>+</span> <span class=mi>3</span><span class=p>,</span> <span class=kc>nil</span>
<span class=p>}</span>
<span class=c1>// consume the error</span>
<span class=k>if</span> <span class=nx>v</span><span class=p>,</span> <span class=nx>e</span> <span class=o>:=</span> <span class=nx>foo</span><span class=p>(</span><span class=o>-</span><span class=mi>5</span><span class=p>);</span> <span class=nx>e</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=s>&quot;foo failed:&quot;</span><span class=p>,</span> <span class=nx>e</span><span class=p>)</span>
<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=s>&quot;foo worked:&quot;</span><span class=p>,</span> <span class=nx>v</span><span class=p>)</span>
<span class=p>}</span>
<span class=c1>// or</span>
<span class=nx>v</span><span class=p>,</span> <span class=nx>e</span> <span class=o>:=</span> <span class=nx>foo2</span><span class=p>(</span><span class=o>-</span><span class=mi>5</span><span class=p>)</span>
<span class=k>if</span> <span class=nx>errorInstance</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>e</span><span class=p>.(</span><span class=o>*</span><span class=nx>argError</span><span class=p>);</span> <span class=nx>ok</span> <span class=p>{</span>
  <span class=c1>// here used a syntax to dereference the error pointer back to its instance</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>errorInstance</span><span class=p>.</span><span class=nx>arg</span><span class=p>)</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>errorInstance</span><span class=p>.</span><span class=nx>prob</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> <p><strong>Panics</strong> typically means something went unexpectedly wrong. The program should fail fast when this type of error happens.</p> <p>When calling <code>panic(message)</code> inside a function, it will immediate exit the current function, then waits for all other deferred functions in the callstack to run, then the program is terminated and error condition reported.</p> <p>A <strong>recover</strong> function allows a program to manage behavior of a panicking goroutine.</p> <div class=highlight><pre><span></span><code><span class=kd>func</span> <span class=nx>protect</span><span class=p>(</span><span class=nx>g</span> <span class=kd>func</span><span class=p>())</span> <span class=p>{</span>
    <span class=k>defer</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
        <span class=nx>log</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=s>&quot;done&quot;</span><span class=p>)</span>  <span class=c1>// Println executes normally even if there is a panic</span>
        <span class=k>if</span> <span class=nx>x</span> <span class=o>:=</span> <span class=nb>recover</span><span class=p>();</span> <span class=nx>x</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
            <span class=nx>log</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;run time panic: %v&quot;</span><span class=p>,</span> <span class=nx>x</span><span class=p>)</span>
        <span class=p>}</span>
    <span class=p>}()</span>
    <span class=nx>log</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=s>&quot;start&quot;</span><span class=p>)</span>
    <span class=nx>g</span><span class=p>()</span> <span class=c1>// run-time panics raised will be protected by the recover() in the deferred function</span>
<span class=p>}</span>
</code></pre></div> <p>The return value of <code>recover</code> is <code>nil</code> if any of the following conditions holds:</p> <ul> <li>panic's argument was <code>nil</code></li> <li>the goroutine is not panicking</li> <li>recover was not called directly by a deferred function.</li> </ul> <p>Note that unlike some languages which use exceptions for handling of many errors, in Go it is idiomatic to use <strong>error-indicating return values</strong> wherever possible.</p> <p><strong>Run-time panics</strong></p> <p>Execution errors such as attempting to index an array out of bounds trigger a run-time panic equivalent to a call of the built-in function <code>panic</code> with a value of the implementation-defined interface type <code>runtime.Error</code>.</p> <p>That type satisfies the predeclared interface type <code>error</code>. The exact error values that represent distinct run-time error conditions are unspecified.</p> <div class=highlight><pre><span></span><code><span class=kn>package</span> <span class=nx>runtime</span>

<span class=kd>type</span> <span class=nx>Error</span> <span class=kd>interface</span> <span class=p>{</span>
    <span class=kt>error</span>
    <span class=c1>// and perhaps other methods</span>
<span class=p>}</span>
</code></pre></div> <p>Read more https://blog.golang.org/error-handling-and-go</p> <p><br></p> <h3 id=threading-and-goroutines>Threading and Goroutines<a class=headerlink href=#threading-and-goroutines title="Permanent link">&para;</a></h3> <p>A <code>go</code> statement starts the execution of a <em>function call</em> as an <strong>independent concurrent thread/process</strong> of control, or <strong>goroutine</strong>, within the same <em>address space</em>.</p> <p>Unlike with a regular function call, program execution does not wait for the invoked function to complete (<strong>non-blocking</strong>) by the goroutine.</p> <p>The expression must be a function or method call; it cannot be parenthesized.</p> <p>Cannot start goroutine on <em>built-in functions</em> and <em>expression statements</em>.</p> <div class=highlight><pre><span></span><code><span class=nx>f</span><span class=p>(</span><span class=s>&quot;direct&quot;</span><span class=p>)</span> <span class=c1>// invoke a function</span>
<span class=k>go</span> <span class=nx>f</span><span class=p>(</span><span class=s>&quot;goroutine&quot;</span><span class=p>)</span> <span class=c1>// start a goroutine calling a function</span>
<span class=k>go</span> <span class=kd>func</span><span class=p>(</span><span class=nx>msg</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// start a goroutine calling an anonymous function</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>msg</span><span class=p>)</span>
<span class=p>}(</span><span class=s>&quot;going&quot;</span><span class=p>)</span>
</code></pre></div> <p><br></p> <h3 id=pipes-and-channels>Pipes and Channels<a class=headerlink href=#pipes-and-channels title="Permanent link">&para;</a></h3> <p><strong>Channels</strong> are the <strong>pipe-equivalent</strong> in golang that connect <strong>concurrent goroutines</strong>.</p> <p>You can <em>send</em> values into channels from one goroutine and <em>receive</em> those values into another goroutine, of a specified element type for the values passed.</p> <div class=highlight><pre><span></span><code><span class=kd>chan</span> <span class=nx>T</span>          <span class=c1>// can be used to send and receive values of type T</span>
<span class=kd>chan</span><span class=o>&lt;-</span> <span class=kt>float64</span>  <span class=c1>// can only be used to send float64s</span>
<span class=o>&lt;-</span><span class=kd>chan</span> <span class=kt>int</span>      <span class=c1>// can only be used to receive ints</span>
</code></pre></div> <p>The optional <code>&lt;-</code> operator specifies the channel direction, <em>send</em> or <em>receive</em>. If no direction is given, the channel is <em>bidirectional</em>. A channel may be constrained only to send or only to receive by <strong>assignment</strong> or <strong>explicit conversion</strong>.</p> <p>A new, initialized channel value can be made using the built-in function <code>make</code>, which takes the <em>channel type</em> and an optional <em>capacity</em> as arguments</p> <ul> <li>The capacity, in number of elements, sets the size of the <strong>buffer</strong> in the channel (<strong>non-blocking</strong> unless the buffer is full).</li> <li>If the capacity is zero or absent, the channel is unbuffered and communication succeeds ONLY when both a sender and receiver are ready (<strong>blocking</strong>).</li> <li>A nil channel is never ready for communication and blocks forever.</li> <li>Channels act as first-in-first-out queues.</li> <li>A channel may be closed with the built-in function <code>close</code>.</li> <li><code>cap</code> and <code>len</code> can be called on a channel anywhere without additional synchronization</li> <li>A receive operation on a closed channel can always proceed <strong>immediately</strong>, yielding the element type's <em>zero value</em> after any previously sent values have been received.</li> </ul> <div class=highlight><pre><span></span><code><span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span> <span class=c1>// creates a non-blocking channel with buffer size of 100 int values</span>
<span class=nx>messages</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>string</span><span class=p>)</span> <span class=c1>// creates a blocking channel of type string for values</span>

<span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span> <span class=nx>messages</span> <span class=o>&lt;-</span> <span class=s>&quot;ping&quot;</span> <span class=p>}()</span> <span class=c1>// sends a value to the channel</span>

<span class=nx>msg</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>messages</span> <span class=c1>// receives a value to the channel</span>
<span class=nx>msg</span><span class=p>,</span> <span class=nx>more</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>messages</span> <span class=c1>// more is a boolean specify whether the buffer is empty</span>

<span class=nb>close</span><span class=p>(</span><span class=nx>messages</span><span class=p>)</span> <span class=c1>// close a channel; then the `more` value will be false if the channel `messages` has been closed and all values in the channel have already been received</span>
</code></pre></div> <p>Simple synchronization using blocking channel</p> <div class=highlight><pre><span></span><code><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=p>(</span>
    <span class=s>&quot;fmt&quot;</span>
    <span class=s>&quot;time&quot;</span>
<span class=p>)</span>

<span class=kd>func</span> <span class=nx>worker</span><span class=p>(</span><span class=nx>done</span> <span class=kd>chan</span> <span class=kt>bool</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Print</span><span class=p>(</span><span class=s>&quot;working...&quot;</span><span class=p>)</span>
  <span class=nx>time</span><span class=p>.</span><span class=nx>Sleep</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=s>&quot;done&quot;</span><span class=p>)</span>
  <span class=nx>done</span> <span class=o>&lt;-</span> <span class=kc>true</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nx>main</span><span class=p>()</span> <span class=p>{</span>
  <span class=nx>done</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>bool</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
  <span class=k>go</span> <span class=nx>worker</span><span class=p>(</span><span class=nx>done</span><span class=p>)</span>
  <span class=o>&lt;-</span><span class=nx>done</span> <span class=c1>// blocks until a value is received</span>
<span class=p>}</span>
</code></pre></div> <p>Use a <code>range</code> loop to drain the elements in a buffered channel</p> <div class=highlight><pre><span></span><code><span class=nx>queue</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>string</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
<span class=nx>queue</span> <span class=o>&lt;-</span> <span class=s>&quot;one&quot;</span>
<span class=nx>queue</span> <span class=o>&lt;-</span> <span class=s>&quot;two&quot;</span>
<span class=nb>close</span><span class=p>(</span><span class=nx>queue</span><span class=p>)</span> <span class=c1>// it’s possible to close a non-empty channel but still have the remaining values be received from its buffer</span>
<span class=k>for</span> <span class=nx>elem</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>queue</span> <span class=p>{</span>
  <span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>(</span><span class=nx>elem</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> <p><br></p> <h3 id=referencepointers>Reference/Pointers<a class=headerlink href=#referencepointers title="Permanent link">&para;</a></h3> <p>A pointer type denotes the set of all pointers to variables of a given type, called the base type of the pointer.</p> <ul> <li>The value of an uninitialized pointer is nil.</li> <li>Pass a pointer to a function will ensure the changes on the variable referenced by the pointer will be reflected everywhere that variable is used.</li> </ul> <div class=highlight><pre><span></span><code><span class=kd>func</span> <span class=nx>zeroptr</span><span class=p>(</span><span class=nx>iptr</span> <span class=o>*</span><span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
    <span class=o>*</span><span class=nx>iptr</span> <span class=p>=</span> <span class=mi>0</span> <span class=c1>// dereference the pointer and change its value</span>
<span class=p>}</span>
<span class=nx>z</span> <span class=o>:=</span> <span class=mi>100</span>
<span class=nx>zeroptr</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>z</span><span class=p>)</span> <span class=c1>// pass in the pointer of variable &#39;z&#39;</span>
</code></pre></div> <p><br></p> <h3 id=recursion>Recursion<a class=headerlink href=#recursion title="Permanent link">&para;</a></h3> <p>Nothing big regarding writing recursive functions in golang</p> <div class=highlight><pre><span></span><code><span class=kd>func</span> <span class=nx>fact</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
  <span class=k>if</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
    <span class=k>return</span> <span class=mi>1</span>
  <span class=p>}</span>
  <span class=k>return</span> <span class=nx>n</span> <span class=o>*</span> <span class=nx>fact</span><span class=p>(</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../../../Dev-Tools-Reference/Splunk/Splunk-Dashboarding/ class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Splunk Dashboarding </div> </div> </a> <a href=../Best-Practices/ class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Effective Go </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.53cc9318.min.js></script> <script src=../../../assets/javascripts/bundle.e9c9f54f.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.tabs', 'navigation.instant'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>